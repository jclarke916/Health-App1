<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Centurion | v3100.0 Supercharged</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #050505;
            --bg-panel: rgba(20, 20, 20, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --gold: #FFD60A;
            --cyan: #00f0ff;
            --acid: #ccff00;
            --alert: #ff3b30;
            --text-main: #ffffff;
            --text-muted: #666666;
            --font-ui: 'Inter', sans-serif;
            --font-data: 'JetBrains Mono', monospace;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; padding: 20px 16px 40px; background: var(--bg-deep); color: var(--text-main); font-family: var(--font-ui); min-height: 100vh; background-image: radial-gradient(circle at top right, #111 0%, #000 60%); }

        /* HEADER & SWITCHER */
        .hud-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid var(--border); padding-bottom: 15px; }
        .app-name { font-size: 0.7rem; font-weight: 900; letter-spacing: 2px; color: var(--text-muted); }
        .user-switch { display: flex; gap: 5px; background: #111; padding: 3px; border-radius: 20px; border: 1px solid var(--border); }
        .u-btn { padding: 6px 16px; border-radius: 16px; font-size: 0.65rem; font-weight: 700; color: #555; background: transparent; border: none; cursor: pointer; transition: all 0.3s; }
        .u-btn.active { background: var(--gold); color: #000; box-shadow: 0 0 15px rgba(255, 214, 10, 0.2); }

        /* SYSTEM STATUS (THE BRAIN) */
        .status-module { text-align: center; margin-bottom: 25px; position: relative; }
        .status-ring { width: 120px; height: 120px; border-radius: 50%; border: 4px solid var(--border); margin: 0 auto 15px; display: flex; flex-direction: column; justify-content: center; align-items: center; box-shadow: 0 0 30px rgba(0,0,0,0.5); background: radial-gradient(circle, #222 0%, #000 70%); }
        .status-val { font-family: var(--font-data); font-size: 2.2rem; font-weight: 700; color: #fff; letter-spacing: -2px; }
        .status-label { font-size: 0.6rem; color: var(--gold); font-weight: 700; letter-spacing: 1px; margin-top: -5px; }
        
        .directive-banner { background: rgba(255, 214, 10, 0.1); border: 1px solid var(--gold); color: var(--gold); padding: 10px; border-radius: 8px; font-family: var(--font-data); font-size: 0.65rem; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        
        /* DATA GRIDS (The "Cockpit") */
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px; }
        .stat-card { background: var(--bg-panel); border: 1px solid var(--border); border-radius: 12px; padding: 12px; position: relative; overflow: hidden; }
        .stat-label { font-size: 0.55rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.5px; display: block; margin-bottom: 6px; }
        .stat-val { font-family: var(--font-data); font-size: 1.1rem; font-weight: 700; color: #fff; }
        .stat-sub { font-size: 0.6rem; margin-top: 4px; font-weight: 600; }
        
        /* COLORS FOR LOGIC */
        .c-good { color: var(--acid); }
        .c-warn { color: var(--gold); }
        .c-bad { color: var(--alert); }
        .c-neu { color: var(--cyan); }

        /* PRESCRIPTION MODULES */
        .rx-module { border-left: 3px solid var(--border); background: linear-gradient(90deg, rgba(255,255,255,0.03) 0%, transparent 100%); padding: 15px; margin-bottom: 15px; border-radius: 0 12px 12px 0; }
        .rx-header { font-size: 0.65rem; font-weight: 800; color: var(--text-muted); letter-spacing: 1px; margin-bottom: 8px; text-transform: uppercase; }
        .rx-text { font-size: 0.85rem; line-height: 1.5; font-weight: 500; margin-bottom: 8px; }
        .rx-mech { font-family: var(--font-data); font-size: 0.55rem; color: #888; background: rgba(0,0,0,0.3); padding: 4px 8px; border-radius: 4px; display: inline-block; border: 1px solid var(--border); }

        /* CONFIRM BUTTON */
        .confirm-btn { width: 100%; padding: 18px; background: var(--acid); color: #000; font-weight: 800; font-size: 0.8rem; border: none; border-radius: 12px; cursor: pointer; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 0 20px rgba(204, 255, 0, 0.2); transition: all 0.2s; margin-top: 20px; }
        .confirm-btn:active { transform: scale(0.98); }

        /* SYNC BAR */
        .sync-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: rgba(10,10,10,0.95); padding: 12px; border-top: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(10px); font-family: var(--font-data); font-size: 0.6rem; color: #666; z-index: 99; }
    </style>
</head>
<body>

    <div class="hud-header">
        <div class="app-name">CENTURION v3100</div>
        <div class="user-switch">
            <button id="btn-J" class="u-btn active" onclick="centurion.loadUser('J')">JERMAINE</button>
            <button id="btn-S" class="u-btn" onclick="centurion.loadUser('S')">SOPHIA</button>
        </div>
    </div>

    <div class="status-module">
        <div class="status-ring" id="ring-color">
            <div class="status-val" id="readiness-display">--</div>
            <div class="status-label">SYS READY</div>
        </div>
        <div class="directive-banner">
            <span>TACTICAL ORDER:</span>
            <span id="tactical-order" style="font-weight:700; color:#fff">--</span>
        </div>
    </div>

    <div class="grid-3">
        <div class="stat-card">
            <span class="stat-label">DEEP SLEEP</span>
            <span id="deep-sleep" class="stat-val">--</span>
            <div id="deep-trend" class="stat-sub">--</div>
        </div>
        <div class="stat-card">
            <span class="stat-label">HRV BAL</span>
            <span id="hrv-val" class="stat-val">--</span>
            <div id="hrv-trend" class="stat-sub">--</div>
        </div>
        <div class="stat-card">
            <span class="stat-label">CNS LOAD</span>
            <span id="cns-load" class="stat-val">--</span>
            <div class="stat-sub" style="color:#aaa">CAPACITY</div>
        </div>
    </div>

    <div class="grid-3">
        <div class="stat-card">
            <span class="stat-label">VISCERAL</span>
            <span id="visceral-fat" class="stat-val">--</span>
            <div class="stat-sub c-warn">TARGET &lt; 7</div>
        </div>
        <div class="stat-card">
            <span class="stat-label">APOB</span>
            <span id="apob-val" class="stat-val">--</span>
            <div id="apob-trend" class="stat-sub">--</div>
        </div>
        <div class="stat-card">
            <span class="stat-label">CARB TOL</span>
            <span id="carb-tol" class="stat-val">--</span>
            <div class="stat-sub" style="color:#aaa">GRAMS</div>
        </div>
    </div>

    <div id="protocol-output">
        </div>

    <button class="confirm-btn" onclick="centurion.adhere()">CONFIRM PROTOCOL ADHERENCE</button>

    <div class="sync-bar">
        <span id="sync-status">‚óè LIVE FEED: OURA V2 API</span>
        <span id="last-sync">SYNCING...</span>
    </div>

<script>
/**
 * THE CENTURION v3100.0 SUPERCHARGED
 * Logic: Multi-variable decision matrix using Oura V2 Data + Clinical Labs
 */

const TOKENS = {
    'J': 'WLIGFPFJQY73G43BY7CK7H6UJXPQ7N5Y',
    'S': '4QSDWYJJUZFHRWRH727NCK7WH4COQJF4'
};

// COMPREHENSIVE USER DATABASE
// Integrating: Body Comp, Blood Labs, Oura Baseline Targets
const USER_DB = {
    'J': {
        name: 'Jermaine',
        // Clinical Baseline
        labs: { apob: 95, hba1c: 5.4, testosterone: 650, ferritin: 120 },
        body: { visceral_fat: 10, muscle_mass: 99, body_fat: 19.0 },
        // Thresholds for Decision Logic
        targets: { deep_sleep: 90, hrv: 45, rem: 80, readiness: 85 },
        // Prescriptions
        focus: "LIPID OXIDATION",
        protocols: {
            anabolic: { task: "HEAVY COMPOUNDS (5x5)", meal: "High Carb Refeed", mech: "Insulin sensitivity maximized post-heavy load." },
            metabolic: { task: "ZONE 2 / 45 MIN", meal: "Low Carb / High Fiber", mech: "Fat oxidation priority to lower Visceral Fat." },
            recovery: { task: "SAUNA / COLD", meal: "Anti-Inflammatory", mech: "Cytokine flush required due to low HRV." }
        }
    },
    'S': {
        name: 'Sophia',
        // Clinical Baseline
        labs: { ana: 320, ferritin: 75, hba1c: 5.6, vitaminD: 38 },
        body: { visceral_fat: 9, muscle_mass: 49, body_fat: 36.1 },
        // Thresholds
        targets: { deep_sleep: 80, hrv: 35, rem: 90, readiness: 80 },
        // Prescriptions
        focus: "IMMUNE MODULATION",
        protocols: {
            anabolic: { task: "HYPERTROPHY / GLUTES", meal: "Mod Carb / High Protein", mech: "Muscle tissue acts as glucose sink for HbA1c." },
            metabolic: { task: "WALKING / YOGA", meal: "Keto / Fasting Mimicking", mech: "Lower insulin to reduce autoimmune flare risk." },
            recovery: { task: "SLEEP EXTENSION", meal: "Gut Repair / Bone Broth", mech: "Deep sleep correlates with T-Cell regulation." }
        }
    }
};

class SuperchargedEngine {
    constructor() {
        this.user = localStorage.getItem('centurion_user') || 'J';
        this.init();
    }

    init() {
        this.updateUI();
        this.fetchData();
    }

    loadUser(uid) {
        this.user = uid;
        localStorage.setItem('centurion_user', uid);
        this.updateUI();
        this.fetchData();
    }

    updateUI() {
        document.querySelectorAll('.u-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(`btn-${this.user}`).classList.add('active');
        document.getElementById('sync-status').innerHTML = "‚óè HANDSHAKE INITIATED...";
    }

    // SIMULATED OURA V2 API FETCH (This structure mirrors the real V2 JSON response)
    async fetchData() {
        // Simulate network delay for "Premium" feel
        document.getElementById('readiness-display').innerText = "--";
        await new Promise(r => setTimeout(r, 800));

        // In a real app, this would be the fetch() call using TOKENS[this.user]
        // MOCKING DATA based on user persona to demonstrate the logic engine
        const mockData = this.user === 'J' 
            ? { score: 88, deep: 105, rem: 85, hrv: 52, activity_cal: 550, rhr: 48 } // Jermaine: Good Day
            : { score: 65, deep: 45, rem: 110, hrv: 22, activity_cal: 200, rhr: 62 }; // Sophia: Recovery Day

        this.processBioEngine(mockData);
    }

    // THE LOGIC CORE
    processBioEngine(data) {
        const u = USER_DB[this.user];
        
        // 1. CALCULATE SYSTEMS
        const neuralDrive = (data.deep / u.targets.deep_sleep) * 100; // CNS Recovery
        const recoveryState = (data.hrv / u.targets.hrv) * 100; // Autonomic Balance
        const metabolicFire = u.body.visceral_fat > 7 ? "RESTRICTED" : "OPTIMAL";

        // 2. DETERMINE SYSTEM MODE
        let systemMode = "NEUTRAL";
        let colorTheme = "var(--cyan)";
        let tacticalOrder = "";
        let prescription = {};

        if (data.score >= 85 && neuralDrive > 90) {
            systemMode = "ANABOLIC PRIME";
            colorTheme = "var(--acid)";
            tacticalOrder = "PUSH LIMITS";
            prescription = u.protocols.anabolic;
        } else if (data.score < 70 || neuralDrive < 60) {
            systemMode = "SYSTEM REPAIR";
            colorTheme = "var(--alert)";
            tacticalOrder = "FLUSH & RECOVER";
            prescription = u.protocols.recovery;
        } else {
            systemMode = "METABOLIC FLOW";
            colorTheme = "var(--gold)";
            tacticalOrder = "MAINTAIN OUTPUT";
            prescription = u.protocols.metabolic;
        }

        // 3. RENDER HUD
        this.renderHUD(data, u, systemMode, colorTheme, tacticalOrder, prescription);
    }

    renderHUD(data, u, mode, color, order, rx) {
        // Status Ring
        document.getElementById('readiness-display').innerText = data.score;
        document.getElementById('ring-color').style.borderColor = color;
        document.getElementById('ring-color').style.boxShadow = `0 0 30px ${color}40`; // 40 is hex opacity
        document.querySelector('.status-label').innerText = mode;
        document.querySelector('.status-label').style.color = color;
        document.getElementById('tactical-order').innerText = order;
        document.getElementById('tactical-order').style.color = color;
        document.querySelector('.directive-banner').style.borderColor = color;
        document.querySelector('.directive-banner').style.color = color;
        document.querySelector('.confirm-btn').style.background = color;

        // Neural Grid
        this.renderStat('deep-sleep', data.deep + "m", data.deep > u.targets.deep_sleep ? 'OPTIMAL' : 'DEFICIT', data.deep > u.targets.deep_sleep ? 'c-good' : 'c-bad');
        this.renderStat('hrv-val', data.hrv + "ms", data.hrv > u.targets.hrv ? 'BALANCED' : 'STRESSED', data.hrv > u.targets.hrv ? 'c-good' : 'c-bad');
        this.renderStat('cns-load', data.score > 80 ? '100%' : '40%', 'INTENSITY', 'c-neu');

        // Metabolic Grid
        this.renderStat('visceral-fat', u.body.visceral_fat, 'HIGH RISK', 'c-warn');
        this.renderStat('apob-val', u.labs.apob || u.labs.ana, this.user === 'J' ? 'mg/dL' : 'TITER', 'c-neu');
        
        // Carb Calculation Logic
        let carbRx = 0;
        if(mode === "ANABOLIC PRIME") carbRx = 250;
        else if(mode === "METABOLIC FLOW") carbRx = 150;
        else carbRx = 50; // Crash carbs on recovery days
        this.renderStat('carb-tol', carbRx, 'DAILY LIMIT', 'c-neu');

        // Prescriptions
        const html = `
            <div class="rx-module" style="border-left-color: ${color}">
                <div class="rx-header">üèãÔ∏è TRAINING PROTOCOL</div>
                <div class="rx-text">${rx.task}</div>
                <div class="rx-mech">REQ: ${data.score}% Readiness</div>
            </div>
            <div class="rx-module" style="border-left-color: ${color}">
                <div class="rx-header">ü•ó NUTRITION DIRECTIVE</div>
                <div class="rx-text">${rx.meal}</div>
                <div class="rx-mech">MECH: ${rx.mech}</div>
            </div>
        `;
        document.getElementById('protocol-output').innerHTML = html;

        // Footer
        document.getElementById('sync-status').innerHTML = "‚óè SYSTEM ONLINE: DATA CURRENT";
        document.getElementById('last-sync').innerText = new Date().toLocaleTimeString();
    }

    renderStat(id, val, sub, colorClass) {
        document.getElementById(id).innerText = val;
        const subEl = document.getElementById(id).nextElementSibling;
        subEl.innerText = sub;
        subEl.className = `stat-sub ${colorClass}`;
    }

    adhere() {
        const btn = document.querySelector('.confirm-btn');
        const oldText = btn.innerText;
        btn.innerText = "DATA LOGGED TO BIO-CORE ‚úì";
        setTimeout(() => btn.innerText = oldText, 2000);
    }
}

const centurion = new SuperchargedEngine();
</script>
</body>
</html>