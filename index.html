<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Centurion | v222.66 Core</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#050505;--card:#141414;--gold:#D4AF37;--green:#00E676;--blue:#00B0FF;--purple:#D500F9;--text:#fff;--g-pro:linear-gradient(90deg,#FF5252,#D50000);--g-carb:linear-gradient(90deg,#FFAB40,#FF6D00);--g-cal:linear-gradient(90deg,#B388FF,#6200EA)}
        *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);margin:0;padding:15px;font-size:14px}
        .container{max-width:500px;margin:0 auto; padding-bottom: 50px;}
        h1{text-align:center;font-weight:200;letter-spacing:5px;text-transform:uppercase;font-size:1.2rem;margin:10px 0}
        .version-tag { display: block; text-align: center; font-size: 0.5rem; color: #444; margin-top: -8px; margin-bottom: 15px; letter-spacing: 2px; }
        .badge-row{display:flex;justify-content:center;gap:8px;margin-bottom:15px}
        .u-badge{background:#000;padding:8px 16px;border-radius:20px;border:1px solid #333;font-size:0.6rem;font-weight:800;cursor:pointer;color:#666}
        .u-badge.active{border-color:var(--gold);color:var(--gold)}
        .status-bar{text-align:center;color:#888;font-size:0.65rem;font-weight:800;margin-bottom:10px;text-transform:uppercase}
        .controls{display:flex;gap:5px;margin-bottom:15px}
        .nav-btn{background:#111;border:1px solid #222;color:#888;padding:10px;flex:1;border-radius:8px;font-size:0.55rem;font-weight:800;cursor:pointer}
        .card, .macro-dashboard{background:var(--card);border-radius:20px;padding:20px;margin-bottom:15px;border:1px solid rgba(255,255,255,0.03);position:relative}
        .card::before{content:"";position:absolute;left:0;top:20px;bottom:20px;width:3px;background:var(--gold);border-radius:0 4px 4px 0}
        
        .label{color:#666;font-size:0.5rem;text-transform:uppercase;font-weight:900;margin-bottom:4px; display: flex; justify-content: space-between;}
        .portion-tag { color: var(--blue); }

        .value{
            font-size: 0.95rem;
            margin-bottom: 12px;
            font-weight: 500;
            cursor: pointer;
            border-bottom: 1px solid #222;
            padding-bottom: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .proto-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:6px;margin-top:10px;border-top:1px solid #222;padding-top:15px}
        .proto-box{background:#0a0a0a;border:1px solid #333;padding:8px 2px;border-radius:8px;text-align:center;font-size:0.5rem;font-weight:800;cursor:pointer}
        .proto-box.active{border-color:var(--green);color:var(--green)}
        .proto-box.rec{border-color:var(--purple);color:var(--purple)}
        .p-qty{display:block;color:#fff;font-size:0.6rem;margin-bottom:2px}
        .macro-row{margin-bottom:10px}
        .macro-label{display:flex;justify-content:space-between;font-size:0.55rem;font-weight:800;color:#777;margin-bottom:3px}
        .macro-bg{height:5px;background:#222;border-radius:10px;overflow:hidden}
        .macro-fill{height:100%;border-radius:10px;transition:width 0.8s}
        .tabs{display:flex;gap:4px;margin-bottom:15px}
        .tab{flex:1;padding:10px 0;background:#111;border:1px solid #222;color:#444;border-radius:8px;font-size:0.55rem;font-weight:800;text-align:center;cursor:pointer}
        .tab.active{background:#222;color:#fff;border-color:444}
        
        /* FULL SCREEN MODAL UPDATES */
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#0a0a0a;z-index:2000;overflow-y:auto;padding:0;}
        .modal-content{background:#0a0a0a;margin:0;padding:25px;border:none;border-radius:0;width:100%;min-height:100%;max-width:none;}
        
        /* FLOATING CLOSE BUTTON */
        .close-btn-float {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(30,30,30,0.8);
            backdrop-filter: blur(5px);
            border-radius: 50%;
            border: 1px solid #333;
            color: #fff;
            font-size: 24px;
            text-align: center;
            line-height: 38px;
            cursor: pointer;
            z-index: 2001;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }

        .chef-steps ol{padding-left:20px; color:#ccc; margin:10px 0; font-size:0.9rem; line-height:1.6;}
        .chef-steps li{margin-bottom:12px;}
        .chef-steps strong{color:var(--gold); display:block; margin-top:20px; font-size:0.8rem; border-top:1px dashed #333; padding-top:15px;}
        .juice-name{font-size:1.1rem;font-weight:900;color:#fff;text-align:center;text-transform:uppercase;cursor:pointer;border:1px dashed #333;padding:10px;border-radius:12px}
        
        .bio-section{margin-bottom:25px;padding:15px;background:rgba(255,255,255,0.03);border-radius:15px;border:1px solid rgba(255,255,255,0.05)}
        .bio-title{display:flex;justify-content:space-between;font-size:0.75rem;font-weight:800;color:#fff;margin-bottom:12px;text-transform:uppercase}
        .bar-group{display:flex;flex-direction:column;gap:8px}
        .bar-row{display:flex;align-items:center}
        .bar-lbl{width:45px;font-size:0.55rem;color:#666;font-weight:900;text-transform:uppercase}
        .bar-track{flex:1;height:8px;background:#111;border-radius:10px;margin:0 10px;border:1px solid #222;overflow:hidden}
        .bar-fill{height:100%;border-radius:10px;transition:width 1s cubic-bezier(0.4,0,0.2,1)}
        .bar-fill.past{background:#333}
        .bar-fill.now{background:var(--gold);box-shadow:0 0 10px rgba(212,175,55,0.3)}
        .bar-fill.goal{background:var(--green);box-shadow:0 0 12px rgba(0,230,118,0.4)}
        
        .rec-phase-list { position: relative; padding-left: 25px; margin-top: 20px; }
        .rec-phase-list::before { content: ''; position: absolute; left: 8px; top: 0; bottom: 0; width: 2px; background: linear-gradient(to bottom, var(--blue), var(--purple)); }
        .phase-item { position: relative; margin-bottom: 25px; }
        .phase-item::after { content: ''; position: absolute; left: -22px; top: 5px; width: 10px; height: 10px; background: var(--bg); border: 2px solid var(--blue); border-radius: 50%; }
        .phase-time { font-size: 0.6rem; font-weight: 900; color: var(--blue); text-transform: uppercase; letter-spacing: 1px; }
        .phase-title { display: block; font-size: 0.9rem; font-weight: 700; color: #fff; margin: 2px 0; }
        .phase-detail { font-size: 0.75rem; color: #999; line-height: 1.4; display: block; }
        
        .macro-pill {
            background: #1a1a1a;
            border: 1px solid #333;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.55rem;
            color: #888;
            font-weight: 800;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            white-space: nowrap;
        }
        .grocery-cat { font-size: 0.85rem; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; margin-top: 30px; margin-bottom: 15px; font-weight: 900; border-bottom: 1px dashed #333; padding-bottom: 8px; }
        .grocery-item { padding: 12px 0; color: #ccc; font-size: 0.95rem; display:flex; align-items:center; border-bottom:1px solid #1a1a1a; }
        .grocery-item span { margin-left: 12px; }

        /* SNACK GRID STYLES */
        .snack-grid { display: flex; gap: 10px; margin-bottom: 15px; }
        .snack-slot { 
            flex: 1; 
            border: 1px dashed #333; 
            border-radius: 12px; 
            padding: 12px 5px; 
            text-align: center; 
            cursor: pointer; 
            position: relative;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(255,255,255,0.02);
        }
        .snack-slot.filled { 
            border: 1px solid var(--gold); 
            background: #111; 
        }
        .snack-label { font-size: 0.65rem; color: #fff; font-weight: 700; line-height: 1.2; }
        .snack-macro { font-size: 0.5rem; color: #666; margin-top: 4px; }
        
        /* MONOCHROMATIC REMOVE 'X' */
        .remove-snack { 
            position: absolute; 
            top: -5px; 
            right: -5px; 
            background: #333; 
            color: #aaa;      
            border: 1px solid #222;
            border-radius: 50%; 
            width: 16px;      
            height: 16px; 
            font-size: 9px;   
            line-height: 14px; 
            text-align: center; 
            font-weight: 800;
            box-shadow: 0 1px 3px rgba(0,0,0,0.5);
            z-index: 10;
            transition: all 0.2s ease;
        }
        .remove-snack:hover { background: #444; color: #fff; border-color:#333; }

        /* HISTORY TABLE STYLES */
        .hist-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.7rem; color: #ccc; }
        .hist-table th { text-align: left; color: #666; border-bottom: 1px solid #333; padding: 5px; font-weight: 800; }
        .hist-table td { border-bottom: 1px solid #222; padding: 8px 5px; }
        .hist-row:last-child td { border-bottom: none; }
    </style>
</head>
<body>
<div class="container">
    <header><h1>THE CENTURION</h1>
        <span class="version-tag">v222.66</span>
        <div class="badge-row">
            <div id="bj" class="u-badge active" onclick="switchU('J')">üßîüèæ‚Äç‚ôÇÔ∏è JERMAINE</div>
            <div id="bs" class="u-badge" onclick="switchU('S')">üë©üèæ‚Äçü¶± SOPHIA</div>
        </div>
    </header>
    <div id="dateDisplay" class="status-bar">...</div>
    <div class="controls">
        <button class="nav-btn" onclick="changeW(-1)">PREV</button>
        <button class="nav-btn" onclick="resetD()">TODAY</button>
        <button class="nav-btn" onclick="changeW(1)">NEXT</button>
        <button class="nav-btn" onclick="openBio()" style="color:var(--green)">MY DATA</button>
    </div>
    <div id="dayTabs" class="tabs"></div>
    <div id="dayContent"></div>
</div>

<div id="masterModal" class="modal">
    <div class="close-btn-float" onclick="closeM()">&times;</div>
    <div class="modal-content">
        <h2 id="mTitle" style="font-size:1.5rem; margin-top:10px;"></h2>
        <div id="mSub" style="color:var(--gold);font-size:0.85rem;margin:10px 0; text-transform:uppercase; letter-spacing:1px; font-weight:700;"></div>
        <div id="mBody" class="chef-steps" style="counter-reset:step"></div>
        <div id="mTip" class="chef-tip" style="margin-top:30px; padding:15px; border:1px solid #222; background:#111; border-radius:10px; color:#888; font-style:italic;"></div>
        <br><br><br>
    </div>
</div>

<script>
// --- GLOBAL STATE ---
let user='J', offset=0, selDate=new Date();
let snackLog = {}; 
let currentSlot = 0;

// --- CENTURION DATABASE ---
const mDB = {
    b: [
        "Turmeric Scramble|Eggs,Spinach,Garlic,Olive Oil,Turmeric,Black Pepper|scramble|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 5m<hr><strong>INGREDIENTS</strong><br>3 Eggs ‚Ä¢ 3 Cups Spinach ‚Ä¢ 2 Cloves Garlic ‚Ä¢ 1 tsp Turmeric ‚Ä¢ Olive Oil<br><br><strong>1. PREP & CUT (The Green)</strong><br>Wash the fresh spinach leaves and pat them dry. Rough chop the leaves. Slice two cloves of garlic thinly. Whisk three eggs in a bowl with one teaspoon of turmeric and a pinch of black pepper.<br><br><strong>2. THE COOK</strong><br>Heat the olive oil on medium-low. Saut√© the spinach and garlic for 60 seconds until fragrant. Pour the eggs over the greens. Push gently with a spatula. Remove from heat while still wet.<br><br><strong>Chef Tip:</strong> Black pepper increases turmeric absorption by 2000%.|22|2|240",
        "Za'atar Avocado|Eggs,Avocado,Radish,Sprouted Bread,Lemon,Za'atar|raw|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 4m<hr><strong>INGREDIENTS</strong><br>2 Eggs ‚Ä¢ 1/2 Avocado ‚Ä¢ 4 Radishes ‚Ä¢ 1 Slice Sprouted Bread ‚Ä¢ 1 tbsp Za'atar<br><br><strong>1. PREP & CUT (The Green)</strong><br>Mash half an avocado with lemon juice. Slice red radishes paper-thin using a sharp knife.<br><br><strong>2. THE COOK</strong><br>Toast the sprouted grain bread until firm. Pan-cook two eggs sunny-side up in Ghee. Spread the avocado on the toast. Top with eggs and radish slices. Dust heavily with Za'atar.<br><br><strong>Chef Tip:</strong> Za'atar contains Sumac and Sesame which provide calcium.|24|18|380",
        "Bison & Rainbow|Ground Bison,Red Pepper,Orange Pepper,Onion,Garlic|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>6oz Ground Bison ‚Ä¢ 1 Red Pepper ‚Ä¢ 1 Orange Pepper ‚Ä¢ 1/2 Onion ‚Ä¢ Garlic<br><br><strong>1. PREP & CUT (The Rainbow)</strong><br>Dice the red and orange bell peppers and the yellow onion into uniform cubes. Mince two cloves of garlic.<br><br><strong>2. THE COOK</strong><br>Sear the bison in a cast iron skillet on high heat. Remove and rest. Lower heat. Saut√© the peppers, onions, and garlic in the bison fat for three minutes.<br><br><strong>Chef Tip:</strong> Vitamin C in peppers enhances iron absorption from the bison.|45|8|480",
        "Ginger Poach|Bone Broth,Eggs,Bok Choy,Ginger,Garlic|poach|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>2 Cups Bone Broth ‚Ä¢ 3 Eggs ‚Ä¢ 2 Heads Baby Bok Choy ‚Ä¢ Ginger ‚Ä¢ Garlic<br><br><strong>1. PREP & CUT (The Aromatics)</strong><br>Slice fresh ginger into thick coins and smash them. Cut the baby bok choy in half. Smash a clove of garlic.<br><br><strong>2. THE COOK</strong><br>Simmer the bone broth with the ginger and garlic for five minutes. Add the bok choy and poach for two minutes. Crack eggs gently into the broth and cook for four minutes.<br><br><strong>Chef Tip:</strong> Gingerol improves gastric motility and digestion.|20|4|220",
        "Turkey Sage Pan|Turkey,Fennel,Green Apple,Sage,Garlic|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>6oz Ground Turkey ‚Ä¢ 1 Fennel Bulb ‚Ä¢ 1/2 Green Apple ‚Ä¢ Sage ‚Ä¢ Garlic<br><br><strong>1. PREP & CUT (The Crunch)</strong><br>Slice the apple into wedges. Shave the fennel bulb thinly. Mix the turkey with chopped fresh sage and minced garlic.<br><br><strong>2. THE COOK</strong><br>Form the turkey into patties. Sear for four minutes per side. Serve the hot patties alongside the cold apple and fennel salad.<br><br><strong>Chef Tip:</strong> Fennel seeds reduce bloating after meals.|35|12|360",
        "Salmon Omelet|Salmon,Asparagus,Garlic,Dill,Eggs|flat|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 6m<hr><strong>INGREDIENTS</strong><br>3oz Smoked Salmon ‚Ä¢ 8 Asparagus Stalks ‚Ä¢ 3 Eggs ‚Ä¢ Dill ‚Ä¢ Garlic<br><br><strong>1. PREP & CUT (The Green)</strong><br>Snap woody ends off asparagus. Mince the garlic. Chop the fresh dill.<br><br><strong>2. THE COOK</strong><br>Saut√© the asparagus with garlic for two minutes. Whisk the eggs with dill. Pour into the pan to make a flat sheet. Fill with salmon and asparagus. Fold.<br><br><strong>Chef Tip:</strong> Astaxanthin in salmon protects skin from UV damage.|38|2|410",
        "Purple Toast|Sardines,Purple Cabbage,Avocado,Sourdough,Lime,Garlic|raw|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>1 Tin Sardines ‚Ä¢ 2 Cups Purple Cabbage ‚Ä¢ 1/2 Avocado ‚Ä¢ 1 Slice Bread<br><br><strong>1. PREP & CUT (The Purple)