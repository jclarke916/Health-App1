<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Centurion | v226.50 Pro Upgrade</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#050505;--card:#141414;--gold:#D4AF37;--green:#00E676;--blue:#00B0FF;--purple:#D500F9;--text:#fff;--g-pro:linear-gradient(90deg,#FF5252,#D50000);--g-carb:linear-gradient(90deg,#FFAB40,#FF6D00);--g-cal:linear-gradient(90deg,#B388FF,#6200EA)}
        *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);margin:0;padding:15px;font-size:14px}
        .container{max-width:500px;margin:0 auto; padding-bottom: 50px;}
        h1{text-align:center;font-weight:200;letter-spacing:5px;text-transform:uppercase;font-size:1.2rem;margin:10px 0}
        .version-tag { display: block; text-align: center; font-size: 0.5rem; color: #444; margin-top: -8px; margin-bottom: 15px; letter-spacing: 2px; }
        .badge-row{display:flex;justify-content:center;gap:8px;margin-bottom:15px}
        .u-badge{background:#000;padding:8px 16px;border-radius:20px;border:1px solid #333;font-size:0.6rem;font-weight:800;cursor:pointer;color:#666}
        .u-badge.active{border-color:var(--gold);color:var(--gold)}
        .status-bar{text-align:center;color:#888;font-size:0.65rem;font-weight:800;margin-bottom:10px;text-transform:uppercase}
        .controls{display:flex;gap:5px;margin-bottom:15px}
        .nav-btn{background:#111;border:1px solid #222;color:#888;padding:10px;flex:1;border-radius:8px;font-size:0.55rem;font-weight:800;cursor:pointer}
        .card, .macro-dashboard{background:var(--card);border-radius:20px;padding:20px;margin-bottom:15px;border:1px solid rgba(255,255,255,0.03);position:relative}
        .card::before{content:"";position:absolute;left:0;top:20px;bottom:20px;width:3px;background:var(--gold);border-radius:0 4px 4px 0}
        .card.holiday-card::before{background:var(--purple);box-shadow: 0 0 15px rgba(213, 0, 249, 0.4);}
        .label{color:#666;font-size:0.5rem;text-transform:uppercase;font-weight:900;margin-bottom:4px; display: flex; justify-content: space-between;}
        .portion-tag { color: var(--blue); }
        .value{ font-size: 0.95rem; margin-bottom: 12px; font-weight: 500; cursor: pointer; border-bottom: 1px solid #222; padding-bottom: 4px; display: flex; justify-content: space-between; align-items: center; }
        .macro-row{margin-bottom:10px}
        .macro-label{display:flex;justify-content:space-between;font-size:0.55rem;font-weight:800;color:#777;margin-bottom:3px}
        .macro-bg{height:5px;background:#222;border-radius:10px;overflow:hidden}
        .macro-fill{height:100%;border-radius:10px;transition:width 0.8s}
        .tabs{display:flex;gap:4px;margin-bottom:15px}
        .tab{flex:1;padding:10px 0;background:#111;border:1px solid #222;color:#444;border-radius:8px;font-size:0.55rem;font-weight:800;text-align:center;cursor:pointer}
        .tab.active{background:#222;color:#fff;border-color:444}
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#0a0a0a;z-index:2000;overflow-y:auto;padding:0;}
        .modal-content{background:#0a0a0a;margin:0;padding:25px;border:none;border-radius:0;width:100%;min-height:100%;max-width:none;}
        .close-btn-float { position: fixed; top: 20px; right: 20px; width: 40px; height: 40px; background: rgba(30,30,30,0.8); backdrop-filter: blur(5px); border-radius: 50%; border: 1px solid #333; color: #fff; font-size: 24px; text-align: center; line-height: 38px; cursor: pointer; z-index: 2001; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }
        .chef-steps ol{padding-left:20px; color:#ccc; margin:10px 0; font-size:0.9rem; line-height:1.6;}
        .chef-steps li{margin-bottom:12px;}
        .chef-steps strong{color:var(--gold); display:block; margin-top:20px; font-size:0.8rem; border-top:1px dashed #333; padding-top:15px;}
        .juice-name{font-size:1.1rem;font-weight:900;color:#fff;text-align:center;text-transform:uppercase;cursor:pointer;border:1px dashed #333;padding:10px;border-radius:12px}
        .bio-section{margin-bottom:25px;padding:15px;background:rgba(255,255,255,0.03);border-radius:15px;border:1px solid rgba(255,255,255,0.05)}
        .bio-title{display:flex;justify-content:space-between;font-size:0.75rem;font-weight:800;color:#fff;margin-bottom:12px;text-transform:uppercase}
        .bar-group{display:flex;flex-direction:column;gap:8px}
        .bar-row{display:flex;align-items:center}
        .bar-lbl{width:45px;font-size:0.55rem;color:#666;font-weight:900;text-transform:uppercase}
        .bar-track{flex:1;height:8px;background:#111;border-radius:10px;margin:0 10px;border:1px solid #222;overflow:hidden}
        .bar-fill{height:100%;border-radius:10px;transition:width 1s cubic-bezier(0.4,0,0.2,1)}
        .bar-fill.past{background:#333}
        .bar-fill.now{background:var(--gold);box-shadow:0 0 10px rgba(212,175,55,0.3)}
        .bar-fill.goal{background:var(--green);box-shadow:0 0 12px rgba(0,230,118,0.4)}
        .rec-phase-list { position: relative; padding-left: 25px; margin-top: 20px; }
        .rec-phase-list::before { content: ''; position: absolute; left: 8px; top: 0; bottom: 0; width: 2px; background: linear-gradient(to bottom, var(--blue), var(--purple)); }
        .phase-item { position: relative; margin-bottom: 25px; }
        .phase-item::after { content: ''; position: absolute; left: -22px; top: 5px; width: 10px; height: 10px; background: var(--bg); border: 2px solid var(--blue); border-radius: 50%; }
        .phase-time { font-size: 0.6rem; font-weight: 900; color: var(--blue); text-transform: uppercase; letter-spacing: 1px; }
        .phase-title { display: block; font-size: 0.9rem; font-weight: 700; color: #fff; margin: 2px 0; }
        .phase-detail { font-size: 0.75rem; color: #999; line-height: 1.4; display: block; }
        .macro-pill { background: #1a1a1a; border: 1px solid #333; padding: 3px 8px; border-radius: 12px; font-size: 0.55rem; color: #888; font-weight: 800; letter-spacing: 0.5px; text-transform: uppercase; white-space: nowrap; }
        .grocery-cat { font-size: 0.85rem; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; margin-top: 30px; margin-bottom: 15px; font-weight: 900; border-bottom: 1px dashed #333; padding-bottom: 8px; }
        .grocery-item { padding: 12px 0; color: #ccc; font-size: 0.95rem; display:flex; align-items:center; border-bottom:1px solid #1a1a1a; }
        .grocery-item span { margin-left: 12px; }
        .snack-grid { display: flex; gap: 10px; margin-bottom: 15px; }
        .snack-slot { flex: 1; border: 1px dashed #333; border-radius: 12px; padding: 12px 5px; text-align: center; cursor: pointer; position: relative; min-height: 60px; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(255,255,255,0.02); }
        .snack-slot.filled { border: 1px solid var(--gold); background: #111; }
        .snack-label { font-size: 0.65rem; color: #fff; font-weight: 700; line-height: 1.2; }
        .snack-macro { font-size: 0.5rem; color: #666; margin-top: 4px; }
        .remove-snack { position: absolute; top: -5px; right: -5px; background: #333; color: #aaa; border: 1px solid #222; border-radius: 50%; width: 16px; height: 16px; font-size: 9px; line-height: 14px; text-align: center; font-weight: 800; box-shadow: 0 1px 3px rgba(0,0,0,0.5); z-index: 10; transition: all 0.2s ease; }
        .remove-snack:hover { background: #444; color: #fff; border-color:#333; }
        .meal-img { display: block; width: 100%; max-width: 100%; height: auto; min-height: 220px; object-fit: cover; border-radius: 14px; background-color: #111; transition: opacity 0.5s ease, filter 0.5s ease; }
        .img-loader { height: 220px; display: flex; align-items: center; justify-content: center; color: var(--gold); font-size: 0.8rem; font-weight: 700; letter-spacing: 1px; text-transform: uppercase; background: rgba(255,255,255,0.02); border-radius: 14px; border: 1px dashed #333; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .hist-table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.7rem; color: #ccc; }
        .hist-table th { text-align: left; color: #666; border-bottom: 1px solid #333; padding: 5px; font-weight: 800; }
        .hist-table td { border-bottom: 1px solid #222; padding: 8px 5px; }
        .hist-row:last-child td { border-bottom: none; }
        .holiday-banner { background: linear-gradient(90deg, #D4AF37, #FDD835, #D4AF37); background-size: 200% 200%; animation: shine 3s infinite; color: #000; text-align: center; font-weight: 900; font-size: 0.75rem; padding: 10px; border-radius: 12px; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px; box-shadow: 0 0 15px rgba(212, 175, 55, 0.3); }
        @keyframes shine { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
    </style>
</head>
<body>
<div class="container">
    <header><h1>THE CENTURION</h1>
        <span class="version-tag">v226.50 Pro Upgrade (Smart Grocery + Bio)</span>
        <div class="badge-row">
            <div id="bj" class="u-badge active" onclick="switchU('J')">üßîüèæ‚Äç‚ôÇÔ∏è JERMAINE</div>
            <div id="bs" class="u-badge" onclick="switchU('S')">üë©üèæ‚Äçü¶± SOPHIA</div>
        </div>
    </header>
    <div id="dateDisplay" class="status-bar">...</div>
    <div class="controls">
        <button class="nav-btn" onclick="changeW(-1)">PREV</button>
        <button class="nav-btn" onclick="resetD()">TODAY</button>
        <button class="nav-btn" onclick="changeW(1)">NEXT</button>
        <button class="nav-btn" onclick="openBio()" style="color:var(--green)">MY DATA</button>
    </div>
    <div id="dayTabs" class="tabs"></div>
    <div id="dayContent"></div>
</div>

<div id="masterModal" class="modal">
    <div class="close-btn-float" onclick="closeM()">&times;</div>
    <div class="modal-content">
        <h2 id="mTitle" style="font-size:1.5rem; margin-top:10px;"></h2>
        <div id="mSub" style="color:var(--gold);font-size:0.85rem;margin:10px 0; text-transform:uppercase; letter-spacing:1px; font-weight:700;"></div>
        <div id="mImgContainer"></div>
        <div id="mBody" class="chef-steps" style="counter-reset:step"></div>
        <div id="mTip" class="chef-tip" style="margin-top:30px; padding:15px; border:1px solid #222; background:#111; border-radius:10px; color:#888; font-style:italic;"></div>
        <br><br><br>
    </div>
</div>
<script>
// --- GLOBAL STATE ---
let user='J', offset=0;
let snackLog = {}; 
let currentSlot = 0;

function getCaDate() {
    let d = new Date(new Date().toLocaleString("en-US", {timeZone: "America/Los_Angeles"}));
    d.setHours(12, 0, 0, 0); 
    return d;
}

function getDateKey(d) {
    const year = d.getFullYear();
    const month = String(d.getMonth() + 1).padStart(2, '0');
    const day = String(d.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
}

let selDate = getCaDate();

// --- CENTURION DATABASE (FULL) ---
const mDB = {
    b: [
        "Turmeric Scramble|Eggs,Spinach,Avocado,Raspberries,Turmeric|scramble|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 5m<hr><strong>INGREDIENTS</strong><br>3 Eggs ‚Ä¢ 3 Cups Spinach ‚Ä¢ 1/2 Avocado ‚Ä¢ 1 Cup Raspberries ‚Ä¢ 1 tsp Turmeric<br><br><strong>1. PREP & CUT</strong><br>Wash spinach and raspberries. Slice avocado. Whisk eggs with turmeric and black pepper.<br><br><strong>2. THE COOK</strong><br>Saut√© spinach until wilted. Pour in eggs and scramble soft. Serve with cold avocado and berries.<br><br><strong>Longevity Win:</strong> 13g Fiber. Raspberries have the highest fiber-to-sugar ratio of any fruit.<br><strong>Chef Tip:</strong> Add a splash of water to eggs for fluffier curds.|22|16|380",
        "Za'atar Avocado|Eggs,Avocado,Radish,Sprouted Bread,Za'atar|raw|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 4m<hr><strong>INGREDIENTS</strong><br>2 Eggs ‚Ä¢ 1/2 Avocado ‚Ä¢ 4 Radishes ‚Ä¢ 2 Slices Sprouted Bread ‚Ä¢ 1 tbsp Za'atar<br><br><strong>1. PREP & CUT</strong><br>Mash half an avocado with lemon. Slice radishes paper thin.<br><br><strong>2. THE COOK</strong><br>Toast the sprouted bread. Fry eggs sunny-side up. Assemble: Toast > Avocado > Egg > Radish > Za'atar.<br><br><strong>Longevity Win:</strong> Sprouted grains contain enzymes that aid digestion and lower the insulin spike.<br><strong>Chef Tip:</strong> Za'atar contains Sumac, which adds a tart, citrusy kick.|26|28|450",
        "Bison & Bean Bowl|Ground Bison,Black Beans,Red Pepper,Onion,Garlic|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>6oz Ground Bison ‚Ä¢ 1/2 Cup Black Beans ‚Ä¢ 1 Red Pepper ‚Ä¢ 1/2 Onion<br><br><strong>1. PREP & CUT</strong><br>Rinse the canned black beans thoroughly. Dice the red pepper and onion.<br><br><strong>2. THE COOK</strong><br>Sear bison in a skillet. Add peppers and onions. Toss in black beans last to warm through.<br><br><strong>Longevity Win:</strong> Black beans bind to bile, forcing your liver to use up LDL cholesterol.<br><strong>Chef Tip:</strong> Add a splash of bone broth if the mixture gets too dry.|45|22|520",
        "Ginger Poach|Bone Broth,Eggs,Bok Choy,Edamame,Ginger|poach|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>2 Cups Bone Broth ‚Ä¢ 3 Eggs ‚Ä¢ 1 Cup Bok Choy ‚Ä¢ 1/2 Cup Edamame (Shelled)<br><br><strong>1. PREP & CUT</strong><br>Slice ginger into coins. Wash bok choy.<br><br><strong>2. THE COOK</strong><br>Simmer broth with ginger. Add bok choy and edamame. Gently poach eggs in the liquid for 4 mins.<br><br><strong>Longevity Win:</strong> Edamame adds 8g of fiber and is a complete plant protein.<br><strong>Chef Tip:</strong> Crack eggs into a small bowl first, then slide into broth.|28|12|310",
        "Turkey Sage Plate|Turkey,Fennel,Green Apple,Raspberries,Sage|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>6oz Turkey ‚Ä¢ 1/2 Fennel Bulb ‚Ä¢ 1/2 Apple ‚Ä¢ 1 Cup Raspberries ‚Ä¢ Fresh Sage<br><br><strong>1. PREP & CUT</strong><br>Shave fennel and apple thinly. Mix minced sage into turkey meat.<br><br><strong>2. THE COOK</strong><br>Form turkey patties and sear. Serve alongside the raw, crunchy fennel, apple, and raspberry salad.<br><br><strong>Longevity Win:</strong> Pectin in apples and berries feeds the mucosal lining of the gut.<br><strong>Chef Tip:</strong> Keep the fennel in ice water until serving to keep it crisp.|35|22|390",
        "Salmon Omelet|Salmon,Asparagus,Artichoke Hearts,Eggs,Dill|flat|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 6m<hr><strong>INGREDIENTS</strong><br>3oz Smoked Salmon ‚Ä¢ 1/2 Cup Artichoke Hearts ‚Ä¢ 3 Eggs ‚Ä¢ Fresh Dill<br><br><strong>1. PREP & CUT</strong><br>Chop the artichoke hearts (canned/water). Snap woody ends off asparagus.<br><br><strong>2. THE COOK</strong><br>Saut√© asparagus. Whisk eggs and pour over veg. Fold in salmon and artichokes right before closing.<br><br><strong>Longevity Win:</strong> Artichokes are the 'Fiber King' (7g per serving). Essential for gut motility.<br><strong>Chef Tip:</strong> Do not cook the smoked salmon; the residual heat is enough.|38|14|430",
        "Purple Toast|Sardines,Purple Cabbage,Avocado,Sprouted Bread|raw|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>1 Tin Sardines ‚Ä¢ 1 Cup Purple Cabbage ‚Ä¢ 1/2 Avocado ‚Ä¢ 2 Slices Sprouted Bread<br><br><strong>1. PREP & CUT</strong><br>Shred cabbage thinly. Massage with lime and salt. Mash avocado.<br><br><strong>2. THE COOK</strong><br>Toast the bread. Layer avocado, then the crunchy cabbage slaw, then the sardines.<br><br><strong>Longevity Win:</strong> Anthocyanins in purple cabbage protect cognitive function.<br><strong>Chef Tip:</strong> Buy sardines packed in olive oil, not water, for better texture.|28|30|480",
        "Steak & Berries|Leftover Steak,Blackberries,Walnuts,Sea Salt|raw|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>6oz Leftover Steak ‚Ä¢ 1 Cup Blackberries ‚Ä¢ 10 Walnuts<br><br><strong>1. PREP & CUT</strong><br>Slice cold steak thinly against the grain. Wash berries.<br><br><strong>2. THE COOK</strong><br>No cook. Assemble the plate. The fiber comes from the massive cup of berries.<br><br><strong>Longevity Win:</strong> Blackberries rival raspberries for fiber content (8g/cup).<br><strong>Chef Tip:</strong> Let steak come to room temp for better flavor.|40|14|420",
        "Mushroom Frittata|Egg Whites,Mushrooms,Black Beans,Kale,Garlic|bake|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>1 Cup Egg Whites ‚Ä¢ 1/2 Cup Black Beans ‚Ä¢ 1 Cup Mushrooms ‚Ä¢ 1 Cup Kale<br><br><strong>1. PREP & CUT</strong><br>Slice mushrooms. Rinse beans. Tear kale.<br><br><strong>2. THE COOK</strong><br>Saut√© veg in an oven-safe pan. Pour whites over top. Broil for 5 mins until puffed.<br><br><strong>Longevity Win:</strong> Beans add bulk and resistant starch to the lean egg whites.<br><strong>Chef Tip:</strong> Don't add salt until the end to keep mushrooms from getting watery.|25|18|280",
        "Zucchini Bean Hash|Zucchini,White Beans,Eggs,Garlic,Ghee|crisp|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>2 Zucchinis ‚Ä¢ 1/2 Cup Cannellini Beans ‚Ä¢ 3 Eggs ‚Ä¢ Garlic<br><br><strong>1. PREP & CUT</strong><br>Grate zucchini and squeeze out water. Rinse beans.<br><br><strong>2. THE COOK</strong><br>Crisp the zucchini in Ghee. Toss in beans. Crack eggs on top and cover to steam.<br><br><strong>Longevity Win:</strong> White beans + Zucchini volume = High satiety, low calorie.<br><strong>Chef Tip:</strong> The drier the zucchini, the crispier the hash.|24|20|310",
        "Goat Cheese & Pear|Eggs,Goat Cheese,Pear,Walnuts,Chives|scramble|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 5m<hr><strong>INGREDIENTS</strong><br>3 Eggs ‚Ä¢ 1oz Goat Cheese ‚Ä¢ 1 Pear ‚Ä¢ 10 Walnuts<br><br><strong>1. PREP & CUT</strong><br>Slice the pear (keep skin on). Chop walnuts.<br><br><strong>2. THE COOK</strong><br>Soft scramble the eggs. Fold in goat cheese off heat. Serve with the pear/walnut side.<br><br><strong>Longevity Win:</strong> Pear skin is dense insoluble fiber. Do not peel.<br><strong>Chef Tip:</strong> Goat cheese (A2 dairy) is easier to digest than cow dairy.|22|24|360",
        "Cod & Lentil Scramble|Cod,Lentils,Parsley,Eggs,Lemon|scramble|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>4oz Cod ‚Ä¢ 1/2 Cup Lentils ‚Ä¢ 3 Eggs ‚Ä¢ Parsley<br><br><strong>1. PREP & CUT</strong><br>Use precooked lentils. Chop parsley.<br><br><strong>2. THE COOK</strong><br>Saut√© cod until it flakes. Add lentils. Pour beaten eggs over mixture and scramble.<br><br><strong>Longevity Win:</strong> Lentils at breakfast blunt the glucose response for the whole day.<br><strong>Chef Tip:</strong> Finish with fresh lemon juice to cut the richness.|38|18|390",
        "Bison Sweet Potato|Bison,Sweet Potato,Kale,Garlic|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 12m<hr><strong>INGREDIENTS</strong><br>6oz Bison ‚Ä¢ 1/2 Sweet Potato ‚Ä¢ 2 Cups Kale<br><br><strong>1. PREP & CUT</strong><br>Dice sweet potato (keep skin on). Chop kale.<br><br><strong>2. THE COOK</strong><br>Saut√© potato until soft. Add bison and brown. Finish with kale to wilt.<br><br><strong>Longevity Win:</strong> Potato skin contains the fiber; the flesh contains the energy.<br><strong>Chef Tip:</strong> Cover the pan to steam the potatoes faster.|40|28|510",
        "Duck Egg & Beets|Duck Eggs,Roasted Beets,Raspberries,Greens|steam|<strong>Prep:</strong> 8m ‚Ä¢ <strong>Cook:</strong> 6m<hr><strong>INGREDIENTS</strong><br>2 Duck Eggs ‚Ä¢ 1 Cup Beets ‚Ä¢ 1 Cup Raspberries<br><br><strong>1. PREP & CUT</strong><br>Use precooked beets. Wash berries.<br><br><strong>2. THE COOK</strong><br>Fry duck eggs in ghee. Serve with warm beets and cold raspberries.<br><br><strong>Longevity Win:</strong> Double 'Red' fiber sources (Beets/Berries) support nitric oxide.<br><strong>Chef Tip:</strong> Duck yolks are larger and creamier; cook slowly.|24|22|340",
        "Oatmeal Protein|Oats,Whey Isolate,Raspberries,Cinnamon|boil|<strong>Prep:</strong> 2m ‚Ä¢ <strong>Cook:</strong> 5m<hr><strong>INGREDIENTS</strong><br>1/2 Cup Oats ‚Ä¢ 1 Scoop Whey ‚Ä¢ 1 Cup Raspberries ‚Ä¢ Cinnamon<br><br><strong>1. PREP & CUT</strong><br>Wash berries.<br><br><strong>2. THE COOK</strong><br>Cook oats in water. Let cool slightly (1 min) before stirring in Whey (so it doesn't clump). Top with berries.<br><br><strong>Longevity Win:</strong> Beta-glucan in oats is a specific fiber that lowers LDL cholesterol.<br><strong>Chef Tip:</strong> Add a pinch of salt to oats to pop the flavor.|35|35|410"
    ],
    l: [
        "Lentil Beef Salad|Sirloin,Lentils,Cucumber,Red Pepper,Mint|sear|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 6m<hr><strong>INGREDIENTS</strong><br>6oz Sirloin ‚Ä¢ 1/2 Cup Lentils ‚Ä¢ 1 Cucumber ‚Ä¢ 1 Red Pepper<br><br><strong>1. PREP & CUT</strong><br>Rinse precooked lentils. Julienne peppers and cucumber.<br><br><strong>2. THE ASSEMBLY</strong><br>Sear steak, rest, and slice. Toss beef with the lentil/veg mix and vinegar.<br><br><strong>Longevity Win:</strong> Replacing lettuce with lentils triples the fiber content.<br><strong>Chef Tip:</strong> Dress the lentils while warm to absorb flavor.|45|24|510",
        "Chicken Bean Bowl|Chicken Breast,Cannellini Beans,Parsley,Garlic,Olive Oil|poach|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 15m<hr><strong>INGREDIENTS</strong><br>6oz Chicken ‚Ä¢ 1/2 Cup Cannellini Beans ‚Ä¢ 1 Bunch Parsley<br><br><strong>1. PREP & CUT</strong><br>Rinse beans. Finely chop parsley and garlic.<br><br><strong>2. THE ASSEMBLY</strong><br>Poach and shred chicken. Toss with beans and the parsley/garlic/oil mixture.<br><br><strong>Longevity Win:</strong> White beans are high in resistant starch when eaten cold.<br><strong>Chef Tip:</strong> This tastes better the next day (marinated).|40|22|460",
        "Sardine Chickpea|Sardines,Chickpeas,Fennel,Radish,Lemon|raw|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>1 Tin Sardines ‚Ä¢ 1/2 Cup Chickpeas ‚Ä¢ 1 Fennel Bulb<br><br><strong>1. PREP & CUT</strong><br>Shave fennel and radish. Rinse chickpeas.<br><br><strong>2. THE ASSEMBLY</strong><br>Toss chickpeas and fennel in lemon juice. Top with oil-packed sardines.<br><br><strong>Longevity Win:</strong> Chickpea soluble fiber forms a gel that traps cholesterol.<br><strong>Chef Tip:</strong> Crush the sardines into the dressing to make it creamy.|30|24|410",
        "Cold Flank Brussels|Flank Steak,Brussels Sprouts,Walnuts,Dijon|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>6oz Flank ‚Ä¢ 2 Cups Brussels Sprouts ‚Ä¢ 12 Walnuts<br><br><strong>1. PREP & CUT</strong><br>Shave raw Brussels sprouts using a knife or mandoline (shredded texture).<br><br><strong>2. THE ASSEMBLY</strong><br>Massage sprouts with olive oil/Dijon. Top with cold sliced steak and walnuts.<br><br><strong>Longevity Win:</strong> Raw Brussels sprouts provide massive roughage for gut cleaning.<br><strong>Chef Tip:</strong> Let the sprouts sit in dressing for 10 mins to soften.|42|14|480",
        "Bison Kofta Plate|Bison,Hummus,Cucumber,Sprouted Bread|bake|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 15m<hr><strong>INGREDIENTS</strong><br>6oz Bison ‚Ä¢ 1/4 Cup Hummus ‚Ä¢ 1 Cucumber ‚Ä¢ 1 Slice Sprouted Bread<br><br><strong>1. PREP & CUT</strong><br>Mix bison with cumin/garlic. Slice cucumber.<br><br><strong>2. THE ASSEMBLY</strong><br>Bake meatballs. Serve with hummus dip (chickpea base) and toast.<br><br><strong>Longevity Win:</strong> Combining chickpeas (hummus) and sprouted grains creates a complete protein.<br><strong>Chef Tip:</strong> Broil meatballs for the last minute for char.|40|26|490",
        "Sumac Chicken Peas|Chicken,Chickpeas,Red Onion,Sumac,Parsley|poach|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 15m<hr><strong>INGREDIENTS</strong><br>6oz Chicken ‚Ä¢ 1/2 Cup Chickpeas ‚Ä¢ 1/2 Red Onion ‚Ä¢ Sumac<br><br><strong>1. PREP & CUT</strong><br>Dice onion. Rinse chickpeas. Poach chicken.<br><br><strong>2. THE ASSEMBLY</strong><br>Toss chicken, chickpeas, and raw onion with generous Sumac and olive oil.<br><br><strong>Longevity Win:</strong> High fiber load lowers the glycemic impact of the meal.<br><strong>Chef Tip:</strong> Soaking red onions in ice water removes the harsh 'bite'.|38|22|440",
        "Salmon Bean Boats|Salmon,White Beans,Cucumber,Greek Yogurt,Dill|raw|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>1 Can Salmon ‚Ä¢ 1/2 Cup White Beans ‚Ä¢ 2 Cucumbers<br><br><strong>1. PREP & CUT</strong><br>Halve cucumbers and scoop seeds. Mash beans slightly.<br><br><strong>2. THE ASSEMBLY</strong><br>Mix salmon, beans, yogurt, and dill. Stuff tightly into cucumber boats.<br><br><strong>Longevity Win:</strong> Beans add bulk and fiber to a standard tuna/salmon salad.<br><strong>Chef Tip:</strong> Salt the cucumber boats 5 mins prior to draw out water.|38|24|450",
        "Bison Jerky & Rasp|Bison Jerky,Raspberries,Walnuts,Olives|raw|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>2oz Bison Jerky ‚Ä¢ 1 Cup Raspberries ‚Ä¢ 10 Walnuts<br><br><strong>1. PREP & CUT</strong><br>Wash berries. Rinse olives.<br><br><strong>2. THE ASSEMBLY</strong><br>Plated snack style. Alternate bites of dry protein and hydrating fruit.<br><br><strong>Longevity Win:</strong> Raspberries (8g fiber) turn a snack into a longevity meal.<br><strong>Chef Tip:</strong> Choose sugar-free jerky to avoid insulin spikes.|30|14|360",
        "Arugula Lentil Jar|Steak,Lentils,Beets,Arugula,Balsamic|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>6oz Steak ‚Ä¢ 1/2 Cup Lentils ‚Ä¢ 1 Beet ‚Ä¢ Arugula<br><br><strong>1. PREP & CUT</strong><br>Dice roasted beets. Sear steak.<br><br><strong>2. THE ASSEMBLY</strong><br>Layer in jar: Dressing > Lentils > Beets > Steak > Arugula.<br><br><strong>Longevity Win:</strong> Nitrates in beets + Fiber in lentils = Heart Health.<br><strong>Chef Tip:</strong> Shake the jar vigorously right before eating.|42|26|480",
        "Lemon Broccoli Chick|Chicken,Broccoli,Chickpeas,Lemon,Garlic|poach|<strong>Prep:</strong> 20m ‚Ä¢ <strong>Cook:</strong> 15m<hr><strong>INGREDIENTS</strong><br>6oz Chicken ‚Ä¢ 1 Cup Broccoli ‚Ä¢ 1/2 Cup Chickpeas<br><br><strong>1. PREP & CUT</strong><br>Cut broccoli very small. Rinse chickpeas.<br><br><strong>2. THE ASSEMBLY</strong><br>Marinate raw broccoli in lemon/oil to 'cook' it. Toss with warm chicken and chickpeas.<br><br><strong>Longevity Win:</strong> Raw broccoli preserves the enzyme myrosinase (cancer fighter).<br><strong>Chef Tip:</strong> Let broccoli sit in lemon juice for at least 20 mins.|38|22|420",
        "Stuffed Pepp Tuna|Tuna,Black Beans,Parsley,Mini Peppers|raw|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>1 Can Tuna ‚Ä¢ 1/2 Cup Black Beans ‚Ä¢ 6 Mini Peppers<br><br><strong>1. PREP & CUT</strong><br>Halve peppers. Mix tuna and black beans.<br><br><strong>2. THE ASSEMBLY</strong><br>Stuff the pepper halves. The beans provide the texture contrast.<br><br><strong>Longevity Win:</strong> Black beans increase satiety significantly more than tuna alone.<br><strong>Chef Tip:</strong> Sprinkle with chili flakes for a metabolism kick.|38|20|400",
        "Beef Edamame Stir|Roast Beef,Edamame,Broccoli,Sesame Oil|blanch|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 3m<hr><strong>INGREDIENTS</strong><br>6oz Roast Beef ‚Ä¢ 1/2 Cup Edamame ‚Ä¢ 1 Cup Broccoli<br><br><strong>1. PREP & CUT</strong><br>Slice cold roast beef. Blanch broccoli and edamame.<br><br><strong>2. THE ASSEMBLY</strong><br>Toss all with sesame oil, garlic, and soy sauce.<br><br><strong>Longevity Win:</strong> Soy protein and fiber from Edamame aids lipid profiles.<br><strong>Chef Tip:</strong> Shock veg in ice water to keep them bright green.|45|18|460",
        "Avocado Turkey Roll|Turkey Slices,Avocado,Carrot Sticks|raw|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 0m<hr><strong>INGREDIENTS</strong><br>6oz Turkey ‚Ä¢ 1/2 Avocado ‚Ä¢ 2 Large Carrots<br><br><strong>1. PREP & CUT</strong><br>Slice avocado into wedges. Cut carrots into sticks.<br><br><strong>2. THE ASSEMBLY</strong><br>Roll turkey around avocado wedge. Eat carrots on side.<br><br><strong>Longevity Win:</strong> Carrots provide pectin fiber; Avocado provides soluble fiber.<br><strong>Chef Tip:</strong> Season the avocado with salt inside the roll.|35|16|410",
        "Lamb Lentil Salad|Lamb Loin,Lentils,Mint,Pomegranate|sear|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>6oz Lamb ‚Ä¢ 1/2 Cup Lentils ‚Ä¢ Fresh Mint<br><br><strong>1. PREP & CUT</strong><br>Sear lamb to medium rare. Chop mint.<br><br><strong>2. THE ASSEMBLY</strong><br>Serve warm lamb over cold lentil tabbouleh salad.<br><br><strong>Longevity Win:</strong> A staple of the Mediterranean diet for longevity.<br><strong>Chef Tip:</strong> Rest lamb for 5-7 mins before slicing.|42|24|490",
        "Cod & Green Apple|Cod,Green Apple,Celery,Walnuts,Yogurt|poach|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>6oz Cod ‚Ä¢ 1 Green Apple ‚Ä¢ 2 Stalks Celery<br><br><strong>1. PREP & CUT</strong><br>Poach cod and chill. Dice apple (skin on) and celery.<br><br><strong>2. THE ASSEMBLY</strong><br>Waldorf style salad: Mix cod, apple, celery, walnuts, and yogurt dressing.<br><br><strong>Longevity Win:</strong> Apple pectin binds to heavy metals for excretion.<br><strong>Chef Tip:</strong> Squeeze lemon on apple immediately to stop browning.|32|18|380"
    ],
    d: [
        "Sea Steak & Edamame|Red Tuna,Edamame,Daikon,Avocado,Soy|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 2m<hr><strong>INGREDIENTS</strong><br>6oz Tuna ‚Ä¢ 1 Cup Edamame ‚Ä¢ 1 Cup Daikon<br><br><strong>1. PREP & CUT</strong><br>Shell edamame. Shred daikon radish. Coat tuna in sesame seeds.<br><br><strong>2. THE COOK</strong><br>Sear tuna 30s per side. Serve with cold edamame salad.<br><br><strong>Longevity Win:</strong> Edamame (8g fiber) blunts the insulin response of the meal.<br><strong>Chef Tip:</strong> Slice tuna against the grain for tenderness.|42|18|450",
        "Branzino & Artichoke|Whole Branzino,Artichoke Hearts,Fennel,Lemon|bake|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 20m<hr><strong>INGREDIENTS</strong><br>1 Whole Branzino ‚Ä¢ 1 Cup Artichoke Hearts ‚Ä¢ 1 Fennel Bulb<br><br><strong>1. PREP & CUT</strong><br>Use canned artichokes (rinsed). Slice fennel and lemon.<br><br><strong>2. THE COOK</strong><br>Stuff fish with lemon/fennel. Roast at 400¬∞F surrounded by artichokes.<br><br><strong>Longevity Win:</strong> Artichokes have the highest fiber density of any vegetable.<br><strong>Chef Tip:</strong> The fish is done when the eye turns white.|40|16|480",
        "Miso Cod & Beans|Cod,Cannellini Beans,Bok Choy,Miso Paste|bake|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 8m<hr><strong>INGREDIENTS</strong><br>6oz Cod ‚Ä¢ 1/2 Cup Cannellini Beans ‚Ä¢ 3 Bok Choy<br><br><strong>1. PREP & CUT</strong><br>Rinse beans. Halve bok choy. Mix Miso with water.<br><br><strong>2. THE COOK</strong><br>Toss beans and bok choy on sheet pan. Top with Cod. Glaze with Miso. Bake.<br><br><strong>Longevity Win:</strong> Beans stabilize blood sugar during sleep.<br><strong>Chef Tip:</strong> Broil for the last 2 mins to caramelize the miso.|35|24|410",
        "Harissa Shrimp Lentil|Shrimp,Lentils,Cauliflower,Harissa|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 5m<hr><strong>INGREDIENTS</strong><br>6oz Shrimp ‚Ä¢ 1/2 Cup Lentils ‚Ä¢ 1 Cup Cauli-Rice<br><br><strong>1. PREP & CUT</strong><br>Use precooked lentils. Toss shrimp in Harissa paste.<br><br><strong>2. THE COOK</strong><br>Saut√© shrimp. Remove. Saut√© cauliflower and lentils in the spicy oil.<br><br><strong>Longevity Win:</strong> Lentils trap cholesterol; Capsaicin improves metabolism.<br><strong>Chef Tip:</strong> Don't overcook shrimp; they become rubbery instantly.|32|24|390",
        "Ginger Beef Black Bean|Flank Steak,Broccoli,Black Beans,Ginger|sear|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 5m<hr><strong>INGREDIENTS</strong><br>6oz Steak ‚Ä¢ 2 Cups Broccoli ‚Ä¢ 1/2 Cup Black Beans<br><br><strong>1. PREP & CUT</strong><br>Cut broccoli into tiny florets. Rinse beans. Grate ginger.<br><br><strong>2. THE COOK</strong><br>High heat stir fry beef. Add broccoli. Toss in black beans at the very end.<br><br><strong>Longevity Win:</strong> Broccoli + Beans = Massive detoxification support.<br><strong>Chef Tip:</strong> Add a splash of water to steam the broccoli in the pan.|48|26|520",
        "Saffron Halibut Chick|Halibut,Chickpeas,Tomatoes,Saffron Broth|poach|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>6oz Halibut ‚Ä¢ 1/2 Cup Chickpeas ‚Ä¢ 1 Cup Tomatoes<br><br><strong>1. PREP & CUT</strong><br>Rinse chickpeas. Halve cherry tomatoes.<br><br><strong>2. THE COOK</strong><br>Simmer broth with saffron. Add chickpeas/tomatoes. Poach fish in liquid.<br><br><strong>Longevity Win:</strong> Chickpeas add heartiness and soluble fiber to the light fish.<br><strong>Chef Tip:</strong> Toast the saffron threads dry before adding to liquid.|40|22|440",
        "Bison Chili (Fiber Max)|Bison,Black Beans,Kidney Beans,Tomatoes|stew|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 45m<hr><strong>INGREDIENTS</strong><br>6oz Bison ‚Ä¢ 1/2 Cup Black Beans ‚Ä¢ 1/2 Cup Kidney Beans<br><br><strong>1. PREP & CUT</strong><br>Rinse both bean types. Dice onion and peppers.<br><br><strong>2. THE COOK</strong><br>Brown bison. Add all veg and beans. Simmer until thick.<br><br><strong>Longevity Win:</strong> This is your highest fiber meal (15g+). Critical for ApoB.<br><strong>Chef Tip:</strong> Add a square of dark chocolate for depth.|50|35|580",
        "Steak & Brussels|Steak,Brussels Sprouts,Garlic,Ghee|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>6oz Steak ‚Ä¢ 2 Cups Brussels Sprouts ‚Ä¢ Garlic<br><br><strong>1. PREP & CUT</strong><br>Halve brussels sprouts. Mince garlic.<br><br><strong>2. THE COOK</strong><br>Sear steak. In same pan, char sprouts cut-side down until crispy.<br><br><strong>Longevity Win:</strong> Brussels sprouts are superior to spinach for fiber density.<br><strong>Chef Tip:</strong> Don't move the sprouts while searing or they won't char.|45|16|520",
        "Garlic Scallop Bean|Scallops,Spinach,White Beans,Lemon|sear|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 5m<hr><strong>INGREDIENTS</strong><br>6oz Scallops ‚Ä¢ 1/2 Cup White Beans ‚Ä¢ 4 Cups Spinach<br><br><strong>1. PREP & CUT</strong><br>Pat scallops very dry. Rinse beans.<br><br><strong>2. THE COOK</strong><br>Sear scallops golden. Remove. Wilt spinach and warm beans in the pan juices.<br><br><strong>Longevity Win:</strong> Fiber helps eliminate toxins released during fat loss.<br><strong>Chef Tip:</strong> Scallops release water; if crowded, they will boil, not sear.|35|20|380",
        "Herb Cod Lentil|Cod,Lentils,Tomato,Rosemary|bake|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 15m<hr><strong>INGREDIENTS</strong><br>6oz Cod ‚Ä¢ 1/2 Cup Lentils ‚Ä¢ 1 Cup Tomatoes<br><br><strong>1. PREP & CUT</strong><br>Use precooked lentils. Keep tomatoes whole.<br><br><strong>2. THE COOK</strong><br>Make a bed of lentils and tomatoes. Place fish on top. Bake.<br><br><strong>Longevity Win:</strong> Lentils protect the gut lining from inflammation.<br><strong>Chef Tip:</strong> The tomatoes will burst and create a sauce for the lentils.|38|24|420",
        "Lamb Peas Mint|Lamb Chops,Green Peas,Mint,Garlic|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>6oz Lamb ‚Ä¢ 1 Cup Green Peas ‚Ä¢ Fresh Mint<br><br><strong>1. PREP & CUT</strong><br>Thaw peas. Chop mint and garlic.<br><br><strong>2. THE COOK</strong><br>Sear lamb chops. Saut√© peas with garlic. Mash slightly with mint.<br><br><strong>Longevity Win:</strong> Peas have 7g fiber/cup and balance the lamb fat.<br><strong>Chef Tip:</strong> Add a squeeze of lemon to the peas to brighten the green color.|42|24|510",
        "Shrimp Asparagus Bean|Shrimp,Asparagus,Black Beans,Ginger|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 6m<hr><strong>INGREDIENTS</strong><br>6oz Shrimp ‚Ä¢ 1 Bunch Asparagus ‚Ä¢ 1/2 Cup Black Beans<br><br><strong>1. PREP & CUT</strong><br>Cut asparagus into 1-inch pieces. Rinse beans.<br><br><strong>2. THE COOK</strong><br>Stir fry asparagus and ginger. Add shrimp. Finish with black beans.<br><br><strong>Longevity Win:</strong> Prebiotic fiber feeds healthy gut bacteria.<br><strong>Chef Tip:</strong> Add the beans at the very end so they don't turn to mush.|35|18|360",
        "Turkey Burger Slaw|Turkey,Cabbage Slaw,Avocado,Spices|sear|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 10m<hr><strong>INGREDIENTS</strong><br>6oz Turkey ‚Ä¢ 3 Cups Cabbage ‚Ä¢ 1/2 Avocado<br><br><strong>1. PREP & CUT</strong><br>Shred cabbage for slaw. Mix turkey with spices.<br><br><strong>2. THE COOK</strong><br>Sear burger patties. Serve on top of the massive cabbage 'bun' (slaw).<br><br><strong>Longevity Win:</strong> Cabbage (6g fiber) supports liver detoxification pathways.<br><strong>Chef Tip:</strong> Make a divot in the burger patty to keep it flat while cooking.|40|12|440",
        "Venison Carrot|Venison,Roasted Carrots,Lentils,Thyme|sear|<strong>Prep:</strong> 5m ‚Ä¢ <strong>Cook:</strong> 25m<hr><strong>INGREDIENTS</strong><br>6oz Venison ‚Ä¢ 3 Large Carrots ‚Ä¢ 1/4 Cup Lentils<br><br><strong>1. PREP & CUT</strong><br>Keep carrots whole/halved. Rub venison with thyme.<br><br><strong>2. THE COOK</strong><br>Roast carrots. Sear venison. Serve with side of warm lentils.<br><br><strong>Longevity Win:</strong> Cooked carrots release more nutrients; lentils provide fiber.<br><strong>Chef Tip:</strong> Venison is very lean; do not cook past medium-rare.|45|22|490",
        "Duck Kale White Bean|Duck Breast,Kale,Cannellini Beans,Garlic|sear|<strong>Prep:</strong> 10m ‚Ä¢ <strong>Cook:</strong> 15m<hr><strong>INGREDIENTS</strong><br>1 Duck Breast ‚Ä¢ 4 Cups Kale ‚Ä¢ 1/2 Cup White Beans<br><br><strong>1. PREP & CUT</strong><br>Score duck skin. Strip kale leaves.<br><br><strong>2. THE COOK</strong><br>Render duck fat (skin down). Remove. Fry kale and beans in the duck fat.<br><br><strong>Longevity Win:</strong> The beans soak up the fat and provide fiber buffer.<br><strong>Chef Tip:</strong> Start the duck in a cold pan to render fat properly.|40|22|540"
    ],
    s: [
        "Double Scoop Shake|2 Scoops Whey,Water|shake|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>2 Scoops Whey ‚Ä¢ 1 Scoop Acacia Fiber<br><br><strong>THE PROTOCOL</strong><br>Add Acacia fiber (tasteless) to shake. Shake well.<br><br><strong>Longevity Win:</strong> Invisible fiber source that feeds gut bacteria.|50|5|240",
        "Turkey & Pear|Turkey,Pear|raw|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>4oz Turkey ‚Ä¢ 1 Pear (Eat Skin)<br><br><strong>THE PROTOCOL</strong><br>Slice pear. Wrap turkey around slices. Eat skin.<br><br><strong>Longevity Win:</strong> Pear skin is dense insoluble fiber.|25|15|180",
        "Raspberry Bowl|Raspberries,Walnuts|raw|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>1 Cup Raspberries ‚Ä¢ 10 Walnuts<br><br><strong>THE PROTOCOL</strong><br>Wash berries. Eat with nuts for fat absorption.<br><br><strong>Longevity Win:</strong> Highest fiber fruit available (8g).|4|12|160",
        "Avocado Cup|Avocado,Sea Salt|raw|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>1/2 Avocado ‚Ä¢ Sea Salt<br><br><strong>THE PROTOCOL</strong><br>Halve avocado. Sprinkle salt. Eat with spoon.<br><br><strong>Longevity Win:</strong> Pure soluble fiber and monounsaturated fat.|2|8|160",
        "Lentil Cup|Lentils,Lemon,Olive Oil|raw|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>1/2 Cup Lentils ‚Ä¢ Lemon Juice<br><br><strong>THE PROTOCOL</strong><br>Mix cold lentils with lemon/oil/salt.<br><br><strong>Longevity Win:</strong> Quick savory fiber hit (8g).|9|20|115",
        "Blackberry Bowl|Blackberries,Pecans|raw|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>1 Cup Blackberries ‚Ä¢ 10 Pecans<br><br><strong>THE PROTOCOL</strong><br>Wash berries well.<br><br><strong>Longevity Win:</strong> 8g Fiber per cup (rivals raspberries).|3|14|170",
        "Apple Slices|Green Apple,Almonds|raw|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>1 Green Apple ‚Ä¢ 15 Almonds<br><br><strong>THE PROTOCOL</strong><br>Slice apple. Keep skin ON.<br><br><strong>Longevity Win:</strong> Pectin source. Good for heavy metal detox.|4|20|190",
        "Edamame Pods|Edamame,Sea Salt|boil|<strong>Prep:</strong> 5m<hr><strong>INGREDIENTS</strong><br>1 Cup Edamame (In Shell)<br><br><strong>THE PROTOCOL</strong><br>Steam or boil. Salt heavily.<br><br><strong>Longevity Win:</strong> Work for your food; slows down eating speed.|12|10|140",
        "Hummus Veg|Hummus,Carrots|raw|<strong>Prep:</strong> 2m<hr><strong>INGREDIENTS</strong><br>1/2 Cup Hummus ‚Ä¢ 2 Carrots<br><br><strong>THE PROTOCOL</strong><br>Dip carrots in hummus.<br><br><strong>Longevity Win:</strong> Chickpea puree is an easy fiber source.|6|18|200",
        "Oat Shot|Oats,Water,Cinnamon|micro|<strong>Prep:</strong> 3m<hr><strong>INGREDIENTS</strong><br>1/2 Cup Oats ‚Ä¢ Cinnamon<br><br><strong>THE PROTOCOL</strong><br>Microwave oats with water. Top with cinnamon.<br><br><strong>Longevity Win:</strong> Small fiber bomb. No sugar added.|5|25|150"
    ]
};

const pDB={"HEAVY LIFT":[{t:"PRE",h:"Theragun",d:"Glutes, Quads, Hams. 30s each."},{t:"GYM",h:"Heavy Lift",d:"Main compound movement."},{t:"POST",h:"Chair+Sauna",d:"20m Zero-Grav + 20m Sauna."}],"BOXING":[{t:"PRE",h:"Mobility",d:"Rotator cuffs & Calves."},{t:"GYM",h:"Boxing",d:"High intensity rounds."},{t:"POST",h:"Normatec",d:"Flush legs. NO SAUNA."}],"REFORM":[{t:"PRE",h:"Sweep",d:"Light full body percussion."},{t:"GYM",h:"Reform",d:"Time under tension."},{t:"POST",h:"Sauna",d:"20m HGH Boost."}],"REFORM/YOGA":[{t:"PRE",h:"Sweep",d:"Light full body percussion."},{t:"GYM",h:"Yoga",d:"Deep fascial release."},{t:"POST",h:"Heat",d:"Sauna or Thera Knee Heat."}],"CS4":[{t:"PRE",h:"Hydrate",d:"Electrolytes."},{t:"GYM",h:"CS4",d:"Cardio Strength 4."},{t:"POST",h:"Contrast",d:"Sauna + Cold or Knee Contrast."}],"RELAX":[{t:"PRE",h:"Walk",d:"Light movement."},{t:"GYM",h:"Relax",d:"Active recovery."},{t:"POST",h:"Massage",d:"Chair or Thera Knee Heat."}]};
const rDB={"Sea Moss":["92 Minerals","2 TBSP Fasted.","Thyroid & Gut support."],"Kombucha":["Probiotic","4 OZ post-Lunch.","Enzyme support."],"Aqua Chair":["Hydro-Massage","Align body to zero-gravity.","Jets to glutes and lats.","20 Min Duration."],"Sauna":["HSP Induction","185¬∞F Range.","20 Mins total.","Heavy metal detox sweat."],"Theragun":["Percussive","Float over muscles.","2m per limb.","Target Lats/Hips."],"Normatec":["Compression","Level 4 Intensity.","Full leg cycle.","30m Lymphatic flush."],"Pre-Workout":["Nitro-Boost","6g Citrulline Malate.","Take 20m before training."]};
const jDB={"PLASMA FLUSH Juice":["Recovery","3c Watermelon, 1 Lime",1,32,140],"TITAN RED Juice":["Endurance","2 Beets, 2 Carrots, Pom",3,42,185],"ZENITH GREEN Juice":["Alkalizer","4 Kale, 1 Cucumber",4,18,90],"APOLLO GOLD Juice":["Anti-Inflammatory","2 Pears, Turmeric",1,45,195]};
// --- UPGRADED USER DATABASE (LONGEVITY PANEL) ---
// --- UPGRADED LEARNING HUB DATABASE ---
// --- UPGRADED DIAGNOSTIC ENGINE ---
// --- COMBINED MASTER DATABASE (AUTOIMMUNE + LONGEVITY) ---
var uH = {
    'J': {
        now: {bf:19.0, m:99.0, w:217.0, vf:10, bmr:2050},
        goal: {bf:15.0, m:105.0, w:212.0, vf:7},
        info: {
            bf: {d:"Adipose tissue percentage.", f:"Rx: Caloric Deficit + Zone 2."},
            m: {d:"Skeletal muscle tissue.", f:"Rx: Hypertrophy (8-12 reps)."},
            vf: {d:"Visceral Fat (Organ Fat).", f:"Rx: No Fructose."},
            bmr: {d:"Basal Metabolic Rate.", f:"Rx: Build muscle."}
        },
        labs: {
            vo2: {val:45, goal:55, unit:"ml/kg", name:"VO2 Max", lowerIsBetter:false, desc:"Aerobic ceiling.", fix:"Rx: 4x4 Intervals."},
            apob: {val:95, goal:60, unit:"mg/dL", name:"ApoB", lowerIsBetter:true, desc:"Plaque particles.", fix:"Rx: Fiber >40g."},
            hba1c: {val:5.4, goal:5.0, unit:"%", name:"HbA1c", lowerIsBetter:true, desc:"Avg blood sugar.", fix:"Rx: Walk post-meal."},
            crp: {val:0.9, goal:0.5, unit:"mg/L", name:"hs-CRP", lowerIsBetter:true, desc:"Systemic inflammation.", fix:"Rx: Omega-3 (4g). Sauna."},
            test: {val:650, goal:850, unit:"ng/dL", name:"Testosterone", lowerIsBetter:false, desc:"Anabolic drive.", fix:"Rx: Heavy Squats."},
            vitd: {val:42, goal:60, unit:"ng/mL", name:"Vitamin D3", lowerIsBetter:false, desc:"Immune precursor.", fix:"Rx: Morning sun."},
            homo: {val:11, goal:9, unit:"umol/L", name:"Homocysteine", lowerIsBetter:true, desc:"Methylation status.", fix:"Rx: Methylated B-Complex."}
        },
        tests: {
            hang: {val:85, goal:120, unit:"s", name:"Dead Hang", desc:"Grip strength.", fix:"Rx: Farmer Carries."},
            sit: {val:60, goal:120, unit:"s", name:"Wall Sit", desc:"Leg endurance.", fix:"Rx: Weighted Wall Sits."},
            breath: {val:45, goal:60, unit:"s", name:"CO2 Tolerance", desc:"Anxiety regulation.", fix:"Rx: Box Breathing."}
        }
    },
    'S': {
        now: {bf:36.1, m:49.2, w:141.5, vf:9, bmr:1250},
        goal: {bf:28.0, m:55.0, w:138.0, vf:5},
        info: {
            bf: {d:"Adipose tissue releases inflammatory cytokines.", f:"Rx: Anti-inflammatory deficit."},
            m: {d:"Muscle acts as a 'glucose sink'.", f:"Rx: Slow Resistance Training."},
            vf: {d:"Visceral fat drives systemic inflammation.", f:"Rx: Eliminate processed seed oils."},
            bmr: {d:"Base metabolism.", f:"Rx: Protein prioritization."}
        },
        labs: {
            // --- AUTOIMMUNE & THYROID (PRIORITY) ---
            tsh: {val:1.35, goal:1.5, unit:" mIU/L", name:"TSH (Thyroid)", lowerIsBetter:true, desc:"Thyroid Function is OPTIMAL. No Hashimoto's.", fix:"Rx: Maintain with Selenium + Zinc."},
            ana: {val:320, goal:40, unit:" titer", name:"ANA Titer", lowerIsBetter:true, desc:"Autoantibody level (High). Speckled Pattern.", fix:"Rx: Autoimmune Protocol (AIP)."},
            rf: {val:9, goal:14, unit:" IU/mL", name:"Rheum. Factor", lowerIsBetter:true, desc:"Negative. Rules out Rheumatoid Arthritis.", fix:"Rx: Collagen support."},
            
            // --- LONGEVITY METRICS (REQUIRED FOR CALCULATOR) ---
            vo2: {val:32, goal:45, unit:"ml/kg", name:"VO2 Max", lowerIsBetter:false, desc:"Cardio fitness.", fix:"Rx: Zone 2 Cardio 150m/wk."},
            apob: {val:105, goal:70, unit:"mg/dL", name:"ApoB", lowerIsBetter:true, desc:"Vascular particle count.", fix:"Rx: Increase soluble fiber."},
            hba1c: {val:5.6, goal:5.0, unit:"%", name:"HbA1c", lowerIsBetter:true, desc:"Pre-diabetic marker.", fix:"Rx: Veggies before Carbs."},
            
            // --- SUPPORTING ---
            crp: {val:1.8, goal:0.5, unit:" mg/L", name:"hs-CRP", lowerIsBetter:true, desc:"Inflammation level.", fix:"Rx: Curcumin + Cold Plunge."},
            vitd: {val:35, goal:60, unit:" ng/mL", name:"Vitamin D3", lowerIsBetter:false, desc:"Immune regulation.", fix:"Rx: 5000IU D3 w/ fat."},
            ferr: {val:30, goal:70, unit:" ng/mL", name:"Ferritin", lowerIsBetter:false, desc:"Iron storage status.", fix:"Rx: Heme Iron + Vit C."}
        },
        tests: {
            hang: {val:40, goal:60, unit:"s", name:"Dead Hang", desc:"Grip strength.", fix:"Rx: Daily hang practice."},
            sit: {val:45, goal:90, unit:"s", name:"Wall Sit", desc:"Leg endurance.", fix:"Rx: Isometric holds."},
            breath: {val:30, goal:45, unit:"s", name:"CO2 Tolerance", desc:"Stress response.", fix:"Rx: 4-7-8 Breathing."}
        }
    }
};

// --- SAFE CALCULATOR (NO MODERN SYNTAX) ---
function calculateLifeExpectancy(uID) {
    var u = uH[uID];
    if (!u) return { current: 0, potential: 0 };
    
    var l = u.labs;
    var baseAge = 78;

    // Safety Checks: Check if metric exists AND value exists
    if (l.vo2 && l.vo2.val > 50) baseAge += 5; 
    else if (l.vo2 && l.vo2.val > 40) baseAge += 2; 
    else if (l.vo2 && l.vo2.val < 30) baseAge -= 3;

    if (l.apob && l.apob.val < 70) baseAge += 3; 
    else if (l.apob && l.apob.val > 100) baseAge -= 3;

    if (l.hba1c && l.hba1c.val < 5.1) baseAge += 2; 
    else if (l.hba1c && l.hba1c.val > 5.7) baseAge -= 4;

    if (u.now.vf < 6) baseAge += 2; 
    else if (u.now.vf > 10) baseAge -= 3;

    // Autoimmune modifier for Sophia
    if (l.ana && l.ana.val > 80) baseAge -= 2;

    var potential = baseAge + 8;
    return { current: baseAge, potential: potential };
}

const hDB={b:"Festive Brunch|Protein Waffles, Turkey Bacon, Eggs, Berries|griddle|<strong>Prep:</strong> 15m ‚Ä¢ <strong>Cook:</strong> 15m<hr><strong>INGREDIENTS</strong><br>1 Scoop Whey (in batter) ‚Ä¢ 2 Eggs ‚Ä¢ 2 Slices Turkey Bacon ‚Ä¢ 1/2 Cup Berries<br><br><strong>1. ENJOY</strong><br>Prioritize the protein first, then enjoy the treats. Happy Holidays!|35|40|500",l:"The Holiday Feast|Lean Roast Meat, Green Beans, Sweet Potato|roast|<strong>Prep:</strong> 20m ‚Ä¢ <strong>Cook:</strong> 3h<hr><strong>INGREDIENTS</strong><br>8oz Roast Turkey or Beef ‚Ä¢ 1 Cup Green Beans ‚Ä¢ 1/2 Cup Sweet Potato<br><br><strong>1. FEAST</strong><br>Load up on the roast meat and green veggies. Go easy on the gravy.|50|40|600",d:"Leftovers Plate|Lean Protein, Veggies|raw|<strong>Prep:</strong> 5m<hr><strong>INGREDIENTS</strong><br>6oz Leftover Protein ‚Ä¢ Vegetable Side<br><br><strong>1. RECOVER</strong><br>Keep it light to help digestion before sleep.|30|10|300"};
// --- FUNCTIONS ---

function getHoliday(d) {
    const m = d.getMonth(); const date = d.getDate(); const day = d.getDay(); 
    if(m===0 && date===1) return "NEW YEAR'S DAY";
    if(m===6 && date===4) return "INDEPENDENCE DAY";
    if(m===10 && date===11) return "VETERANS DAY";
    if(m===11 && date===25) return "CHRISTMAS DAY";
    if(m===5 && date===19) return "JUNETEENTH";
    if(m===0 && day===1 && date>=15 && date<=21) return "MLK DAY";
    if(m===1 && day===1 && date>=15 && date<=21) return "PRESIDENTS DAY";
    if(m===4 && day===1 && date>=25) return "MEMORIAL DAY";
    if(m===8 && day===1 && date<=7) return "LABOR DAY";
    if(m===10 && day===4 && date>=22 && date<=28) return "THANKSGIVING";
    return null;
}

function switchU(uID){ user=uID; document.querySelectorAll('.u-badge').forEach(b=>b.classList.remove('active')); document.getElementById('b'+uID.toLowerCase()).classList.add('active'); render(); }

// --- UPGRADED CALENDAR LOGIC (Mon/Sun Boundaries) ---
function syncOffsetToSelection() {
    let today = getCaDate(); today.setHours(0,0,0,0);
    let todayMon = new Date(today);
    todayMon.setDate(today.getDate() - (today.getDay() === 0 ? 6 : today.getDay() - 1));
    let selMon = new Date(selDate);
    selMon.setDate(selDate.getDate() - (selDate.getDay() === 0 ? 6 : selDate.getDay() - 1));
    selMon.setHours(0,0,0,0);
    offset = Math.round((selMon - todayMon) / (7 * 864e5));
}

function getMon(o){ 
    let d = getCaDate(); 
    d.setHours(0,0,0,0); 
    let day = d.getDay(); 
    let diff = d.getDate() - day + (day === 0 ? -6 : 1); 
    d.setDate(diff + (o * 7)); 
    return d; 
}

function changeW(direction) {
    let viewMon = getMon(offset); 
    if (direction > 0) selDate = new Date(viewMon.getTime() + (7 * 864e5)); 
    else selDate = new Date(viewMon.getTime() - 864e5);
    selDate.setHours(12, 0, 0, 0); syncOffsetToSelection(); render(); 
}

function resetD(){ offset=0; selDate=getCaDate(); render(); }

function render(){
    const mon=getMon(offset); const days=["MON","TUE","WED","THU","FRI","SAT","SUN"];
    const tabs=document.getElementById('dayTabs'); tabs.innerHTML='';
    const end=new Date(mon); end.setDate(mon.getDate()+6);
    document.getElementById('dateDisplay').innerText=`${mon.toLocaleDateString('en-US',{month:'short',day:'numeric'})} - ${end.toLocaleDateString('en-US',{month:'short',day:'numeric'})}`;
    
    for(let i=0; i<7; i++){
        let d=new Date(mon); d.setDate(mon.getDate()+i);
        const isSelected = getDateKey(d) === getDateKey(selDate);
        const b=document.createElement('div'); 
        b.className='tab'+(isSelected?' active':'');
        b.innerHTML=`${days[i]}<br>${d.getDate()}`;
        b.onclick=()=>{ selDate=d; render() }; 
        tabs.appendChild(b);
        if(isSelected) showDay(d, i);
    }
}

function showDay(dObj, idx){
    const id=Math.floor(dObj.getTime()/864e5);
    const dateKey = getDateKey(dObj);
    const holidayName = getHoliday(dObj);
    
    if(!snackLog[dateKey]) snackLog[dateKey] = [null, null];
    const snacks = snackLog[dateKey];

    // Determine Menu (Standard vs Holiday)
    let b, l, dn;
    if(holidayName) {
        b = hDB.b.split('|'); l = hDB.l.split('|'); dn = hDB.d.split('|');
    } else {
        b = (mDB.b[Math.abs(id) % mDB.b.length] || mDB.b[0]).split('|');
        l = (mDB.l[Math.abs(id) % mDB.l.length] || mDB.l[0]).split('|');
        dn = (mDB.d[Math.abs(id) % mDB.d.length] || mDB.d[0]).split('|');
    }

    const sch=["HEAVY LIFT","BOXING","REFORM","BOXING","REFORM/YOGA","CS4","RELAX"];
    const jcs=["PLASMA FLUSH Juice","TITAN RED Juice","ZENITH GREEN Juice","TITAN RED Juice","ZENITH GREEN Juice","TITAN RED Juice","APOLLO GOLD Juice"];
    const j=jDB[jcs[idx]];
    let wName = holidayName ? "RELAX" : sch[idx];
    const isHighOutput = ["HEAVY LIFT", "BOXING", "CS4"].includes(wName);
    let baseP = 165, baseC = isHighOutput ? 160 : 85, baseK = isHighOutput ? 2200 : 1800;
    const g=(user==='J') ? {P:baseP, C:baseC, K:baseK} : {P:105, C:55, K:1300};
    const sc = (user==='J') ? 1 : 0.6; 

    // Sum up snacks
    let sPro = 0, sCarb = 0, sCal = 0;
    snacks.forEach(sIdx => {
        if(sIdx !== null) {
            let sData = mDB.s[sIdx].split('|');
            sPro += parseInt(sData[4]); sCarb += parseInt(sData[5]); sCal += parseInt(sData[6]);
        }
    });

    let p = Math.round((parseInt(b[4]) + parseInt(l[4]) + parseInt(dn[4]))*sc) + j[2] + sPro;
    let c = Math.round((parseInt(b[5]) + parseInt(l[5]) + parseInt(dn[5]))*sc) + j[3] + sCarb;
    let k = Math.round((parseInt(b[6]) + parseInt(l[6]) + parseInt(dn[6]))*sc) + j[4] + sCal;

    const ptn = (user==='J') ? { b: '4 Eggs', l: '8oz', d: '8oz' } : { b: '2 Eggs', l: '5oz', d: '5oz' };
    const proto = pDB[wName] || pDB["RELAX"];

    let snackHTML = '<div class="snack-grid">';
    for(let i=0; i<2; i++) {
        if(snacks[i] === null) {
            snackHTML += `<div class="snack-slot" onclick="openSnackSelector(${i})"><span style="font-size:1.2rem; color:#333;">Ôºã</span><span class="snack-label" style="color:#666; font-weight:500;">ADD SNACK</span></div>`;
        } else {
            let s = mDB.s[snacks[i]].split('|');
            snackHTML += `<div class="snack-slot filled" onclick="openR('${s[0].replace(/'/g, "\\'")}', '${s[1]}', '${s[2]}', '${s[3].replace(/'/g, "\\'")}')"><div class="remove-snack" onclick="event.stopPropagation(); removeSnack(${i})">‚úï</div><span class="snack-label">${s[0]}</span><span class="snack-macro">${s[4]}P ${s[5]}C ${s[6]}K</span></div>`;
        }
    }
    snackHTML += '</div>';

    let holidayBannerHTML = holidayName ? `<div class="holiday-banner">‚ú® ${holidayName} DETECTED ‚ú®<br>PROTOCOL: FESTIVE RELAX</div>` : '';
    let cardClass = holidayName ? 'card holiday-card' : 'card';

    document.getElementById('dayContent').innerHTML = `
        ${holidayBannerHTML}
        <div style="background:#0a0a0a; border:1px solid #222; border-bottom:4px solid var(--blue); padding:15px; border-radius:12px; margin-bottom:25px; cursor:pointer;" onclick="openRecoveryPhase('${wName}')">
            <div style="display:flex; justify-content:space-between; align-items:center; text-align:center;">
                <div style="flex:1"><div style="font-size:0.5rem; color:#666; font-weight:900; letter-spacing:1px">WARM UP</div><div style="font-size:0.7rem; color:#fff; margin-top:4px">${proto[0].h}</div></div>
                <div style="color:var(--blue); font-size:0.8rem; padding:0 8px">‚ûú</div>
                <div style="flex:1.2"><div style="font-size:0.5rem; color:var(--blue); font-weight:900; letter-spacing:1px">WORKOUT</div><div style="font-size:0.85rem; color:#fff; font-weight:900; margin-top:4px">${wName}</div></div>
                <div style="color:var(--blue); font-size:0.8rem; padding:0 8px">‚ûú</div>
                <div style="flex:1"><div style="font-size:0.5rem; color:#666; font-weight:900; letter-spacing:1px">RECOVER</div><div style="font-size:0.7rem; color:#fff; margin-top:4px">${proto[2].h}</div></div>
            </div>
            <div style="text-align:center; font-size:0.55rem; color:#444; margin-top:12px; letter-spacing:1px">TAP CARD FOR FULL GUIDE</div>
        </div>

        <div style="display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #222; margin-bottom:15px; padding-bottom:5px">
            <div style="color:#444; font-size:0.6rem; font-weight:900; letter-spacing:2px">NUTRITION PROTOCOL</div>
            <div onclick="generateGroceryList()" style="color:var(--gold); font-size:0.6rem; font-weight:900; cursor:pointer">üõí GROCERY LIST</div>
        </div>
        
        <div class="label">üß¨ Daily Essentials</div>
        <div style="display:flex; gap:10px; margin-bottom:15px">
            <div onclick="openM('Sea Moss')" style="flex:1; background:#111; border:1px solid #333; padding:10px; border-radius:10px; text-align:center; font-size:0.8rem; font-weight:700; cursor:pointer;">Sea Moss üåø</div>
            <div onclick="openM('Kombucha')" style="flex:1; background:#111; border:1px solid #333; padding:10px; border-radius:10px; text-align:center; font-size:0.8rem; font-weight:700; cursor:pointer;">Kombucha ü•É</div>
        </div>

        <div class="label">üç≥ Breakfast <span class="portion-tag">‚Ä¢ ${ptn.b}</span></div>
        <div class="value" onclick="openR('${b[0].replace(/'/g, "\\'")}', '${b[1]}', '${b[2]}', '${b[3].replace(/'/g, "\\'")}')">
            <span>${b[0]}</span> <span class="macro-pill">${Math.round(b[4]*sc)}P ${Math.round(b[5]*sc)}C ${Math.round(b[6]*sc)}K</span>
        </div>
        
        <div class="label">ü•ó Lunch <span class="portion-tag">‚Ä¢ ${ptn.l}</span></div>
        <div class="value" onclick="openR('${l[0].replace(/'/g, "\\'")}', '${l[1]}', '${l[2]}', '${l[3].replace(/'/g, "\\'")}')">
            <span>${l[0]} üíº</span> <span class="macro-pill">${Math.round(l[4]*sc)}P ${Math.round(l[5]*sc)}C ${Math.round(l[6]*sc)}K</span>
        </div>
        
        <div class="label">üçΩÔ∏è Dinner <span class="portion-tag">‚Ä¢ ${ptn.d}</span></div>
        <div class="value" onclick="openR('${dn[0].replace(/'/g, "\\'")}', '${dn[1]}', '${dn[2]}', '${dn[3].replace(/'/g, "\\'")}')">
            <span>${dn[0]}</span> <span class="macro-pill">${Math.round(dn[4]*sc)}P ${Math.round(dn[5]*sc)}C ${Math.round(dn[6]*sc)}K</span>
        </div>
        
        <div class="label">ü•ú Snack Options</div>
        ${snackHTML}

        <div class="macro-dashboard">
            <div class="macro-row"><div class="macro-label"><span>PROTEIN</span><span>${p}g / ${g.P}g</span></div><div class="macro-bg"><div class="macro-fill" style="width:${Math.min((p/g.P)*100,100)}%; background:var(--g-pro)"></div></div></div>
            <div class="macro-row"><div class="macro-label"><span>CARBS</span><span>${c}g / ${g.C}g</span></div><div class="macro-bg"><div class="macro-fill" style="width:${Math.min((c/g.C)*100,100)}%; background:var(--g-carb)"></div></div></div>
            <div class="macro-row"><div class="macro-label"><span>CALORIES</span><span>${k} / ${g.K}</span></div><div class="macro-bg"><div class="macro-fill" style="width:${Math.min((k/g.K)*100,100)}%; background:var(--g-cal)"></div></div></div>
        </div>
        <div class="${cardClass}" style="text-align:center"><div class="label" style="color:var(--gold)">Cold Pressed Juice</div><div class="juice-name" onclick="openJ('${jcs[idx]}')">${jcs[idx]}</div></div>`;
}

// deterministic seed function
function stableSeed(s) {
    let h = 0;
    for(let i = 0; i < s.length; i++) h = Math.imul(31, h) + s.charCodeAt(i) | 0;
    return Math.abs(h);
}

// ===============================
// AI IMAGE LOADING ‚Äì HARDENED FIX
// ===============================
function openR(n, i, a, t) {
    document.getElementById('mTitle').innerText = n;
    document.getElementById('mSub').innerText = "";
    
    // SETUP CONTAINER FOR LOADER
    const body = document.getElementById('mBody');
    body.innerHTML = '<div class="img-loader">‚ú® Chef is plating...</div>'; 

    const cleanName = n.replace(/[^a-zA-Z ]/g, "").trim();
    const seed = stableSeed(cleanName); // Use the helper
    
    // Short, fast prompt
    const prompt = encodeURIComponent(`delicious ${cleanName} plated food photo`);
    const imgUrl = `https://image.pollinations.ai/prompt/${prompt}?width=800&height=600&seed=${seed}&nologo=true&model=turbo`; 

    const img = document.createElement("img");
    img.className = "meal-img";
    img.loading = "eager"; 
    img.alt = cleanName;
    img.referrerPolicy = "no-referrer";
    
    // START HIDDEN FOR CINEMATIC REVEAL
    img.style.opacity = "0";
    img.style.filter = "blur(10px)";
    img.style.transition = "opacity 0.4s ease, filter 0.4s ease";
    
    const safeFallback = "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80";
    
    const timer = setTimeout(() => {
        if (!img.complete || img.naturalWidth === 0) { 
            console.log("AI timed out, switching to fallback.");
            img.src = safeFallback; 
        }
    }, 15000); 

    img.onload = () => {
        clearTimeout(timer);
        body.innerHTML = ""; 
        body.appendChild(img);
        
        setTimeout(() => {
            img.style.opacity = "1";
            img.style.filter = "blur(0)";
        }, 50);
        
        const txt = document.createElement("div");
        txt.innerHTML = `<br>${t}`;
        body.appendChild(txt);
    };
    
    img.onerror = () => { 
        clearTimeout(timer); 
        img.src = safeFallback; 
        img.onload = null; 
        img.style.opacity = "1";
        img.style.filter = "blur(0)";
    };
    
    setTimeout(() => {
        img.src = imgUrl;
    }, 30);

    document.getElementById('mTip').innerText = "";
    document.getElementById('masterModal').style.display = 'block';
}

function openSnackSelector(slotIdx) {
    currentSlot = slotIdx; 
    const modalBody = document.getElementById('mBody');
    document.getElementById('mTitle').innerText = "SELECT SNACK";
    document.getElementById('mSub').innerText = "SLOT " + (slotIdx + 1);
    
    let html = '';
    mDB.s.forEach((item, index) => {
        let s = item.split('|');
        html += `<div class="value" onclick="applySnack(${index})">
            ${s[0]} 
            <span style="float:right;font-size:0.7rem;color:#666">${s[4]}g Pro | ${s[6]} Cal</span>
        </div>`;
    });
    
    modalBody.innerHTML = html;
    document.getElementById('mTip').innerText = "PRO TIP: Prioritize high-protein snacks on Heavy Lift days.";
    document.getElementById('masterModal').style.display = 'block';
}

function applySnack(snackIndex) {
    const dateKey = getDateKey(selDate);
    if(!snackLog[dateKey]) snackLog[dateKey] = [null, null];
    snackLog[dateKey][currentSlot] = snackIndex;
    document.getElementById('masterModal').style.display = 'none';
    render(); 
}

function removeSnack(slotIdx) {
    const dateKey = getDateKey(selDate);
    if(snackLog[dateKey]) {
        snackLog[dateKey][slotIdx] = null;
        render(); 
    }
}

function openJ(n){
    const d=jDB[n]; document.getElementById('mTitle').innerText=n; document.getElementById('mSub').innerText=d[0];
    document.getElementById('mBody').innerHTML=`<p><strong>Ingredients:</strong> ${d[1]}</p><p>P: ${d[2]}g | C: ${d[3]}g | Kcal: ${d[4]}</p>`;
    document.getElementById('mTip').innerText = "PRO TIP: Drink slowly to allow enzymes to activate digestion.";
    document.getElementById('masterModal').style.display='block';
}

function openM(n){
    const d=rDB[n]; document.getElementById('mTitle').innerText=n; document.getElementById('mSub').innerText=d[0];
    document.getElementById('mBody').innerHTML=d.slice(1).map(x=>`<p>${x}</p>`).join('');
    document.getElementById('mTip').innerText = "PRO TIP: Consistency beats intensity for recovery protocols.";
    document.getElementById('masterModal').style.display='block';
}

function openRecoveryPhase(workout) {
    const m = document.getElementById('mBody');
    document.getElementById('mTitle').innerText = workout + " PROTOCOL";
    document.getElementById('mSub').innerText = "V222.61 FLOW LOGIC";
    const active = pDB[workout] || pDB["RELAX"];
    let html = '<div class="rec-phase-list">';
    html += `<div class="phase-item"><span class="phase-time">WARM UP</span><span class="phase-title">${active[0].h}</span><span class="phase-detail">${active[0].d}</span></div>`;
    html += `<div class="phase-item"><span class="phase-time" style="color:#fff">TRAINING</span><span class="phase-title">${active[1].h}</span><span class="phase-detail">${active[1].d}</span></div>`;
    html += `<div class="phase-item"><span class="phase-time" style="color:var(--purple)">RECOVERY</span><span class="phase-title">${active[2].h}</span><span class="phase-detail">${active[2].d}</span></div>`;
    html += '</div>';
    m.innerHTML = html;
    document.getElementById('mTip').innerText = "TIP: Hydrate with minerals before Sauna sessions.";
    document.getElementById('masterModal').style.display = 'block';
}

// --- UPGRADED SMART GROCERY LIST ---
// --- UPDATED GROCERY LOGIC (Meat Filter Fix) ---
function generateGroceryList() {
    const modalBody = document.getElementById('mBody');
    document.getElementById('mTitle').innerText = "WEEKLY GROCERY LIST";
    document.getElementById('mSub').innerText = "V226.75 ‚Ä¢ SMART FILTER";
    
    let mainList = [];
    let pantryList = [];
    
    // 1. Essentials
    mainList.push("Sea Moss (Gel or Dried)");
    mainList.push("Kombucha (7-Day Supply)");

    const mon = getMon(offset);
    const jcs=["PLASMA FLUSH Juice","TITAN RED Juice","ZENITH GREEN Juice","TITAN RED Juice","ZENITH GREEN Juice","TITAN RED Juice","APOLLO GOLD Juice"];

    for(let i=0; i<7; i++) {
        let d = new Date(mon); d.setDate(mon.getDate()+i);
        let dateKey = getDateKey(d);
        let id = Math.floor(d.getTime()/864e5);
        let holidayName = getHoliday(d);
        
        let meals;
        if(holidayName) {
            meals = [hDB.b, hDB.l, hDB.d];
        } else {
            meals = [
                mDB.b[Math.abs(id) % mDB.b.length] || mDB.b[0],
                mDB.l[Math.abs(id) % mDB.l.length] || mDB.l[0],
                mDB.d[Math.abs(id) % mDB.d.length] || mDB.d[0]
            ];
        }

        meals.forEach(mealStr => {
            const parts = mealStr.split('|');
            // Extract Main Ingredients from HTML (The Fresh Stuff)
            const htmlMatch = parts[3].match(/INGREDIENTS<\/strong><br>([\s\S]*?)<br><br>/);
            if(htmlMatch && htmlMatch[1]) {
                mainList.push(...htmlMatch[1].split('‚Ä¢').map(s => s.trim()));
            }
            // Extract Pantry Tags (Index 1)
            if(!holidayName && parts[1]) {
                pantryList.push(...parts[1].split(',').map(s => s.trim()));
            }
        });

        // Add Juices
        let juiceName = jcs[i];
        if(jDB[juiceName]) {
             mainList.push(...jDB[juiceName][1].split(',').map(s => s.trim()));
        }

        // Add Snacks
        if(snackLog[dateKey]) {
            snackLog[dateKey].forEach(sIdx => {
                if(sIdx !== null) {
                    let sItem = mDB.s[sIdx];
                    let sParts = sItem.split('|');
                    const sMatch = sParts[3].match(/INGREDIENTS<\/strong><br>([\s\S]*?)<br><br>/);
                    if(sMatch && sMatch[1]) {
                        mainList.push(...sMatch[1].split('‚Ä¢').map(s => s.trim()));
                    }
                }
            });
        }
    }

    let uniqueMain = [...new Set(mainList.filter(i => i))].sort();
    let uniquePantry = [...new Set(pantryList.filter(i => i))].sort();
    
    // --- MEAT FILTER FIX ---
    // Explicitly define meats to block from Pantry section
    const meatKeywords = ["Chicken", "Steak", "Bison", "Beef", "Turkey", "Salmon", "Tuna", "Cod", "Lamb", "Pork", "Boar", "Venison", "Duck", "Shrimp", "Fish", "Scallops", "Mackerel", "Sardines", "Octopus", "Liver", "Heart", "Ribeye", "Sirloin", "Flank", "Filet", "Burger", "Sausage", "Meatball"];
    
    let finalPantry = uniquePantry.filter(pItem => {
        // 1. Remove if it's already in the main list
        const inMain = uniqueMain.some(mItem => mItem.toLowerCase().includes(pItem.toLowerCase()));
        if(inMain) return false;

        // 2. Remove if it matches a known meat keyword (Fixes the bug)
        const isMeat = meatKeywords.some(meat => pItem.toLowerCase().includes(meat.toLowerCase()));
        if(isMeat) return false;

        return true;
    });

    let html = `<div style="padding-bottom:50px;">`;
    
    html += `<div class="grocery-cat">FRESH & QUANTIFIED</div>`;
    uniqueMain.forEach(item => {
        html += `<div class="grocery-item">‚¨ú <span>${item}</span></div>`;
    });

    html += `<div class="grocery-cat">PANTRY & SPICES CHECK</div>`;
    finalPantry.forEach(item => {
        html += `<div class="grocery-item" style="color:#888">‚¨ú <span>${item}</span></div>`;
    });

    html += `</div>`;
    
    modalBody.innerHTML = html;
    document.getElementById('mTip').innerText = "TIP: Meats are automatically filtered to the top section.";
    document.getElementById('masterModal').style.display = 'block';
}

// --- UPGRADED BIO-SCAN ---
// --- RESTORED 3-TAB BIO SYSTEM ---
function openBio() {
    const modalBody = document.getElementById('mBody');
    const u = uH[user];
    document.getElementById('mTitle').innerText = (user === 'J' ? "JERMAINE" : "SOPHIA") + " LONGEVITY PANEL";
    document.getElementById('mSub').innerText = "Clinical & Functional Metrics";
    document.getElementById('mImgContainer').innerHTML = ''; // Clear images if any

    // Restore the Tab Structure
    modalBody.innerHTML = `
        <div class="tabs" style="margin-bottom:20px;">
            <div id="btPhys" class="tab active" onclick="renderBioTab('phys')">BODY</div>
            <div id="btLabs" class="tab" onclick="renderBioTab('labs')">LABS</div>
            <div id="btTests" class="tab" onclick="renderBioTab('tests')">TESTS</div>
        </div>
        <div id="bioContentArea"></div>
    `;
    renderBioTab('phys'); // Default to Body tab
    document.getElementById('masterModal').style.display = 'block';
}

function renderBioTab(tab) {
    const u = uH[user];
    const target = document.getElementById('bioContentArea');
    
    // Update Tab Styles
    document.querySelectorAll('[id^="bt"]').forEach(t => t.classList.remove('active'));
    document.getElementById('bt' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('active');

    let html = '';

    // --- LIFE EXPECTANCY HEADER (Only on first tab) ---
    if(tab === 'phys') {
        const le = calculateLifeExpectancy(user);
        html += `
        <div style="background:linear-gradient(135deg, #1a1a1a, #000); border:1px solid #333; border-radius:12px; padding:15px; margin-bottom:20px; text-align:center; position:relative; overflow:hidden;">
            <div style="font-size:0.6rem; color:#888; font-weight:900; letter-spacing:2px; text-transform:uppercase; margin-bottom:5px;">Projected Lifespan</div>
            <div style="display:flex; justify-content:center; align-items:baseline; gap:10px;">
                <div style="font-size:2.5rem; font-weight:800; color:${le.current >= 80 ? 'var(--green)' : '#fff'}">${le.current}</div>
                <div style="font-size:1rem; color:#444; font-weight:700;">‚ûî</div>
                <div style="font-size:1.5rem; color:var(--gold); font-weight:700;">${le.potential} <span style="font-size:0.6rem; color:#666">YEARS</span></div>
            </div>
            <div style="font-size:0.55rem; color:#555; margin-top:5px;">BASED ON VO2 MAX, APOB & INFLAMMATION</div>
        </div>`;
    }

    let items = [];
    // Data Loading Logic
    if (tab === 'phys') {
        items = [
            {id:'bf', name: "Body Fat", val: u.now.bf, goal: u.goal.bf, unit: "%", lowerIsBetter: true},
            {id:'m', name: "Muscle Mass", val: u.now.m, goal: u.goal.m, unit: "lbs", lowerIsBetter: false},
            {id:'vf', name: "Visceral Fat", val: u.now.vf, goal: u.goal.vf, unit: "lvl", lowerIsBetter: true},
            {id:'bmr', name: "BMR", val: u.now.bmr, goal: u.goal.bmr, unit: "kcal", lowerIsBetter: false}
        ];
        items.forEach(i => { if(u.info[i.id]) { i.desc = u.info[i.id].d; i.fix = u.info[i.id].f; } });
    } else {
        items = Object.values(u[tab]);
    }

    // Dynamic Labels based on Tab
    const label1 = (tab === 'tests') ? "EXECUTION" : "WHAT";
    const label2 = (tab === 'tests') ? "TRAINING" : "FIX";

    items.forEach((m, idx) => {
        // --- CALCULATION LOGIC ---
        let maxRef = Math.max(m.val, m.goal) * 1.2;
        let pctNow = (m.val / maxRef) * 100;
        let pctGoal = (m.goal / maxRef) * 100;

        // Color Logic
        let colorNow = 'var(--gold)';
        const onTrack = m.lowerIsBetter ? (m.val <= m.goal * 1.05) : (m.val >= m.goal * 0.95);
        if (onTrack) colorNow = 'var(--green)';
        if (!onTrack && tab === 'labs') colorNow = '#FF5252'; 

        const itemId = `bio_item_${idx}`;

        html += `
            <div class="bio-section" onclick="toggleBioItem('${itemId}')" style="margin-bottom:12px; padding:15px; cursor:pointer; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.05);">
                
                <div style="display:flex; justify-content:space-between; margin-bottom:10px;">
                    <span style="font-size:0.8rem; font-weight:800; color:#fff;">${m.name}</span>
                    <span style="font-size:0.6rem; color:#555; vertical-align:middle; font-weight:700">‚ñº INSTRUCTIONS</span>
                </div>

                <div style="display:flex; align-items:center; margin-bottom:6px;">
                    <div style="width:40px; font-size:0.55rem; color:#888; font-weight:900;">NOW</div>
                    <div style="flex:1; height:6px; background:#111; border-radius:4px; overflow:hidden; margin-right:8px;">
                        <div style="width:${pctNow}%; height:100%; background:${colorNow}; border-radius:4px;"></div>
                    </div>
                    <div style="width:40px; text-align:right; font-size:0.7rem; color:${colorNow}; font-weight:700;">${m.val}</div>
                </div>

                <div style="display:flex; align-items:center;">
                    <div style="width:40px; font-size:0.55rem; color:var(--blue); font-weight:900;">GOAL</div>
                    <div style="flex:1; height:6px; background:#111; border-radius:4px; overflow:hidden; margin-right:8px;">
                        <div style="width:${pctGoal}%; height:100%; background:var(--blue); border-radius:4px; opacity:0.6;"></div>
                    </div>
                    <div style="width:40px; text-align:right; font-size:0.7rem; color:var(--blue); font-weight:700;">${m.goal}</div>
                </div>

                <div id="${itemId}" style="display:none; margin-top:15px; padding-top:10px; border-top:1px dashed #333;">
                    <div style="font-size:0.75rem; color:#ccc; margin-bottom:8px; line-height:1.4">
                        <strong style="color:var(--blue)">${label1}:</strong> ${m.desc || 'Metric description unavailable.'}
                    </div>
                    <div style="font-size:0.75rem; color:#ccc; line-height:1.4">
                        <strong style="color:var(--green)">${label2}:</strong> ${m.fix || 'Consult your protocol.'}
                    </div>
                </div>
            </div>`;
    });

    target.innerHTML = html;
}

function toggleBioItem(id) {
    const el = document.getElementById(id);
    // Simple toggle
    if(el.style.display === 'none') {
        el.style.display = 'block';
    } else {
        el.style.display = 'none';
    }
}

function closeM(){ document.getElementById('masterModal').style.display='none' }
window.onload=render;
</script>
</body>
</html>