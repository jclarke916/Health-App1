<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Centurion | v225.60 Final</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root{--bg:#050505;--card:#141414;--gold:#D4AF37;--green:#00E676;--blue:#00B0FF;--purple:#D500F9;--text:#fff;--g-pro:linear-gradient(90deg,#FF5252,#D50000);--g-carb:linear-gradient(90deg,#FFAB40,#FF6D00);--g-cal:linear-gradient(90deg,#B388FF,#6200EA);--g-fib:linear-gradient(90deg,#00E676,#00C853)}
        *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
        body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);margin:0;padding:15px;font-size:14px}
        .container{max-width:500px;margin:0 auto; padding-bottom: 50px;}
        h1{text-align:center;font-weight:200;letter-spacing:5px;text-transform:uppercase;font-size:1.2rem;margin:10px 0}
        .version-tag { display: block; text-align: center; font-size: 0.5rem; color: #444; margin-top: -8px; margin-bottom: 15px; letter-spacing: 2px; }
        .badge-row{display:flex;justify-content:center;gap:8px;margin-bottom:15px}
        .u-badge{background:#000;padding:8px 16px;border-radius:20px;border:1px solid #333;font-size:0.6rem;font-weight:800;cursor:pointer;color:#666}
        .u-badge.active{border-color:var(--gold);color:var(--gold)}
        .status-bar{text-align:center;color:#888;font-size:0.65rem;font-weight:800;margin-bottom:10px;text-transform:uppercase}
        .controls{display:flex;gap:5px;margin-bottom:15px}
        .nav-btn{background:#111;border:1px solid #222;color:#888;padding:10px;flex:1;border-radius:8px;font-size:0.55rem;font-weight:800;cursor:pointer}
        .card, .macro-dashboard{background:var(--card);border-radius:20px;padding:20px;margin-bottom:15px;border:1px solid rgba(255,255,255,0.03);position:relative}
        .card::before{content:"";position:absolute;left:0;top:20px;bottom:20px;width:3px;background:var(--gold);border-radius:0 4px 4px 0}
        .label{color:#666;font-size:0.5rem;text-transform:uppercase;font-weight:900;margin-bottom:4px; display: flex; justify-content: space-between;}
        .value{ font-size: 0.95rem; margin-bottom: 12px; font-weight: 500; cursor: pointer; border-bottom: 1px solid #222; padding-bottom: 4px; display: flex; justify-content: space-between; align-items: center; }
        .macro-row{margin-bottom:10px}
        .macro-label{display:flex;justify-content:space-between;font-size:0.55rem;font-weight:800;color:#777;margin-bottom:3px}
        .macro-bg{height:5px;background:#222;border-radius:10px;overflow:hidden}
        .macro-fill{height:100%;border-radius:10px;transition:width 0.8s}
        .tabs{display:flex;gap:4px;margin-bottom:15px}
        .tab{flex:1;padding:10px 0;background:#111;border:1px solid #222;color:#444;border-radius:8px;font-size:0.55rem;font-weight:800;text-align:center;cursor:pointer}
        .tab.active{background:#222;color:#fff;border-color:444}
        .modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#0a0a0a;z-index:2000;overflow-y:auto;padding:0;}
        .modal-content{background:#0a0a0a;margin:0;padding:25px;border:none;border-radius:0;width:100%;min-height:100%;max-width:none;}
        .close-btn-float { position: fixed; top: 20px; right: 20px; width: 40px; height: 40px; background: rgba(30,30,30,0.8); backdrop-filter: blur(5px); border-radius: 50%; border: 1px solid #333; color: #fff; font-size: 24px; text-align: center; line-height: 38px; cursor: pointer; z-index: 2001; }
        #mImgContainer { position: relative; width: 100%; min-height: 220px; margin-bottom: 15px; border-radius: 14px; overflow: hidden; background: #111; }
        .meal-img { display: block; width: 100%; height: auto; min-height: 220px; object-fit: cover; position: relative; z-index: 2; opacity: 0; filter: blur(10px); transition: opacity 0.5s ease-in, filter 0.5s ease-in; }
        .img-loader { height: 100%; display: flex; align-items: center; justify-content: center; color: var(--gold); font-size: 0.8rem; font-weight: 700; background: rgba(255,255,255,0.02); animation: pulse 1.5s infinite; position: absolute; width: 100%; top: 0; left: 0; z-index: 1; }
        @keyframes pulse { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }
        .snack-grid { display: flex; gap: 10px; margin-bottom: 15px; }
        .snack-slot { flex: 1; border: 1px dashed #333; border-radius: 12px; padding: 12px 5px; text-align: center; cursor: pointer; position: relative; min-height: 60px; display: flex; flex-direction: column; justify-content: center; align-items: center; background: rgba(255,255,255,0.02); }
        .snack-slot.filled { border: 1px solid var(--gold); background: #111; }
        .remove-snack { position: absolute; top: -5px; right: -5px; background: #333; color: #aaa; border: 1px solid #222; border-radius: 50%; width: 16px; height: 16px; font-size: 9px; line-height: 14px; text-align: center; font-weight: 800; z-index: 10; }
        .bio-section{margin-bottom:25px;padding:15px;background:rgba(255,255,255,0.03);border-radius:15px;border:1px solid rgba(255,255,255,0.05)}
        .bio-title{display:flex;justify-content:space-between;font-size:0.75rem;font-weight:800;color:#fff;margin-bottom:12px;text-transform:uppercase}
        .bar-track{width:100%;height:10px;background:#111;border-radius:10px;overflow:hidden;border:1px solid #222;}
        .bar-fill.now{height:100%;background:var(--gold);transition:width 1s cubic-bezier(0.4,0,0.2,1)}
        .grocery-cat { font-size: 0.85rem; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; margin-top: 30px; margin-bottom: 15px; font-weight: 900; border-bottom: 1px dashed #333; padding-bottom: 8px; }
        .grocery-item { padding: 12px 0; color: #ccc; font-size: 0.95rem; display:flex; align-items:center; border-bottom:1px solid #1a1a1a; }
        .rec-phase-list { position: relative; padding-left: 25px; margin-top: 20px; }
        .rec-phase-list::before { content: ''; position: absolute; left: 8px; top: 0; bottom: 0; width: 2px; background: linear-gradient(to bottom, var(--blue), var(--purple)); }
        .phase-item { position: relative; margin-bottom: 25px; }
        .phase-item::after { content: ''; position: absolute; left: -22px; top: 5px; width: 10px; height: 10px; background: var(--bg); border: 2px solid var(--blue); border-radius: 50%; }
        .phase-time { font-size: 0.6rem; font-weight: 900; color: var(--blue); text-transform: uppercase; }
        .phase-title { display: block; font-size: 0.9rem; font-weight: 700; color: #fff; }
        .phase-detail { font-size: 0.75rem; color: #999; line-height: 1.4; }
    </style>
</head>
<body>
<div class="container">
    <header><h1>THE CENTURION</h1>
        <span class="version-tag">v225.60 Master ‚Ä¢ segments 2/6</span>
        <div class="badge-row">
            <div id="bj" class="u-badge active" onclick="switchU('J')">üßîüèæ‚Äç‚ôÇÔ∏è JERMAINE</div>
            <div id="bs" class="u-badge" onclick="switchU('S')">üë©üèæ‚Äçü¶± SOPHIA</div>
        </div>
    </header>
    <div id="dateDisplay" class="status-bar">...</div>
    <div class="controls">
        <button class="nav-btn" onclick="changeW(-1)">PREV</button>
        <button class="nav-btn" onclick="resetD()">TODAY</button>
        <button class="nav-btn" onclick="changeW(1)">NEXT</button>
        <button class="nav-btn" onclick="openBio()" style="color:var(--green)">MY DATA</button>
    </div>
    <div id="dayTabs" class="tabs"></div>
    <div id="dayContent"></div>
</div>

<div id="masterModal" class="modal">
    <div class="close-btn-float" onclick="closeM()">&times;</div>
    <div class="modal-content">
        <h2 id="mTitle" style="font-size:1.5rem; margin-top:10px;"></h2>
        <div id="mSub" style="color:var(--gold);font-size:0.85rem;margin:10px 0; text-transform:uppercase; letter-spacing:1px; font-weight:700;"></div>
        <div id="mImgContainer"></div>
        <div id="mBody" class="chef-steps" style="counter-reset:step"></div>
        <div id="mTip" class="chef-tip" style="margin-top:30px; padding:15px; border:1px solid #222; background:#111; border-radius:10px; color:#888; font-style:italic;"></div>
        <br><br><br>
    </div>
</div>
<script>
// --- FULL NUTRITION DATABASE ---
const mDB = {
    b: [
        "Turmeric Scramble|Eggs,Spinach,Garlic,Olive Oil,Turmeric,Black Pepper|scramble|Whisk 3 eggs with 1tsp turmeric and black pepper. Saut√© 3 cups spinach/garlic. Mix.|22|2|240",
        "Za'atar Avocado|Eggs,Avocado,Radish,Sprouted Bread,Lemon,Za'atar|raw|Toast sprouted bread. Mash 1/2 avocado. Top with 2 fried eggs, radish, and Za'atar.|24|18|380",
        "Bison & Rainbow|Ground Bison,Red Pepper,Orange Pepper,Onion,Garlic|sear|Sear 6oz bison. Saut√© peppers and onions in bison fat for 3 mins.|45|8|480",
        "Ginger Poach|Bone Broth,Eggs,Bok Choy,Ginger,Garlic|poach|Simmer 2c broth with ginger/garlic. Poach bok choy and 3 eggs.|20|4|220",
        "Turkey Sage Pan|Turkey,Fennel,Green Apple,Sage,Garlic|sear|Sear 6oz turkey patties with fresh sage. Serve with cold apple/fennel.|35|12|360",
        "Salmon Omelet|Salmon,Asparagus,Garlic,Dill,Eggs|flat|Saut√© asparagus. Whisk 3 eggs with dill. Fill with 3oz smoked salmon.|38|2|410",
        "Purple Toast|Sardines,Purple Cabbage,Avocado,Sourdough,Lime,Garlic|raw|Toast sourdough. Mash avocado. Top with sardines and purple garlic slaw.|25|22|450",
        "Steak & Greens|Grass-fed Sirloin,Arugula,Cherry Tomatoes,Garlic,Olive Oil|sear|Flash sear 6oz steak. Serve on arugula and tomatoes with garlic oil.|48|4|520",
        "Mushroom Frittata|Egg Whites,Mushrooms,Kale,Garlic,Thyme|bake|Saut√© mushrooms/garlic. Add kale. Pour 1c egg whites. Broil 5 mins.|25|6|280",
        "Zucchini Hash|Zucchini,Carrot,Garlic,Eggs,Ghee|crisp|Grate 2 zucchini/1 carrot. Squeeze dry. Crisp in ghee. Top with 3 eggs.|20|8|260",
        "Goat Cheese Scramble|Eggs,Goat Cheese,Tomato,Chives,Garlic|scramble|Soft scramble 3 eggs. Fold in 1oz goat cheese off-heat. Serve with tomato.|22|4|290",
        "Cod Scramble|Cod,Eggs,Garlic,Parsley,Butter,Lemon|scramble|Poach and flake 6oz cod. Scramble with 3 eggs, turmeric, and fresh parsley.|35|4|340",
        "Bison Hash|Bison,Sweet Potato,Peppers,Onion,Garlic,Eggs|sear|Saut√© diced sweet potato and peppers. Brown 6oz bison. Crack 2 eggs on top.|45|18|510",
        "Duck Egg Pan|Duck Eggs,Kale,Beets,Garlic|steam|Saut√© spiralized beets and kale. Crack 2 duck eggs into wells. Steam covered.|24|8|310",
        "Sausage Rainbow|Turkey Sausage,Red Pepper,Yellow Pepper,Green Pepper,Garlic|sear|Sear 2 turkey sausages. Saut√© tri-color peppers and garlic in the same pan.|38|8|440",
        "Tuna Melt|Canned Tuna,Heirloom Tomato,Goat Cheese,Bread,Dill,Garlic|flat|Mix tuna, yogurt, dill. Top sprouted bread with tuna, tomato, goat cheese. Broil.|42|24|550",
        "Hidden Liver Hash|Beef,Beef Liver,Rainbow Chard,Garlic|sear|Grate 1oz frozen liver into 6oz beef. Saut√© with chard stems and garlic.|35|8|420",
        "Broccoli Bake|Egg Whites,Broccoli,Garlic,Nutritional Yeast|bake|Mix 1c egg whites, florets, garlic. Bake 15m. Top with nutritional yeast.|20|12|240",
        "Salmon Roe Eggs|Salmon Roe,Eggs,Cucumber,Nori,Garlic Powder|flat|Make 3-egg crepe ribbons. Top with 2tbsp cold Roe, cucumber, and Nori.|28|2|320",
        "Lamb Morning|Lamb Chops,Cucumber,Pomegranate,Mint,Garlic|sear|Sear 6oz lamb. Serve with cold cucumber, mint, and pomegranate salad.|40|6|460",
        "Mackerel Bowl|Smoked Mackerel,Radish,Watercress,Lemon,Garlic|raw|Flake mackerel over watercress and radish. Dress with garlic lemon oil.|30|4|350",
        "Heart Pan|Beef Heart,Peppers,Onion,Garlic,Cumin|sear|Flash sear thin-sliced 6oz heart with peppers, onions, and cumin.|35|6|320",
        "Collard Scramble|Collard Greens,Eggs,Garlic,Butter|saut√©|Saut√© thin-cut collards with garlic/butter. Scramble 3 eggs directly in.|18|6|220",
        "Boar & Eggs|Wild Boar,Cherry Tomatoes,Garlic,Eggs|sear|Sear 6oz boar cutlets. Blister tomatoes and garlic. Serve with 2 eggs.|42|4|440",
        "Scallop Pan|Scallops,Spinach,Garlic,Ghee,Turmeric|sear|Sear 6oz scallops. Wilt 4c spinach with garlic and turmeric. Combine.|30|3|290",
        "Tomato Steak|Grass-fed Filet,Tomato,Garlic,Basil|sear|Sear 6oz filet. Cook tomatoes/garlic in fat until saucy. Top with basil.|45|8|490",
        "Shrimp Omelet|Shrimp,Avocado,Garlic,Eggs,Paprika|sear|Sear 6oz shrimp with paprika. Fold into 3-egg omelet. Top with avocado.|35|4|360",
        "Seaweed Poach|Dulse Seaweed,Eggs,Scallions,Ginger,Miso|poach|Simmer miso/ginger. Add Dulse seaweed. Poach 3 eggs in the broth.|18|4|180",
        "Venison Pan|Venison,Blackberries,Garlic,Balsamic|sear|Sear 6oz venison. Deglaze pan with blackberries and balsamic. Mash to sauce.|40|8|390",
        "Liver & Onions|Beef Liver,Onions,Garlic,Bacon|sear|Sear 4oz liver and onions in bacon fat. High micronutrient density.|32|6|380"
    ],
    l: [
        "Pepperfin Molino|Tuna,Jalapeno,Sesame Seeds,Ponzu,Chili Oil|raw|Slice 6oz tuna thin. Top with jalape√±o, Ponzu, and chili oil.|30|4|260",
        "Thai Beef Salad|Sirloin,Cucumber,Red Pepper,Garlic,Fish Sauce,Lime|sear|Julienne veg. Mix with lime/fish sauce. Top with cold sliced 6oz steak.|45|16|480",
        "Chicken Chimichurri|Chicken Breast,Parsley,Oregano,Garlic,Red Wine Vinegar|poach|Poach 6oz chicken and shred. Toss in heavy garlic-parsley chimichurri.|40|4|420",
        "Sardine Bowl|Sardines,Radish,Fennel,Lemon,Garlic|raw|Shave fennel/radish. Toss with lemon. Top with 1 tin sardines.|28|6|320",
        "Cold Flank|Grass-fed Flank,Asparagus,Tomato,Dijon Mustard,Garlic|sear|Sear 6oz flank and slice. Serve with blanched asparagus and tomatoes.|42|6|450",
        "Bison Kofta|Ground Bison,Cucumber,Greek Yogurt,Garlic,Cumin|bake|Bake 6oz bison meatballs. Serve cold with cucumber garlic tzatziki.|38|6|410",
        "Sumac Chicken|Chicken Breast,Red Onion,Parsley,Garlic,Sumac|poach|Shred 6oz poached chicken. Mix with onion, sumac, and parsley.|35|4|390",
        "Salmon Boats|Canned Salmon,Cucumber,Greek Yogurt,Dill,Garlic|raw|Hollow cucumbers. Fill with 1 can salmon mixed with yogurt and dill.|35|6|410",
        "Bison Jerky Plate|Bison Jerky,Walnuts,Olives,Blueberries|raw|2oz Jerky, 12 Walnuts, 10 Olives, 1c Blueberries.|30|14|380",
        "Arugula Jar|Grass-fed Sirloin,Roasted Beets,Walnuts,Arugula,Balsamic,Garlic|sear|Layer 6oz steak, beets, walnuts, and 3c arugula. Shake with balsamic.|40|14|460",
        "Lemon Broccoli|Chicken Breast,Broccoli,Garlic,Lemon,Turmeric|poach|Poach 6oz chicken. Massage raw broccoli with lemon, oil, and garlic. Mix.|38|10|390",
        "Stuffed Peppers|Canned Tuna,Mini Peppers,Parsley,Garlic,Lemon|raw|Mix tuna, parsley, lemon, and garlic. Stuff into 8 raw mini peppers.|35|8|340",
        "Beef Broccoli|Roast Beef,Broccoli,Garlic,Sesame Oil,Sesame Seeds|blanch|Blanch broccoli. Toss with cold roast beef, garlic, sesame oil/seeds.|42|12|490",
        "Sardine Lemon|Sardines,Celery,Garlic,Lemon|raw|Mash sardines with garlic paste and lemon. Scoop with raw celery.|28|4|310",
        "Avocado Roll|Turkey,Avocado,Carrot,Garlic Powder|raw|Roll 6oz turkey around avocado slices and julienne carrots.|32|8|380",
        "Poached Salmon|Salmon,Cucumber,Green Tea,Garlic|poach|Poach 6oz salmon in garlic-infused green tea. Serve over cucumber.|35|2|390",
        "Lamb Salad|Lamb Loin,Mint,Garlic,Pomegranate|sear|Sear 6oz lamb. Toss greens with mint, garlic, and pomegranate.|40|8|470",
        "Duck Salad|Duck Leg,Radicchio,Orange,Walnuts,Garlic|raw|Shred cooked duck. Mix with radicchio, orange, and garlic walnuts.|35|12|440",
        "Cod Jars|Cod,Celery,Green Apple,Garlic|poach|Poach 6oz cod. Mix with diced apple, celery, and garlic oil in a jar.|32|8|360",
        "Shrimp Cocktail|Shrimp,Tomato,Horseradish,Garlic,Lemon|boil|Boil 6oz shrimp. Mix horseradish, tomato, and garlic for the dip.|28|4|290",
        "Heart Carpaccio|Beef Heart,Arugula,Garlic,Parmesan,Lemon|raw|Freeze heart; slice paper-thin. Drizzle with garlic-lemon oil.|30|2|310",
        "Venison Jerky|Venison Jerky,Almonds,Pear|raw|2oz Venison Jerky, 12 Almonds, 1 sliced Pear.|35|14|370",
        "Roe Bowl|Salmon Roe,Nori,Avocado,Scallion|raw|2tbsp Roe, 5 Nori sheets, 1/2 Avocado. Make hand rolls.|25|4|280",
        "Turkey Meatballs|Ground Turkey,Spinach,Garlic,Marinara|bake|Bake 6oz turkey meatballs. Serve cold with marinara dip.|38|6|410",
        "Kimchi Steak|Flank,Kimchi,Cucumber,Garlic|sear|Sear steak; chill. Mix with 1c Kimchi and cucumber slices.|45|8|480",
        "Trout Salad|Smoked Trout,Endive,Dill,Garlic|raw|Fill endive leaves with flaked trout, dill, and garlic oil.|32|4|350",
        "Boar Strip Bowl|Wild Boar,Peppers,Garlic,Cilantro|sear|Sear 6oz boar. Toss with roasted peppers, garlic, and cilantro.|40|10|460",
        "Mackerel Fennel|Mackerel,Fennel,Orange,Garlic|raw|Shave fennel. Mix with mackerel, orange segments, and garlic.|30|6|340",
        "Chicken Thigh Jar|Chicken,Kale,Pumpkin Seeds,Garlic,Cranberries|raw|Massage kale with garlic. Layer with shredded chicken and seeds.|38|12|420",
        "Bison Snap Peas|Bison,Snap Peas,Mint,Garlic|sear|Sear 6oz bison. Toss with raw snap peas, mint, and garlic oil.|42|12|470"
    ],
    d: [
        "Sea Steak Mikuni|Red Tuna,Daikon,Garlic,Soy Sauce,Shichimi Togarashi|sear|Sear 6oz tuna with Togarashi crust. Serve on shredded daikon.|38|6|320",
        "Whole Branzino|Whole Branzino,Fennel,Garlic,Lemon,Thyme,Olive Oil|bake|Stuff branzino with lemon and herbs. Roast at 400¬∞F for 20 mins.|40|0|450",
        "Miso Glazed Cod|Cod,White Miso,Ginger,Garlic,Bok Choy|bake|Glaze 6oz cod with miso. Broil 8 mins. Serve with steamed bok choy.|35|8|340",
        "Harissa Shrimp|Shrimp,Harissa Paste,Garlic,Cauliflower|sear|Sear 6oz shrimp in harissa. Serve over garlic riced cauliflower.|30|6|290",
        "Ginger Beef Stir|Grass-fed Flank Steak,Ginger,Red Pepper,Garlic,Tamari|sear|Sear 6oz beef. Stir fry red peppers/snow peas with ginger/garlic.|45|10|460",
        "Saffron Halibut|Halibut,Saffron,Garlic,Cherry Tomatoes,Broth|poach|Poach 6oz fish in bone broth with tomatoes and saffron.|38|6|370",
        "Wild Salmon|Salmon,Asparagus,Garlic,Lemon|fish|Sear 6oz salmon. Roast entire bunch of asparagus in same pan.|42|6|480",
        "Clams Garlic|Clams,Garlic,Parsley,White Wine,Bone Broth|clams|Steam 1lb clams with 5 cloves garlic and 1c fresh parsley.|30|8|320",
        "Bison Chili|Ground Bison,Tomato,Garlic,Onion,Peppers,Dark Chocolate|stew|Slow simmer 6oz bison with high volume of peppers and 1sq chocolate.|48|18|560",
        "Steak Ribbons|Grass-fed Sirloin,Zucchini,Garlic|sear|Sear 6oz steak. Flash fry massive pile of spiralized zucchini.|50|6|580",
        "Garlic Scallops|Scallops,Spinach,Garlic,Turmeric|sear|Sear 6oz scallops. Wilt 4c spinach with garlic and turmeric.|35|4|340",
        "Herb Cod Roast|Cod,Tomato,Garlic,Lemon,Rosemary|bake|Roast 6oz cod surrounded by 2c cherry tomatoes and rosemary.|38|8|390",
        "Lamb Chops|Lamb Chops,Peas,Garlic,Mint|sear|Sear 6oz lamb. Mash 1c peas with mint and garlic for the side.|42|12|540",
        "Shrimp Asparagus|Shrimp,Asparagus,Garlic,Ginger|sear|Stir fry 6oz shrimp and an entire bunch of asparagus with ginger.|32|6|310",
        "Turkey Burgers|Turkey,Cabbage,Garlic,Mushrooms|sear|Sear 6oz turkey burgers. Serve with a massive 2c garlic-cabbage slaw.|40|6|430",
        "Venison Steak|Venison,Carrots,Garlic,Thyme|sear|Sear 6oz venison steak. Serve with 3 large roasted garlic carrots.|45|12|470",
        "Duck Kale|Duck Breast,Kale,Garlic|sear|Render duck breast. Saut√© 4c kale in the duck fat with garlic.|38|10|510",
        "Red Mussels|Mussels,Tomato,Garlic,Fennel|clams|Simmer 1lb mussels in a tomato, garlic, and fennel broth.|28|12|330",
        "Swordfish|Swordfish,Red Peppers,Garlic,Olives|sear|Grill 6oz swordfish. Top with a heavy roasted pepper and olive relish.|40|6|460",
        "Heart Stew|Beef Heart,Carrots,Garlic,Celery,Bone Broth|stew|Slow stew 6oz heart with 3 cups of carrots, celery, and garlic.|35|14|390",
        "Boar Balls|Wild Boar,Tomato Sauce,Garlic,Basil|stew|Simmer 6oz boar meatballs in a garlic-heavy fresh basil marinara.|42|8|490",
        "Halibut|Halibut,Green Beans,Garlic,Almonds|bake|Bake halibut. Steam 2c green beans; top with garlic and almonds.|38|6|410",
        "Lamb Kabobs|Lamb,Red Pepper,Garlic,Yogurt|sear|Grill lamb and pepper skewers. Serve with garlic Greek yogurt.|40|12|530",
        "Ribeye Ghee|Ribeye,Broccoli,Garlic,Ghee|sear|Sear 6oz ribeye in ghee. Serve with a whole head of roasted broccoli.|52|6|650",
        "Cod Papillote|Cod,Zucchini,Garlic,Lemon|bake|Bake cod in parchment on a bed of thin-sliced zucchini and lemon.|35|6|360",
        "Scampi Zoodles|Shrimp,Zucchini,Garlic,Parsley|sear|Saut√© 6oz shrimp. Flash fry 3 spiralized zucchinis with parsley.|30|8|320",
        "Ancestral Smash|Beef,Beef Liver,Pickles,Garlic|sear|Smash 6oz beef/liver blend patties. Serve with 2 large pickles.|40|2|450",
        "Snapper Lime|Snapper,Cabbage,Garlic,Lime|bake|Bake whole snapper. Serve with a 3c lime and garlic cabbage slaw.|38|4|390",
        "Beef Tongue|Beef Tongue,Cabbage,Garlic,Mustard|stew|Sear tongue. Saut√© a massive portion of cabbage wedges with mustard.|32|6|380",
        "Rabbit Leeks|Rabbit,Leeks,Garlic,Mushrooms,Bone Broth|stew|Braise 6oz rabbit with 3 sliced leeks and garlic in bone broth.|35|8|340"
    ],
    s: [
        "Double Scoop Shake|Whey Isolate|shake|Mix 2 scoops post-workout.|50|2|240",
        "Turkey Roll-Ups|Turkey, Swiss|raw|Roll 6oz turkey around swiss.|40|2|240",
        "Skyr Bowl|Skyr, Berries|raw|1c Skyr with 1/4c Blueberries.|28|12|160",
        "Tuna Cup|Tuna, Celery|raw|Mix 1 can tuna with mustard. Scoop with celery.|40|2|180",
        "Steak Bites|Cooked Sirloin|raw|4oz cold leftover steak.|30|0|220",
        "Shrimp Cocktail|Cooked Shrimp,Cocktail Sauce|raw|4oz Cooked Shrimp ‚Ä¢ 1 tbsp Sauce|24|4|110",
        "Greek Yogurt Bowl|Greek Yogurt,Berries,Honey,Walnuts|raw|1 Cup Yogurt ‚Ä¢ 1/2 Cup Berries ‚Ä¢ 1 tsp Honey|22|18|240",
        "Beef Jerky|Grass-fed Beef Jerky|raw|2oz Grass-fed Beef Jerky|25|4|180",
        "Cottage Cheese|Cottage Cheese,Pineapple,Chia Seeds|raw|1 Cup Cottage Cheese ‚Ä¢ 1/2 Cup Pineapple ‚Ä¢ 1 tbsp Chia|24|14|210",
        "Sardines|Sardines,Olive Oil,Flax Crackers|raw|1 Tin Sardines ‚Ä¢ 2 Flax Crackers|22|0|190"
    ]
};

const pDB = {
    "HEAVY LIFT": [{t:"PRE",h:"Theragun",d:"Glutes, Quads, Hams. 30s each."},{t:"GYM",h:"Heavy Lift",d:"Main compound movement."},{t:"POST",h:"Chair+Sauna",d:"20m Zero-Grav + 20m Sauna."}],
    "BOXING": [{t:"PRE",h:"Mobility",d:"Rotator cuffs & Calves."},{t:"GYM",h:"Boxing",d:"High intensity rounds."},{t:"POST",h:"Normatec",d:"Flush legs. NO SAUNA."}],
    "REFORM": [{t:"PRE",h:"Sweep",d:"Light full body percussion."},{t:"GYM",h:"Reform",d:"Time under tension."},{t:"POST",h:"Sauna",d:"20m HGH Boost."}],
    "REFORM/YOGA": [{t:"PRE",h:"Sweep",d:"Light full body percussion."},{t:"GYM",h:"Yoga",d:"Deep fascial release."},{t:"POST",h:"Heat",d:"Sauna or Thera Knee Heat."}],
    "CS4": [{t:"PRE",h:"Hydrate",d:"Electrolytes."},{t:"GYM",h:"CS4",d:"Cardio Strength 4."},{t:"POST",h:"Contrast",d:"Sauna + Cold or Knee Contrast."}],
    "RELAX": [{t:"PRE",h:"Walk",d:"Light movement."},{t:"GYM",h:"Relax",d:"Active recovery."},{t:"POST",h:"Massage",d:"Chair or Thera Knee Heat."}]
};

const rDB = {
    "Sea Moss": ["92 Minerals", "2 TBSP Fasted.", "Thyroid & Gut support."],
    "Kombucha": ["Probiotic", "4 OZ post-Lunch.", "Enzyme support."],
    "Aqua Chair": ["Hydro-Massage", "Align body to zero-gravity.", "Jets to glutes and lats.", "20 Min Duration."],
    "Sauna": ["HSP Induction", "185¬∞F Range.", "20 Mins total. "],
    "Theragun": ["Percussive", "Float over muscles.", "2m per limb."],
    "Normatec": ["Compression", "Level 4 Intensity.", "30m Lymphatic flush."]
};

const jDB = {
    "PLASMA FLUSH Juice": ["Recovery", "3c Watermelon, 1 Lime", 1, 32, 140],
    "TITAN RED Juice": ["Endurance", "2 Beets, 2 Carrots, Pom", 3, 42, 185],
    "ZENITH GREEN Juice": ["Alkalizer", "4 Kale, 1 Cucumber", 4, 18, 90],
    "APOLLO GOLD Juice": ["Anti-Inflammatory", "2 Pears, Turmeric", 1, 45, 195]
};
const uH = {
    'J': {
        past: { bf: 17.9, m: 99.4, w: 210.8, vf: 11, bmr: 1950, age: 38 },
        now: { bf: 19.0, m: 99.0, w: 217.0, vf: 10, bmr: 2050, age: 34 },
        goal: { bf: 15.0, m: 105.0, w: 212.0, vf: 7, bmr: 2100, age: 30 },
        labs: {
            vo2: { val: 45, goal: 55, unit: "ml/kg", name: "VO2 Max" },
            apob: { val: 95, goal: 60, unit: "mg/dL", name: "ApoB", lowerIsBetter: true },
            hba1c: { val: 5.4, goal: 5.0, unit: "%", name: "HbA1c", lowerIsBetter: true }
        },
        tests: {
            hang: { val: 85, goal: 120, unit: "s", name: "Dead Hang" },
            sit: { val: 60, goal: 120, unit: "s", name: "Wall Sit" },
            breath: { val: 45, goal: 60, unit: "s", name: "CO2 Hold" }
        },
        log: [
            { d: "Dec 25, 2025", w: 217.0, bf: 19.0, m: 99.0 },
            { d: "Oct 30, 2024", w: 210.8, bf: 17.9, m: 99.4 },
            { d: "Sep 01, 2024", w: 208.0, bf: 17.5, m: 98.0 }
        ]
    },
    'S': {
        past: { bf: 33.0, m: 50.0, w: 136.1, vf: 8, bmr: 1300, age: 40 },
        now: { bf: 36.1, m: 49.2, w: 141.5, vf: 9, bmr: 1250, age: 38 },
        goal: { bf: 28.0, m: 55.0, w: 138.0, vf: 5, bmr: 1400, age: 32 },
        labs: {
            vo2: { val: 32, goal: 45, unit: "ml/kg", name: "VO2 Max" },
            apob: { val: 105, goal: 70, unit: "mg/dL", name: "ApoB", lowerIsBetter: true },
            hba1c: { val: 5.6, goal: 5.0, unit: "%", name: "HbA1c", lowerIsBetter: true }
        },
        tests: {
            hang: { val: 40, goal: 60, unit: "s", name: "Dead Hang" },
            sit: { val: 45, goal: 90, unit: "s", name: "Wall Sit" },
            breath: { val: 30, goal: 45, unit: "s", name: "CO2 Hold" }
        },
        log: [
            { d: "Dec 25, 2025", w: 141.5, bf: 36.1, m: 49.2 },
            { d: "Oct 30, 2024", w: 136.1, bf: 33.0, m: 50.0 }
        ]
    }
};

const hDB = {
    b: "Festive Brunch|Protein Waffles, Turkey Bacon, Eggs, Berries|griddle|Prioritize protein first, then enjoy the treats. Happy Holidays!|35|40|500",
    l: "The Holiday Feast|Lean Roast Meat, Green Beans, Sweet Potato|roast|Load up on roast meat and green veggies. Go easy on the gravy.|50|40|600",
    d: "Leftovers Plate|Lean Protein, Veggies|raw|Keep it light to help digestion before sleep.|30|10|300"
};

let user = 'J', offset = 0, snackLog = {}, currentSlot = 0, selDate = getCaDate();

function getCaDate() { 
    let d = new Date(new Date().toLocaleString("en-US", {timeZone: "America/Los_Angeles"})); 
    d.setHours(12, 0, 0, 0); 
    return d; 
}

function getDateKey(d) { 
    const year = d.getFullYear();
    const month = String(d.getMonth() + 1).padStart(2, '0');
    const day = String(d.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
}

function stableSeed(s) {
    let h = 0;
    for(let i = 0; i < s.length; i++) h = Math.imul(31, h) + s.charCodeAt(i) | 0;
    return Math.abs(h);
}

function saveData() { 
    localStorage.setItem('centurion_v6_data', JSON.stringify({
        user, snackLog, selDate: selDate.toISOString(), offset
    })); 
}

function loadData() {
    const raw = localStorage.getItem('centurion_v6_data');
    if (raw) {
        const data = JSON.parse(raw);
        user = data.user || 'J'; 
        snackLog = data.snackLog || {};
        if(data.selDate) selDate = new Date(data.selDate);
        offset = data.offset || 0;
        syncOffsetToSelection();
    }
}
// --- CALENDAR LOGIC ---
function getMon(o) {
    let d = getCaDate();
    d.setDate(d.getDate() - (d.getDay() === 0 ? 6 : d.getDay() - 1));
    d.setDate(d.getDate() + (o * 7));
    d.setHours(12, 0, 0, 0);
    return d;
}

function syncOffsetToSelection() {
    let today = getCaDate();
    today.setHours(0,0,0,0);
    let todayMon = new Date(today);
    todayMon.setDate(today.getDate() - (today.getDay() === 0 ? 6 : today.getDay() - 1));
    let selMon = new Date(selDate);
    selMon.setDate(selDate.getDate() - (selDate.getDay() === 0 ? 6 : selDate.getDay() - 1));
    selMon.setHours(0,0,0,0);
    offset = Math.round((selMon - todayMon) / (7 * 864e5));
}

function changeW(direction) {
    let viewMon = getMon(offset); 
    if (direction > 0) selDate = new Date(viewMon.getTime() + (7 * 864e5)); 
    else selDate = new Date(viewMon.getTime() - 864e5);
    selDate.setHours(12, 0, 0, 0);
    syncOffsetToSelection();
    render();
    saveData();
}

// --- GROCERY & BIO LOGIC ---
function generateGroceryList() {
    const modalBody = document.getElementById('mBody');
    document.getElementById('mImgContainer').innerHTML = ''; 
    document.getElementById('mTitle').innerText = "SMART GROCERY SCAN";
    let rawItems = [];
    const mon = getMon(offset);
    for(let i=0; i<7; i++) {
        let d = new Date(mon.getTime() + i*864e5);
        let id = Math.abs(stableSeed(d.toDateString()));
        let meals = [mDB.b[id % 30], mDB.l[id % 30], mDB.d[id % 30]];
        meals.forEach(m => rawItems.push(...m.split('|')[1].split(',')));
    }
    let meatList = {}, freshList = {};
    const meatKeys = ['Bison', 'Steak', 'Beef', 'Chicken', 'Turkey', 'Salmon', 'Cod', 'Tuna', 'Sardines', 'Lamb', 'Boar', 'Trout', 'Duck'];
    rawItems.forEach(item => {
        let name = item.trim();
        let target = meatKeys.some(k => name.includes(k)) ? meatList : freshList;
        target[name] = (target[name] || 0) + 1;
    });
    let html = `<div class="grocery-cat">ü•© PROTEINS</div>`;
    Object.keys(meatList).sort().forEach(k => html += `<div class="grocery-item">‚¨ú <span>${k} (x${meatList[k]})</span></div>`);
    html += `<div class="grocery-cat">ü•¶ PRODUCE & FRESH</div>`;
    Object.keys(freshList).sort().forEach(k => html += `<div class="grocery-item">‚¨ú <span>${k} (x${freshList[k]})</span></div>`);
    modalBody.innerHTML = html;
    document.getElementById('masterModal').style.display = 'block';
}

function openBio() {
    const modalBody = document.getElementById('mBody');
    document.getElementById('mTitle').innerText = "LONGEVITY SCAN";
    document.getElementById('mImgContainer').innerHTML = '';
    modalBody.innerHTML = `<div class="tabs" style="margin-bottom:20px;"><div id="btPhys" class="tab active" onclick="renderBioTab('phys')">BODY</div><div id="btLabs" class="tab" onclick="renderBioTab('labs')">LABS</div><div id="btTests" class="tab" onclick="renderBioTab('tests')">TESTS</div></div><div id="bioContentArea"></div>`;
    renderBioTab('phys');
    document.getElementById('masterModal').style.display = 'block';
}

function renderBioTab(tab) {
    const u = uH[user];
    const target = document.getElementById('bioContentArea');
    document.querySelectorAll('[id^="bt"]').forEach(t => t.classList.remove('active'));
    document.getElementById('bt' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('active');
    let html = '';
    const items = tab === 'phys' ? [{name:"Body Fat",k:"bf",unit:"%"},{name:"Muscle",k:"m",unit:"lb"}] : Object.values(u[tab]);
    items.forEach(m => {
        const val = tab === 'phys' ? u.now[m.k] : m.val;
        const goal = tab === 'phys' ? u.goal[m.k] : m.goal;
        const pct = Math.min((val/goal)*100, 100);
        html += `<div class="bio-section"><div class="bio-title"><span>${m.name}</span><span>Goal: ${goal}${m.unit||''}</span></div><div class="bar-track"><div class="bar-fill now" style="width:${pct}%"></div></div></div>`;
    });
    target.innerHTML = html;
}

// --- RENDER & IMAGES ---
function openR(n, i, a, t) {
    document.getElementById('mTitle').innerText = n;
    const container = document.getElementById('mImgContainer');
    container.innerHTML = '<div class="img-loader">‚ú® Plating...</div>';
    const clean = n.split('|')[0].replace(/[^a-zA-Z ]/g, "").trim();
    const img = document.createElement("img");
    img.className = "meal-img";
    const timer = setTimeout(() => { if (!img.complete) img.src = "https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=800&q=80"; }, 3600000); 
    img.onload = () => { clearTimeout(timer); container.innerHTML = ""; container.appendChild(img); setTimeout(() => { img.style.opacity = "1"; img.style.filter = "blur(0)"; }, 50); };
    img.src = `https://image.pollinations.ai/prompt/${encodeURIComponent(clean)}?width=800&height=600&seed=${stableSeed(clean)}&nologo=true`;
    document.getElementById('mBody').innerHTML = `<p>${t}</p>`;
    document.getElementById('masterModal').style.display = 'block';
}

function render() {
    const start = getMon(offset);
    const tabs = document.getElementById('dayTabs'); tabs.innerHTML = '';
    for(let i=0; i<7; i++) {
        let d = new Date(start.getTime() + i*864e5);
        const active = getDateKey(d) === getDateKey(selDate);
        const tab = document.createElement('div');
        tab.className = 'tab' + (active ? ' active' : '');
        tab.innerHTML = `${["MON","TUE","WED","THU","FRI","SAT","SUN"][i]}<br>${d.getDate()}`;
        tab.onclick = () => { selDate = d; render(); saveData(); };
        tabs.appendChild(tab);
        if(active) showDay(d, i);
    }
}

function showDay(dObj, idx) {
    const id = Math.abs(stableSeed(dObj.toDateString()));
    const snacks = snackLog[getDateKey(dObj)] || [null, null];
    const b = mDB.b[id % 30].split('|'), l = mDB.l[id % 30].split('|'), dn = mDB.d[id % 30].split('|');
    const sc = user==='J'?1:0.6;
    let p = Math.round((parseInt(b[4])+parseInt(l[4])+parseInt(dn[4]))*sc);
    let c = Math.round((parseInt(b[5])+parseInt(l[5])+parseInt(dn[5]))*sc);
    let sH = '<div class="snack-grid">';
    snacks.forEach((sIdx, i) => {
        if(sIdx === null) sH += `<div class="snack-slot" onclick="openSnackSelector(${i})">Ôºã ADD</div>`;
        else { const s = mDB.s[sIdx].split('|'); p += parseInt(s[4]); c += parseInt(s[5]); sH += `<div class="snack-slot filled"><span>${s[0]}</span></div>`; }
    });
    document.getElementById('dayContent').innerHTML = `<div class="card"><div class="label">üç≥ Breakfast</div><div class="value" onclick="openR('${b[0]}','${b[1]}','','${b[3]}')">${b[0]}</div><div class="label">ü•ó Lunch</div><div class="value" onclick="openR('${l[0]}','${l[1]}','','${l[3]}')">${l[0]}</div><div class="label">üçΩÔ∏è Dinner</div><div class="value" onclick="openR('${dn[0]}','${dn[1]}','','${dn[3]}')">${dn[0]}</div><div class="label">ü•ú Snacks</div>${sH}</div><div class="macro-dashboard"><div class="macro-row"><div class="macro-label"><span>PROTEIN</span><span>${p}g</span></div><div class="macro-bg"><div class="macro-fill" style="width:${p/1.65}%; background:var(--g-pro)"></div></div></div><div class="macro-row"><div class="macro-label"><span>FIBER (Est)</span><span>${Math.round(c*0.2)}g</span></div><div class="macro-bg"><div class="macro-fill" style="width:${c*0.8}%; background:var(--g-fib)"></div></div></div></div><button class="nav-btn" style="width:100%; color:var(--gold)" onclick="generateGroceryList()">üõí VIEW WEEKLY GROCERY LIST</button>`;
}

function openSnackSelector(slot) {
    currentSlot = slot; let h = '';
    mDB.s.forEach((s, idx) => { h += `<div class="value" onclick="applySnack(${idx})">${s.split('|')[0]}</div>`; });
    document.getElementById('mTitle').innerText = "SELECT SNACK";
    document.getElementById('mImgContainer').innerHTML = '';
    document.getElementById('mBody').innerHTML = h;
    document.getElementById('masterModal').style.display = 'block';
}

function applySnack(idx) { 
    const dk = getDateKey(selDate);
    if(!snackLog[dk]) snackLog[dk]=[null,null]; 
    snackLog[dk][currentSlot] = idx; closeM(); render(); saveData(); 
}
function resetD() { offset=0; selDate=getCaDate(); render(); saveData(); }
function switchU(uID){ user=uID; document.querySelectorAll('.u-badge').forEach(b=>b.classList.remove('active')); document.getElementById('b'+uID.toLowerCase()).classList.add('active'); render(); saveData(); }
function closeM(){ document.getElementById('masterModal').style.display='none' }

window.onload = () => { loadData(); render(); };
</script>
</body>
</html>