<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>v400 Meal Feed</title>

<style>
:root{
  --bg:#000;
  --card:#0f0f0f;
  --text:#fff;
  --muted:#888;
  --gold:#d4af37;
}

body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
}

.feed{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
  gap:16px;
  padding:16px;
}

.card{
  background:var(--card);
  border-radius:14px;
  overflow:hidden;
  cursor:pointer;
  transition:transform .15s ease;
}
.card:hover{transform:scale(1.02)}

.img-wrap{
  position:relative;
  aspect-ratio:4/3;
  background:#111;
}
.img-wrap::after{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(to bottom,transparent 60%,rgba(0,0,0,.8));
}
.img-wrap img{
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:opacity .4s ease;
}
.img-wrap img.loaded{opacity:1}

.card-body{
  padding:14px;
}
.card-title{
  font-weight:700;
  font-size:1rem;
}
.card-meta{
  font-size:.75rem;
  color:var(--muted);
  margin-top:4px;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}
.modal.open{display:flex}
.modal-box{
  background:#111;
  max-width:520px;
  width:92%;
  border-radius:14px;
  overflow:hidden;
}
.modal-box img{
  width:100%;
  display:block;
}
.modal-content{
  padding:16px;
}
.modal-close{
  position:absolute;
  top:16px;
  right:16px;
  color:#fff;
  font-size:1.5rem;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="feed" id="feed"></div>

<div class="modal" id="modal">
  <div class="modal-box">
    <div class="modal-close" onclick="closeModal()">✕</div>
    <img id="modalImg">
    <div class="modal-content">
      <h2 id="modalTitle"></h2>
      <p id="modalMeta"></p>
    </div>
  </div>
</div>

<script>
/* ========= DATA ========= */
const FEED = [
  { name:"Grilled Salmon Bowl", meta:"High Protein • Omega-3" },
  { name:"Steak & Sweet Potato", meta:"Strength Day Fuel" },
  { name:"Mediterranean Chicken", meta:"Longevity Focus" },
  { name:"Shrimp Avocado Plate", meta:"Low Inflammation" },
  { name:"Grass-Fed Beef Bowl", meta:"Muscle Support" }
];

/* ========= IMAGE BUILDER ========= */
function buildImgURL(name){
  const prompt = encodeURIComponent(
    name + " plated food professional photography natural lighting"
  );
  return `https://image.pollinations.ai/prompt/${prompt}?width=800&height=600&seed=${hash(name)}&enhance=false&nologo=true`;
}

/* Stable seed (prevents regeneration delay) */
function hash(str){
  let h=0;
  for(let i=0;i<str.length;i++) h=((h<<5)-h)+str.charCodeAt(i);
  return Math.abs(h);
}

/* ========= FEED RENDER ========= */
const feedEl=document.getElementById('feed');

FEED.forEach(item=>{
  const card=document.createElement('div');
  card.className='card';

  const imgWrap=document.createElement('div');
  imgWrap.className='img-wrap';

  const img=document.createElement('img');
  img.src=buildImgURL(item.name);
  img.loading='lazy';
  img.onload=()=>img.classList.add('loaded');

  imgWrap.appendChild(img);

  const body=document.createElement('div');
  body.className='card-body';
  body.innerHTML=`
    <div class="card-title">${item.name}</div>
    <div class="card-meta">${item.meta}</div>
  `;

  card.appendChild(imgWrap);
  card.appendChild(body);

  card.onclick=()=>openModal(item,img.src);

  feedEl.appendChild(card);
});

/* ========= MODAL ========= */
function openModal(item,src){
  document.getElementById('modalImg').src=src;
  document.getElementById('modalTitle').innerText=item.name;
  document.getElementById('modalMeta').innerText=item.meta;
  document.getElementById('modal').classList.add('open');
}
function closeModal(){
  document.getElementById('modal').classList.remove('open');
}
</script>

</body>
</html>