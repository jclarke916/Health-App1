<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Centurion | v108 Absolute Master</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #000000; --card-bg: #111111; --text-main: #E5E4E2; --text-dim: #888888;
            --accent-gold: #D4AF37; --accent-silver: #C0C0C0; --glute-pink: #d63384;
            --carb-high: #ff9100; --carb-low: #00b0ff;
        }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-dark); color: var(--text-main); margin: 0; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { max-width: 1000px; width: 100%; position: relative; }
        header { text-align: center; margin-bottom: 25px; border-bottom: 1px solid #333; padding-bottom: 20px; }
        h1 { font-weight: 300; letter-spacing: 2px; text-transform: uppercase; background: linear-gradient(to right, #E5E4E2, #888888); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
        .profile-badges { display: flex; justify-content: center; gap: 10px; margin-top: 15px; flex-wrap: wrap; }
        .badge { background: #1a1a1a; padding: 8px 16px; border-radius: 4px; border: 1px solid #333; font-size: 0.7rem; color: var(--accent-silver); text-transform: uppercase; letter-spacing: 1px; cursor: pointer; }
        .badge:hover { border-color: var(--accent-gold); color: var(--accent-gold); }
        .status-bar { text-align: center; color: var(--text-dim); font-size: 0.8rem; margin: 15px 0; text-transform: uppercase; letter-spacing: 1.5px; }
        .controls { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .nav-btn { background: var(--card-bg); border: 1px solid #333; color: var(--text-main); padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
        .tabs { display: flex; justify-content: space-between; background: var(--card-bg); padding: 5px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #222; overflow-x: auto; }
        .tab-btn { background: none; border: none; color: #555; padding: 10px; cursor: pointer; flex: 1; font-size: 0.75rem; display: flex; flex-direction: column; align-items: center; transition: 0.3s; }
        .tab-btn span { display: block; font-size: 0.6rem; opacity: 0.7; margin-top: 4px; }
        .tab-btn.active { color: var(--accent-gold); background: rgba(255,255,255,0.03); border-radius: 4px; }
        .card { background: var(--card-bg); border-radius: 12px; padding: 30px; border: 1px solid #222; position: relative; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .card::before { content: ""; position: absolute; top: 0; left: 0; width: 4px; height: 100%; background: var(--accent-gold); }
        .label { color: var(--accent-silver); font-size: 0.6rem; text-transform: uppercase; letter-spacing: 2px; font-weight: 700; margin-bottom: 5px; }
        .value { font-size: 1.1rem; margin-bottom: 15px; color: #fff; cursor: pointer; border-bottom: 1px solid transparent; display: inline-block; }
        .value:hover { color: var(--accent-gold); border-bottom-color: var(--accent-gold); }
        .pb-mini { font-size: 0.6rem; padding: 4px 8px; border-radius: 3px; background: #222; border: 1px solid #444; color: #aaa; text-transform: uppercase; font-weight: 800; margin-right: 5px; display: inline-block; margin-top: 5px; }
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); backdrop-filter: blur(8px); overflow-y: auto; }
        .modal-content { background: #050505; margin: 5% auto; padding: 30px; border: 1px solid #333; width: 90%; max-width: 650px; border-radius: 12px; }
        .macro-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin: 20px 0; background: #0a0a0a; padding: 15px; border-radius: 8px; border: 1px solid #222; }
        .macro-item { text-align: center; }
        .macro-label { font-size: 0.65rem; color: #888; text-transform: uppercase; }
        .macro-val { font-size: 1rem; color: #fff; font-weight: 700; }
        .chef-steps p { margin-bottom: 15px; color: #ccc; font-size: 0.95rem; line-height: 1.6; position: relative; padding-left: 30px; }
        .chef-steps p::before { counter-increment: step; content: counter(step); position: absolute; left: 0; top: 2px; background: var(--accent-gold); color: #000; width: 20px; height: 20px; border-radius: 50%; font-size: 0.7rem; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .sophia-mod-box { background: rgba(214, 51, 132, 0.1); border: 1px solid var(--glute-pink); padding: 15px; border-radius: 6px; margin-top: 20px; }
        .sophia-mod-title { color: var(--glute-pink); font-size: 0.8rem; font-weight: 800; text-transform: uppercase; margin-bottom: 5px; }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>THE CENTURION</h1>
        <div class="profile-badges">
            <div class="badge" onclick="openModal('profileModal')">ğŸ§”ğŸ¾â€â™‚ï¸ JERMAINE</div>
            <div class="badge" onclick="openModal('profileModal')">ğŸ‘©ğŸ¾â€ğŸ¦± SOPHIA</div>
        </div>
    </header>

    <div class="status-bar" id="dateHeader">Syncing...</div>

    <div class="controls">
        <button class="nav-btn" onclick="changeWeek(-1)">PREV</button>
        <button class="nav-btn" onclick="resetToCurrent()">TODAY</button>
        <button class="nav-btn" onclick="changeWeek(1)">NEXT</button>
    </div>

    <div class="tabs" id="dayTabs"></div>
    <div id="dayContent"></div>
</div>

<div id="recipeModal" class="modal">
    <div class="modal-content">
        <span onclick="closeModal('recipeModal')" style="float:right; cursor:pointer; font-size:24px; color:#555;">&times;</span>
        <h2 id="modalTitle" style="color:#fff; margin-bottom:5px;"></h2>
        <div id="modalTime" style="color:var(--accent-gold); font-size:0.85rem; font-weight:bold; margin-bottom:15px;"></div>
        
        <div class="macro-grid">
            <div class="macro-item"><div class="macro-label">Protein</div><div class="macro-val" id="modalP"></div></div>
            <div class="macro-item"><div class="macro-label">Carbs</div><div class="macro-val" id="modalC"></div></div>
            <div class="macro-item"><div class="macro-label">Fats</div><div class="macro-val" id="modalF"></div></div>
        </div>

        <div style="color:var(--accent-gold); font-size:0.85rem; font-weight:bold; text-transform:uppercase; margin-bottom:12px; letter-spacing:1px;">Chef's Preparation</div>
        <div id="modalSteps" class="chef-steps" style="counter-reset: step;"></div>

        <div class="sophia-mod-box">
            <div class="sophia-mod-title">ğŸ‘ Sophia's Mod & Portions</div>
            <div id="modalMod" style="color:#e5e4e2; font-size:0.85rem; line-height:1.4;"></div>
        </div>
    </div>
</div>

<div id="profileModal" class="modal">
    <div class="modal-content">
        <span onclick="closeModal('profileModal')" style="float:right; cursor:pointer; font-size:24px; color:#555;">&times;</span>
        <h2 style="color:var(--accent-gold);">Centurion Biometrics</h2>
        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px;">
            <div class="card" style="padding:15px;">ğŸ§”ğŸ¾â€â™‚ï¸ Jermaine<br><span style="font-size:0.75rem; color:#888;">Height: 6'4"<br>Weight: 210.8 lbs<br>Target: 195 lbs</span></div>
            <div class="card" style="padding:15px;">ğŸ‘©ğŸ¾â€ğŸ¦± Sophia<br><span style="font-size:0.75rem; color:#888;">Height: 5'2"<br>Weight: 136.1 lbs<br>Target: 125 lbs</span></div>
        </div>
    </div>
</div>

<script>
    const recipeDB = {
        "Grilled Branzino (Whole)": { t: "25 mins", p: "45g", c: "0g", f: "15g", steps: ["Stuff cleaned fish cavity with fresh lemon slices, parsley, and garlic.", "Brush skin liberally with ghee to ensure max non-stick and healthy fat saturation.", "Roast in oven at 400Â°F for exactly 15 mins.", "Set oven to Broil for final 2 mins Side A and 1 min Side B to crisp the skin."], mod: "Standard portion; ensure all scales are removed. Sophia: 1.5 palms protein." },
        "Garlic Ghee Lobster Tails": { t: "20 mins", p: "40g", c: "2g", f: "15g", steps: ["Split lobster shells lengthwise to expose the meat fully.", "Brush meat liberally with garlic-infused ghee and sea salt.", "Place on hot grill or cast iron flesh-side down for 5 mins Side A.", "Flip and grill for 3 mins Side B until opaque.", "Serve with grilled asparagus."], mod: "1 tail for Sophia (1.5 palms protein); 2 tails for Jermaine." },
        "Cilantro-Lime Shrimp Tacos": { t: "15 mins", p: "35g", c: "15g", f: "10g", steps: ["Pat shrimp dry. SautÃ© with 1 cup finely diced bell peppers (Vitamin C boost).", "High heat sear shrimp for exactly 2 mins Side A, then 1 min Side B.", "Mix Greek Yogurt and lime (Sub for sour cream) for probiotic crema.", "Assemble on warmed Siete tortillas with cabbage slaw."], mod: "Sophia use lettuce wraps instead of tortillas; Jermaine 2 palms protein." },
        "Classic Peruvian Ceviche": { t: "20 mins", p: "40g", c: "12g", f: "2g", steps: ["Cube fresh Snapper or Bass into uniform 1/2 inch pieces.", "Submerge in lime juice and chill for exactly 15 mins to cure protein enzymes.", "Toss cured fish with rinsed onions, chili, and cilantro.", "Plate with exactly 1 slice boiled sweet potato."], mod: "Sophia skip potato for zero-carb metabolic boost." },
        "Southwest Bison Scramble": { t: "12 mins", p: "41g", c: "11g", f: "10g", steps: ["Brown 4oz ground bison with 1/2 cup finely diced bell peppers (Iron bioavailability boost).", "Pour in whisked egg whites (4 for Jermaine, 3 for Sophia).", "Scramble until fully set (approx 3-4 mins).", "Top with a dollop of Greek Yogurt instead of sour cream."], mod: "Sophia: 1.5 palms protein; cook eggs well-done." },
        "SF Style Cioppino (Mussels)": { t: "45 mins", p: "40g", c: "12g", f: "8g", steps: ["SautÃ© fennel and garlic in ghee until fragrant.", "Simmer tomato-based broth for exactly 20 mins to develop flavor.", "Add cleaned mussels and small white fish pieces.", "Cover for 5 mins until all mussels have opened fully."], mod: "High thyroid support from iodine. Sophia: 1.5 palms protein." },
        "Sea Moss & Triple-Protein Smoothie": { t: "5 mins", p: "45g", c: "25g", f: "10g", steps: ["Add 1/2 cup frozen blackberries and liquid base to the blender.", "Add 2tbsp Sea Moss gel and protein powders.", "Blend on high for exactly 60 seconds until fully emulsified."], mod: "Standard portion; use water base for Sophia to keep fats low." },
        "Venison Au Poivre": { t: "20 mins", p: "50g", c: "2g", f: "8g", steps: ["Crush peppercorns and press firmly into venison medallions.", "Sear in ghee for 3 mins Side A on high heat.", "Flip and cook 3 mins Side B (Rare/Med-Rare is best).", "Deglaze pan with beef broth for a nutrient-dense sauce."], mod: "Sophia: 1.5 palms protein; very lean iron source." },
        "Ostrich Steaks w/ Berry Sauce": { t: "15 mins", p: "50g", c: "5g", f: "5g", why: "Leanest red meat.", steps: ["Sear ostrich fillets in hot pan with ghee for 3 mins Side A.", "Flip and sear for 3 mins Side B (Keep rare/med-rare).", "Simmer fresh blackberries and balsamic in pan juices until thick.", "Rest meat 5 mins before slicing."], mod: "Sophia: 1.5 palms protein; Jermaine: 2 palms." },
        "Dungeness Crab & Avocado Tower": { t: "15 mins", p: "35g", c: "15g", f: "12g", steps: ["Mix 6oz lump crab with lime juice, cilantro, and diced bell peppers.", "Dice avocado and mango into 1/4 inch cubes.", "Use a ring mold to layer: Avocado base, mango middle, crab top.", "Serve with microgreens and a side of sliced cucumber."], mod: "Standard portion; high enzyme recovery meal." },
        "Miso Glazed Black Cod": { t: "20 mins", p: "40g", c: "8g", f: "15g", steps: ["Glaze cod fillet with white miso paste and coconut aminos.", "Roast at 400Â°F for exactly 12-14 mins until flaky.", "Steam bok choy during the final 5 mins of cook time."], mod: "Limit glaze to 1 tbsp. Sophia: 1.5 palms protein." },
        "Greek Grilled Octopus (Htapodi)": { t: "1hr 10m", p: "30g", c: "5g", f: "12g", steps: ["Braise octopus tentacles in water/vinegar/peppercorns for 45 mins until tender.", "Marinate in olive oil and oregano.", "Grill on HIGH heat for 3 mins per side until charred and crispy."], mod: "Sophia: 1.5 palms protein; high zinc for recovery." },
        "Sriracha Yogurt Bison Tacos": { t: "20 mins", p: "42g", c: "15g", f: "12g", steps: ["Brown ground bison with 1 cup finely diced bell peppers (Vitamin C synergy).", "Mix Greek Yogurt with sriracha and lime juice (Swap for sour cream).", "Warm Siete tortillas in a dry pan.", "Assemble with meat, yogurt crema, and fresh cilantro."], mod: "Sophia: use lettuce cups; Jermaine: 3 tortillas." },
        "Duck & Mushroom Ragu": { t: "60 mins", p: "45g", c: "35g", f: "22g", steps: ["Brown ground duck for 10 mins; drain all excess fat completely.", "SautÃ© shiitake mushrooms until golden.", "Simmer with marinara for 45 mins.", "Serve over chickpea pasta."], mod: "Jermaine: 2 palms protein; Sophia: 1.5 palms." },
        "Bison Steak & Eggs": { t: "15 mins", p: "55g", c: "5g", f: "15g", steps: ["Sear 6oz bison steak in hot pan for 3 mins Side A, 3 mins Side B.", "Fry eggs in remaining pan juices.", "Serve with a grilled tomato slice."], mod: "Sophia: 3oz steak + 1 egg; Jermaine: 2 palms protein." },
        "Japanese Tamagoyaki Scramble": { t: "15 mins", p: "32g", c: "2g", f: "15g", steps: ["Whisk eggs with dashi stock and coconut aminos.", "Pour into hot rectangular pan.", "Fold in thin layers slowly to build texture.", "Top with nori strips."], mod: "Sophia: 3 eggs; Jermaine: 4 eggs." },
        "Pan-Seared Sea Bass w/ Fennel": { t: "25 mins", p: "40g", c: "8g", f: "18g", steps: ["Pat sea bass dry; sear skin-side down for 5 mins Side A in ghee.", "Flip and finish for 3 mins Side B.", "Serve over raw shaved fennel bulb tossed in lemon juice."], mod: "Sophia: skip added butter; 1.5 palms protein." },
        "Lean Beef Pho (Konjac Noodles)": { t: "30 mins", p: "42g", c: "5g", f: "8g", steps: ["Simmer beef bone broth with star anise and ginger for 20 mins.", "Rinse Konjac noodles thoroughly.", "Place raw beef eye of round slices over noodles in a bowl.", "Pour boiling broth over meat to cook instantly."], mod: "Konjac is carb-free; standard portion." },
        "Bison Laab (Thai Meat Salad)": { t: "20 mins", p: "40g", c: "8g", f: "10g", steps: ["Brown bison with diced bell peppers for 8 mins.", "Toss with lime juice, fish sauce, mint, and shallots.", "Serve in large romaine lettuce cups."], mod: "High protein recovery meal; standard portions." },
        "Ginger-Turkey Cabbage Potstickers": { t: "25 mins", p: "38g", c: "8g", f: "12g", steps: ["Mix ground turkey with ginger and garlic.", "Blanch cabbage leaves to soften.", "Roll meat in leaves; sear 2 mins Side A, 2 mins Side B.", "Steam with a splash of water for 5 mins."], mod: "Standard portion; zero flour wrappers." },
        "Mendo-Style Sophisticated Cobb": { t: "15 mins", p: "42g", c: "15g", f: "20g", steps: ["Finely chop kale and massaged spinach.", "Top with pasture turkey, roasted beets, and avocado.", "Add a massive heap of Broccoli Sprouts (Sulforaphane boost).", "Dress with lemon and oil."], mod: "Sophia: light on dressing." },
        "Shakshuka w/ Ground Bison": { t: "20 mins", p: "42g", c: "10g", f: "12g", steps: ["Brown bison with diced bell peppers and cumin.", "Add tomato sauce; crack eggs directly into sauce.", "Cover and simmer until whites are set.", "Top with Greek Yogurt (Sub for sour cream)."], mod: "Sophia: 2 eggs; Jermaine: 3 eggs." },
        "Savory Bone Broth Oats": { t: "10 mins", p: "20g", c: "30g", f: "8g", steps: ["Simmer steel-cut oats in beef bone broth instead of water.", "Top with a soft-boiled egg (7 mins) and scallions.", "Season with black pepper for nutrient absorption."], mod: "Jermaine: 2 cupped hands carbs; Sophia: 1 cupped hand." },
        "Roasted Purple Yam Power Bowl": { t: "30 mins", p: "15g", c: "45g", f: "12g", steps: ["Dice purple yams; roast at 400Â°F for exactly 25 mins.", "Toss with cooked quinoa and pepitas.", "Serve over massaged spinach with a lemon-tahini drizzle."], mod: "Add chicken if lifting today. Sophia: 1 cupped hand carb." },
        "Turkey & Spinach Stuffed Peppers": { t: "40 mins", p: "38g", c: "12g", f: "10g", steps: ["Stuff bell peppers with ground turkey and chopped spinach.", "Bake in oven at 400Â°F for exactly 30 mins.", "Serve with a dollop of Greek Yogurt (replaces sour cream)."], mod: "Standard portion." },
        "Snapper Ceviche w/ Mango": { t: "20 mins", p: "40g", c: "15g", f: "2g", steps: ["Cube snapper; submerge in lime juice for 15 mins.", "Toss with diced mango and cilantro.", "Plate with cucumber slices."], mod: "1 slice sweet potato max for Jermaine." },
        "Crab Scramble w/ Asparagus": { t: "12 mins", p: "35g", c: "5g", f: "10g", steps: ["SautÃ© asparagus tips in ghee.", "Pour in egg whites and scramble.", "Fold in 4oz lump crab at the very end to heat."], mod: "Standard portions." },
        "Bison Stuffed Purple Yams": { t: "45 mins", p: "42g", c: "35g", f: "12g", steps: ["Roast whole purple yam at 400Â°F for 40 mins.", "Split and stuff with browned bison and bell peppers.", "Top with Greek Yogurt (Sub for sour cream)."], mod: "Jermaine only for CS4 days." },
        "Salmon & Broccoli Parchment": { t: "20 mins", p: "40g", c: "5g", f: "18g", steps: ["Place salmon and broccoli in parchment paper.", "Season with lemon and dill.", "Bake at 400Â°F for exactly 15 mins."], mod: "1.5 palms for Sophia." },
        "Lemon Trout w/ Green Beans": { t: "15 mins", p: "38g", c: "4g", f: "12g", steps: ["Sear trout skin-side down 4 mins Side A.", "Flip and finish 2 mins Side B.", "Steam green beans with lemon."], mod: "Standard portion." },
        "Bison Southwest Skillet": { t: "15 mins", p: "42g", c: "12g", f: "10g", steps: ["Brown bison with black beans and diced bell peppers.", "Top with Greek Yogurt and avocado.", "Season with chili powder."], mod: "Sophia: 1.5 palms protein." },
        "Mediterranean Cod Bake": { t: "25 mins", p: "40g", c: "8g", f: "12g", steps: ["Bake cod fillets with olives and tomatoes at 400Â°F for 15 mins.", "Serve over steamed spinach."], mod: "Standard portions." },
        "Turkey Chili (No Beans)": { t: "45 mins", p: "45g", c: "15g", f: "12g", steps: ["Simmer turkey, bell peppers, and tomatoes for 40 mins.", "Top with a dollop of Greek Yogurt (Sub for sour cream)."], mod: "Jermaine: 2 palms protein." },
        "Scallops & Cauliflower Mash": { t: "20 mins", p: "35g", c: "10g", f: "12g", steps: ["Sear scallops 2 mins per side Side A/B.", "Mash steamed cauliflower with 1 tsp ghee.", "Serve hot."], mod: "Standard portion." },
        "Grilled Chicken w/ Broccoli Sprouts": { t: "20 mins", p: "45g", c: "5g", f: "10g", steps: ["Grill chicken breast 6 mins per side Side A/B.", "Serve with a massive pile of Broccoli Sprouts.", "Dress with lemon."], mod: "Sophia: 1.5 palms protein." },
        "Bison Bone Broth Soup": { t: "30 mins", p: "42g", c: "10g", f: "10g", steps: ["Simmer bone broth with browned bison and celery.", "Add bell peppers at the end for crunch.", "Serve hot."], mod: "Standard portion." },
        "Shrimp & Bok Choy Stir-fry": { t: "15 mins", p: "35g", c: "8g", f: "10g", steps: ["SautÃ© shrimp and bok choy with ginger.", "High heat sear 2 mins Side A, 1 min Side B.", "Season with coconut aminos."], mod: "1.5 palms for Sophia." },
        "Turkey Peppers Skillet": { t: "15 mins", p: "40g", c: "10g", f: "10g", steps: ["Brown turkey with 3 varieties of bell peppers.", "Top with Greek Yogurt and jalapeÃ±os."], mod: "Standard portions." },
        "Salmon & Fennel Roast": { t: "25 mins", p: "40g", c: "8g", f: "18g", steps: ["Roast salmon and sliced fennel at 400Â°F for 15 mins.", "Finish with fresh dill."], mod: "Standard portions." },
        "Bison Greek Salad": { t: "15 mins", p: "42g", c: "10g", f: "15g", steps: ["Top greens with browned bison, peppers, and olives.", "Dress with Greek Yogurt lemon sauce."], mod: "Standard portions." }
    };

    const mealLibrary = {
        breakfasts: ["Southwest Bison Scramble", "Crab Scramble w/ Asparagus", "Sea Moss & Triple-Protein Smoothie", "Japanese Tamagoyaki Scramble", "Bison Steak & Eggs", "Shakshuka w/ Ground Bison", "Savory Bone Broth Oats", "Crab & Spinach Scramble", "Tofu & Brussels Scramble", "Southwest Bison Scramble", "Japanese Tamagoyaki Scramble", "Sea Moss & Triple-Protein Smoothie", "Bison Steak & Eggs", "Shakshuka w/ Ground Bison", "Savory Bone Broth Oats", "Southwest Bison Scramble", "Crab Scramble w/ Asparagus", "Sea Moss & Triple-Protein Smoothie", "Japanese Tamagoyaki Scramble", "Bison Steak & Eggs", "Shakshuka w/ Ground Bison", "Savory Bone Broth Oats", "Southwest Bison Scramble", "Crab Scramble w/ Asparagus", "Sea Moss & Triple-Protein Smoothie", "Japanese Tamagoyaki Scramble", "Bison Steak & Eggs", "Shakshuka w/ Ground Bison", "Savory Bone Broth Oats", "Southwest Bison Scramble", "Crab Scramble w/ Asparagus", "Sea Moss & Triple-Protein Smoothie", "Japanese Tamagoyaki Scramble", "Bison Steak & Eggs", "Shakshuka w/ Ground Bison", "Savory Bone Broth Oats", "Southwest Bison Scramble", "Crab Scramble w/ Asparagus", "Sea Moss & Triple-Protein Smoothie", "Japanese Tamagoyaki Scramble", "Bison Steak & Eggs"],
        lunches: ["Classic Peruvian Ceviche", "Dungeness Crab & Avocado Tower", "Sriracha Yogurt Bison Tacos", "Cilantro-Lime Shrimp Tacos", "Bison Laab (Thai Meat Salad)", "Ginger-Turkey Cabbage Potstickers", "Mendo-Style Sophisticated Cobb", "Snapper Ceviche w/ Mango", "Turkey & Spinach Stuffed Peppers", "Bison Southwest Skillet", "Classic Peruvian Ceviche", "Dungeness Crab & Avocado Tower", "Sriracha Yogurt Bison Tacos", "Cilantro-Lime Shrimp Tacos", "Bison Laab (Thai Meat Salad)", "Ginger-Turkey Cabbage Potstickers", "Mendo-Style Sophisticated Cobb", "Snapper Ceviche w/ Mango", "Turkey & Spinach Stuffed Peppers", "Bison Southwest Skillet", "Classic Peruvian Ceviche", "Dungeness Crab & Avocado Tower", "Sriracha Yogurt Bison Tacos", "Cilantro-Lime Shrimp Tacos", "Bison Laab (Thai Meat Salad)", "Ginger-Turkey Cabbage Potstickers", "Mendo-Style Sophisticated Cobb", "Snapper Ceviche w/ Mango", "Turkey & Spinach Stuffed Peppers", "Bison Southwest Skillet", "Classic Peruvian Ceviche", "Dungeness Crab & Avocado Tower", "Sriracha Yogurt Bison Tacos", "Cilantro-Lime Shrimp Tacos", "Bison Laab (Thai Meat Salad)", "Ginger-Turkey Cabbage Potstickers", "Mendo-Style Sophisticated Cobb", "Snapper Ceviche w/ Mango", "Turkey & Spinach Stuffed Peppers", "Bison Southwest Skillet"],
        dinners: ["Garlic Ghee Lobster Tails", "SF Style Cioppino (Mussels)", "Grilled Branzino (Whole)", "Greek Grilled Octopus (Htapodi)", "Venison Au Poivre", "Miso Glazed Black Cod", "Centurion Bone Broth Beef Stew", "Ostrich Steaks w/ Berry Sauce", "Duck & Mushroom Ragu", "Pan-Seared Sea Bass w/ Fennel", "Salmon & Broccoli Parchment", "Lemon Trout w/ Green Beans", "Mediterranean Cod Bake", "Scallops & Cauliflower Mash", "Bison Stuffed Purple Yams", "Turkey Chili (No Beans)", "Grilled Chicken w/ Broccoli Sprouts", "Bison Bone Broth Soup", "Shrimp & Bok Choy Stir-fry", "Turkey Peppers Skillet", "Garlic Ghee Lobster Tails", "SF Style Cioppino (Mussels)", "Grilled Branzino (Whole)", "Greek Grilled Octopus (Htapodi)", "Venison Au Poivre", "Miso Glazed Black Cod", "Centurion Bone Broth Beef Stew", "Ostrich Steaks w/ Berry Sauce", "Duck & Mushroom Ragu", "Pan-Seared Sea Bass w/ Fennel", "Salmon & Broccoli Parchment", "Lemon Trout w/ Green Beans", "Mediterranean Cod Bake", "Scallops & Cauliflower Mash", "Bison Stuffed Purple Yams", "Turkey Chili (No Beans)", "Grilled Chicken w/ Broccoli Sprouts", "Bison Bone Broth Soup", "Shrimp & Bok Choy Stir-fry", "Turkey Peppers Skillet"]
    };

    let weekOffset = 0;

    function getMonday(offset) {
        let d = new Date();
        let day = d.getDay(), diff = d.getDate() - day + (day == 0 ? -6:1);
        let mon = new Date(d.setDate(diff));
        mon.setDate(mon.getDate() + (offset * 7));
        return mon;
    }

    function openRecipe(name) {
        const r = recipeDB[name];
        if(!r) { alert("Detailed prep syncing..."); return; }
        document.getElementById('modalTitle').innerText = name;
        document.getElementById('modalTime').innerText = "â±ï¸ " + r.t;
        document.getElementById('modalP').innerText = r.p;
        document.getElementById('modalC').innerText = r.c;
        document.getElementById('modalF').innerText = r.f;
        document.getElementById('modalSteps').innerHTML = r.steps.map(s => `<p>${s}</p>`).join('');
        document.getElementById('modalMod').innerText = r.mod;
        document.getElementById('recipeModal').style.display = 'block';
    }

    function closeModal(id) { document.getElementById(id).style.display = 'none'; }
    function openModal(id) { document.getElementById(id).style.display = 'block'; }

    function renderTabs() {
        const monday = getMonday(weekOffset);
        const tabs = document.getElementById('dayTabs');
        tabs.innerHTML = '';
        ["MON", "TUE", "WED", "THU", "FRI", "SAT", "SUN"].forEach((day, i) => {
            let tabDate = new Date(monday);
            tabDate.setDate(monday.getDate() + i);
            const btn = document.createElement('button');
            btn.className = 'tab-btn' + (i === 0 ? ' active' : '');
            btn.innerHTML = `${day}<span>${tabDate.getDate()}</span>`;
            btn.onclick = () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                showDay(tabDate);
            };
            tabs.appendChild(btn);
        });
        document.getElementById('dateHeader').innerText = `${monday.toLocaleDateString('en-US', {month:'long'})} â€” v108 MASTER`;
        showDay(monday);
    }

    function showDay(dateObj) {
        const dayId = Math.floor((dateObj - new Date(2025, 0, 1)) / 86400000);
        const b = mealLibrary.breakfasts[dayId % 40];
        const l = mealLibrary.lunches[dayId % 40];
        const dn = mealLibrary.dinners[dayId % 40];

        document.getElementById('dayContent').innerHTML = `
            <div class="card">
                <div class="label">ğŸ³ Breakfast</div><div class="value" onclick="openRecipe('${b}')">ğŸ§”ğŸ¾â€â™‚ï¸ J: ${b}</div>
                <div style="font-size:0.75rem; color:var(--text-dim); margin-bottom:15px; font-style:italic;">ğŸ‘©ğŸ¾â€ğŸ¦± S: ${recipeDB[b]?.mod || "Standard Portion"}</div>
                
                <div class="label">ğŸ¥— Lunch</div><div class="value" onclick="openRecipe('${l}')">ğŸ§”ğŸ¾â€â™‚ï¸ J: ${l}</div>
                <div style="font-size:0.75rem; color:var(--text-dim); margin-bottom:15px; font-style:italic;">ğŸ‘©ğŸ¾â€ğŸ¦± S: ${recipeDB[l]?.mod || "Standard Portion"}</div>
                
                <div class="label">ğŸ½ï¸ Dinner</div><div class="value" onclick="openRecipe('${dn}')">ğŸ§”ğŸ¾â€â™‚ï¸ J: ${dn}</div>
                <div style="font-size:0.75rem; color:var(--text-dim); margin-bottom:15px; font-style:italic;">ğŸ‘©ğŸ¾â€ğŸ¦± S: ${recipeDB[dn]?.mod || "Standard Portion"}</div>
            </div>
            <div class="card" style="background:#0a0a0a; border-top:1px solid #333; padding:20px;">
                <div class="label">Daily Protocol</div>
                <div style="margin-top:10px;">
                    <span class="pb-mini">ğŸŒ¿ Sea Moss: 2tbsp</span>
                    <span class="pb-mini">ğŸ¥¤ Kombucha: 4-8oz</span>
                    <span class="pb-mini">ğŸ’§ Hydration: 1.2 Gal</span>
                    <span class="pb-mini">ğŸ›¡ï¸ Process-Free</span>
                </div>
            </div>`;
    }

    function changeWeek(dir) { weekOffset += dir; renderTabs(); }
    function resetToCurrent() { weekOffset = 0; renderTabs(); }
    window.onload = renderTabs;
</script>
</body>
</html>