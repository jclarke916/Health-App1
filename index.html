<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>Centurion v17.88 COMPLETE</title>
<style>
:root{--bg:#050505;--panel:#121212;--border:#222;--acid:#ccff00;--cyan:#00f0ff;--purple:#bf5af2;--alert:#ff453a;--text:#fff}
*{box-sizing:border-box;margin:0;padding:0}
body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;padding-bottom:120px;-webkit-tap-highlight-color:transparent}
.header{background:rgba(10,10,10,0.95);padding:15px;padding-top:12px;border-bottom:1px solid #333;position:sticky;top:0;z-index:100;backdrop-filter:blur(10px);position:relative}
.user-switch{display:flex;gap:6px;background:#1a1a1a;padding:3px;border-radius:24px;margin-bottom:8px;border:1px solid #333}
.user-switch button{flex:1;padding:8px 10px;border:none;background:transparent;color:#666;border-radius:20px;cursor:pointer;font-weight:800;font-size:0.7rem;transition:all 0.3s;letter-spacing:0.5px}
.user-switch button.active{background:var(--acid);color:#000;box-shadow:0 0 15px rgba(204,255,0,0.4)}
.date-nav{display:flex;justify-content:space-between;align-items:center;margin-top:10px;background:#000;border:1px solid #333;border-radius:10px;padding:6px}
.nav-btn{background:transparent;border:none;color:var(--cyan);padding:5px 20px;font-size:1.2rem;cursor:pointer;text-shadow:0 0 8px rgba(0,240,255,0.6)}
#dateLabel{flex:1;text-align:center;color:#fff;font-weight:700;font-size:0.9rem;font-family:monospace;letter-spacing:1px}
.bio-btn{background:var(--acid);color:#000;border:none;padding:8px 14px;border-radius:6px;font-size:0.65rem;font-weight:900;cursor:pointer;box-shadow:0 0 10px rgba(204,255,0,0.3);letter-spacing:0.5px;margin-left:8px}
.hero{padding:25px 15px;display:flex;gap:15px;align-items:center}
.dual-score{display:flex;gap:15px;align-items:center}
.score-box{border:2px solid #333;border-radius:50%;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;background:#000}
.score-box.small{width:70px;height:70px}
.score-box.primary{width:90px;height:90px;border-width:3px;background:radial-gradient(circle,rgba(204,255,0,0.08) 0%,transparent 70%);border-color:var(--acid);box-shadow:0 0 25px rgba(204,255,0,0.2)}
.score-val{font-size:1.4rem;font-weight:900;line-height:1;color:#fff}
.score-val.longevity{font-size:2.2rem;background:linear-gradient(135deg,var(--acid) 0%,var(--cyan) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;filter:drop-shadow(0 0 8px rgba(204,255,0,0.6))}
.score-label{font-size:0.45rem;color:#666;text-transform:uppercase;margin-top:4px;font-weight:800;letter-spacing:1px}
.score-avg-badge{position:absolute;bottom:-12px;background:#111;border:1px solid #333;padding:2px 6px;border-radius:8px;font-size:0.4rem;color:var(--cyan);font-weight:900;letter-spacing:0.5px}
.section-header{padding:15px;font-size:0.65rem;font-weight:900;color:#888;letter-spacing:1.5px;text-transform:uppercase;margin-top:10px;display:flex;align-items:center;gap:10px}
.section-header::after{content:'';height:1px;background:#333;flex:1}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;padding:0 15px;margin-bottom:20px}
.grid-4{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:8px;padding:0 15px;margin-bottom:20px}
.orb-card{background:linear-gradient(145deg,#111 0%,#080808 100%);border:1px solid #222;border-radius:14px;padding:15px 5px;display:flex;flex-direction:column;align-items:center;transition:transform 0.1s}
.orb-card:active{transform:scale(0.96)}
.orb-container{width:55px;height:55px;position:relative;margin-bottom:8px;margin-left:auto;margin-right:auto}
.orb-svg{transform:rotate(-90deg);width:100%;height:100%;position:absolute;top:0;left:0;z-index:1}
.orb-bg{fill:none;stroke:#1a1a1a;stroke-width:5}
.orb-fg{fill:none;stroke-width:5;stroke-dasharray:145;stroke-dashoffset:145;transition:stroke-dashoffset 1s cubic-bezier(0.4,0,0.2,1);stroke-linecap:round;filter:drop-shadow(0 0 4px currentColor)}
.orb-val-box{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%;text-align:center;z-index:10;pointer-events:none}
.orb-val{font-family:'Courier New',monospace;font-size:0.7rem;font-weight:900;color:#fff;text-shadow:0 0 4px #000;letter-spacing:-0.5px;line-height:1;margin-top:2px}
.orb-label{font-size:0.45rem;font-weight:800;color:#666;text-transform:uppercase;letter-spacing:0.5px}
.heart-svg{width:100%;height:100%;overflow:visible;z-index:1;position:absolute;top:0;left:0}
.heart-bg{fill:none;stroke:#1a1a1a;stroke-width:2.5}
.heart-fg{fill:none;stroke-width:2.5;stroke-dasharray:100;stroke-dashoffset:100;transition:stroke-dashoffset 1s ease;filter:drop-shadow(0 0 3px currentColor)}
.beating{animation:heartbeat 1.5s infinite;transform-origin:center}
@keyframes heartbeat{0%{transform:scale(1)}15%{transform:scale(1.1)}30%{transform:scale(1)}45%{transform:scale(1.1)}60%{transform:scale(1)}}
.rainbow-container{padding:0 15px;margin-bottom:20px}
.rainbow-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.rainbow-title{font-size:0.65rem;font-weight:900;color:#ccc;letter-spacing:1px}
.rainbow-score{font-size:0.9rem;font-weight:900;color:var(--acid);font-family:monospace;text-shadow:0 0 10px rgba(204,255,0,0.3)}
.rainbow-track{height:10px;background:#111;border-radius:5px;display:flex;overflow:hidden;border:1px solid #333}
.rainbow-seg{height:100%;width:0%;transition:width 0.5s ease;box-shadow:inset 0 0 5px rgba(0,0,0,0.5)}
.timeline{padding:0 15px;margin-bottom:40px}
.task{display:flex;gap:12px;margin-bottom:15px;min-height:60px}
.task-time{width:45px;color:#666;font-size:0.7rem;padding-top:15px;text-align:right;font-family:monospace;font-weight:bold}
.task-card{flex:1;background:linear-gradient(180deg,#111 0%,#0d0d0d 100%);border:1px solid #333;border-radius:12px;padding:15px;position:relative;transition:all 0.2s;display:flex;justify-content:space-between;align-items:center}
.task-card:active{transform:scale(0.98);background:#1a1a1a}
.task-card.checked{border-color:var(--acid);background:rgba(204,255,0,0.03);box-shadow:0 0 15px rgba(204,255,0,0.05)}
.task-card.auto-detected{border-color:var(--cyan);background:rgba(0,240,255,0.03)}
.task-card.recovery{border-color:var(--purple);background:rgba(191,90,242,0.03)}
.task-card.facial{border-color:var(--cyan);background:rgba(0,240,255,0.05)}
.task-card.optional{border-style:dashed;border-color:#444;opacity:0.7}
.task-card.optional .task-title::after{content:" (Optional)";font-size:0.65rem;color:#666;font-weight:400}
.task-info{flex:1}
.task-title{font-weight:900;font-size:0.85rem;margin-bottom:5px;color:#fff}
.task-desc{font-size:0.7rem;color:#888;line-height:1.4}
.chevron{font-size:1.5rem;color:#333;margin-left:15px;font-weight:900;transition:color 0.2s}
.task-card:active .chevron{color:var(--acid)}
.check-btn{width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-left:5px}
.check-circle{width:26px;height:26px;border:2px solid #555;border-radius:50%;background:rgba(0,0,0,0.5);display:flex;align-items:center;justify-content:center;font-weight:900;font-size:1rem;color:transparent;transition:all 0.2s}
.task-card.checked .check-circle{background:var(--acid);border-color:var(--acid);color:#000;box-shadow:0 0 10px var(--acid)}
.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:500;display:none;overflow-y:auto;backdrop-filter:blur(8px)}
.modal-overlay.show{display:block}
.modal-content{width:100%;min-height:100vh;background:#050505;padding-bottom:150px}
.modal-header{padding:20px;border-bottom:1px solid #222;display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:rgba(5,5,5,0.95);z-index:10}
.modal-title{font-size:1rem;font-weight:900;color:var(--acid);text-transform:uppercase;letter-spacing:1px;max-width:85%}
.modal-close{background:transparent;border:none;color:#fff;font-size:2rem;cursor:pointer;line-height:1}
.modal-body{padding:20px 20px 180px 20px}
.menu-item{padding:20px;border-bottom:1px solid #222;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background 0.2s;background:linear-gradient(90deg,#111 0%,#0d0d0d 100%);margin-bottom:1px}
.menu-item:active{background:#1a1a1a}
.menu-left{flex:1}
.menu-name{font-size:1rem;font-weight:800;color:#fff;margin-bottom:6px;letter-spacing:0.5px}
.menu-meta{font-size:0.7rem;color:#888;font-family:monospace}
.menu-arrow{color:#333;font-size:1.5rem;font-weight:900;margin-left:10px}
.footer{position:fixed;bottom:0;left:0;width:100%;background:#000;padding:12px 15px;border-top:1px solid #333;display:flex;justify-content:space-between;align-items:center;z-index:90}
.sync-status{font-size:0.6rem;color:#666;font-family:monospace}
.sync-btn{background:var(--acid);color:#000;border:none;padding:8px 16px;border-radius:6px;cursor:pointer;font-weight:900;font-size:0.7rem}

.debug-console{position:fixed;bottom:60px;left:0;right:0;max-height:300px;background:rgba(0,0,0,0.98);border-top:2px solid var(â€“acid);z-index:199;overflow-y:auto;padding:10px;font-size:0.65rem;color:#0f0;font-family:monospace;display:none}
.debug-console.show{display:block}
.debug-btn{position:fixed;bottom:70px;right:10px;z-index:200;background:var(â€“acid);color:#000;border:none;padding:8px 12px;border-radius:6px;font-weight:900;cursor:pointer;font-size:0.7rem}
.debug-log{margin-bottom:4px;border-bottom:1px solid #222;padding-bottom:4px}
.debug-time{color:#666;margin-right:8px}
.debug-type{color:var(â€“cyan);margin-right:8px;font-weight:900}

/* RECIPE PAGE STYLES */
.recipe-hero{margin-bottom:25px;text-align:center}
.recipe-title{font-size:1.6rem;font-weight:900;line-height:1.2;margin-bottom:8px;color:#fff}
.recipe-stats{font-size:0.85rem;color:#888;font-weight:700;font-family:monospace}
.macro-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:25px}
.macro-stat{background:#111;border:1px solid #333;padding:12px 5px;border-radius:10px;text-align:center}
.m-val{font-size:1.1rem;font-weight:900;color:#fff;font-family:monospace;line-height:1}
.m-lbl{font-size:0.5rem;color:var(â€“acid);text-transform:uppercase;margin-top:6px;font-weight:900;letter-spacing:0.5px}
.synergy-box{background:linear-gradient(135deg,rgba(0,240,255,0.08) 0%,rgba(0,0,0,0) 100%);border:1px solid rgba(0,240,255,0.3);padding:20px;border-radius:12px;margin-bottom:25px;position:relative}
.syn-title{color:var(â€“cyan);font-weight:900;font-size:0.75rem;text-transform:uppercase;margin-bottom:10px;letter-spacing:1px}
.syn-text{color:#ccc;font-size:0.95rem;font-style:italic;line-height:1.6}
.ing-item{color:#ccc;font-size:0.9rem;border-bottom:1px solid #1a1a1a;padding:12px 0;display:flex;align-items:center}
.ing-item::before{content:â€™â€¢â€™;color:var(â€“acid);font-weight:bold;margin-right:12px;font-size:1.3rem}
.step-item{display:flex;gap:15px;font-size:0.9rem;color:#ddd;line-height:1.6;margin-bottom:15px;background:#111;padding:15px;border-radius:10px;border:1px solid #222}
</style>

</head>
<body>

<div class="header">
    <div class="user-switch">
        <button id="btn-jermaine" onclick="if(window.app)app.switchUser('jermaine')">JERMAINE</button>
        <button id="btn-sophia" onclick="if(window.app)app.switchUser('sophia')">SOPHIA</button>
    </div>
    <div class="date-nav">
        <button class="nav-btn" onclick="if(window.app)app.changeDate(-1)">â—€</button>
        <span id="dateLabel">LOADING...</span>
        <button class="nav-btn" onclick="if(window.app)app.changeDate(1)">â–¶</button>
        <button class="bio-btn" onclick="if(window.app)app.openBio()">BIO</button>
    </div>
</div>

<div class="hero">
    <div class="dual-score">
        <div class="score-box small">
            <div class="score-val" id="dayGrade">--</div>
            <div class="score-label">TODAY</div>
        </div>
        <div class="score-box primary">
            <div class="score-val longevity" id="longevityScore">85</div>
            <div class="score-label">LONGEVITY</div>
            <div class="score-avg-badge">7-DAY AVG</div>
        </div>
    </div>
    <div class="status" id="statusMsg">INITIALIZING...</div>
</div>

<div class="section-header">SLEEP ARCHITECTURE</div>
<div class="grid-3">
    <div class="orb-card"><div class="orb-container"><svg class="orb-svg" viewBox="0 0 50 50"><circle class="orb-bg" cx="25" cy="25" r="21"></circle><circle class="orb-fg" id="sleepOrb" cx="25" cy="25" r="21" style="stroke:#bf5af2"></circle></svg><div class="orb-val-box"><div class="orb-val" id="sleepVal">--</div></div></div><div class="orb-label" style="color:#bf5af2">TOTAL</div></div>
    <div class="orb-card"><div class="orb-container"><svg class="orb-svg" viewBox="0 0 50 50"><circle class="orb-bg" cx="25" cy="25" r="21"></circle><circle class="orb-fg" id="deepOrb" cx="25" cy="25" r="21" style="stroke:#007aff"></circle></svg><div class="orb-val-box"><div class="orb-val" id="deepVal">--</div></div></div><div class="orb-label" style="color:#007aff">DEEP</div></div>
    <div class="orb-card"><div class="orb-container"><svg class="orb-svg" viewBox="0 0 50 50"><circle class="orb-bg" cx="25" cy="25" r="21"></circle><circle class="orb-fg" id="remOrb" cx="25" cy="25" r="21" style="stroke:#bf5af2"></circle></svg><div class="orb-val-box"><div class="orb-val" id="remVal">--</div></div></div><div class="orb-label" style="color:#bf5af2">REM</div></div>
</div>

<div class="section-header">FUEL (NUTRITION)</div>
<div class="grid-4">
    <div class="orb-card"><div class="orb-container"><svg class="orb-svg" viewBox="0 0 50 50"><circle class="orb-bg" cx="25" cy="25" r="21"></circle><circle class="orb-fg" id="proteinOrb" cx="25" cy="25" r="21" style="stroke:#fff"></circle></svg><div class="orb-val-box"><div class="orb-val" id="proteinVal">0</div></div></div><div class="orb-label" style="color:#fff">PROTEIN</div></div>
    <div class="orb-card"><div class="orb-container"><svg class="orb-svg" viewBox="0 0 50 50"><circle class="orb-bg" cx="25" cy="25" r="21"></circle><circle class="orb-fg" id="omega3Orb" cx="25" cy="25" r="21" style="stroke:#00d4ff"></circle></svg><div class="orb-val-box"><div class="orb-val" id="omega3Val">0</div></div></div><div class="orb-label" style="color:#00d4ff">OMEGA-3</div></div>
    <div class="orb-card"><div class="orb-container"><svg class="orb-svg" viewBox="0 0 50 50"><circle class="orb-bg" cx="25" cy="25" r="21"></circle><circle class="orb-fg" id="fiberOrb" cx="25" cy="25" r="21" style="stroke:#30d158"></circle></svg><div class="orb-val-box"><div class="orb-val" id="fiberVal">0</div></div></div><div class="orb-label" style="color:#30d158">FIBER</div></div>
    <div class="orb-card"><div class="orb-container"><svg class="orb-svg" viewBox="0 0 50 50"><circle class="orb-bg" cx="25" cy="25" r="21"></circle><circle class="orb-fg" id="calorieOrb" cx="25" cy="25" r="21" style="stroke:#FFD60A"></circle></svg><div class="orb-val-box"><div class="orb-val" id="calorieVal">0</div></div></div><div class="orb-label" style="color:#FFD60A">CALORIES</div></div>
</div>

<div class="section-header">ENGINE (CARDIO)</div>
<div class="grid-4">
    <div class="orb-card">
        <div class="orb-container"><svg class="heart-svg beating" viewBox="0 0 24 24"><path class="heart-bg" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path><path class="heart-fg" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" style="fill:none;stroke:#ff453a;stroke-width:2.5;"></path></svg><div class="orb-val-box"><div class="orb-val" id="rhrVal">--</div></div></div>
        <div class="orb-label" style="color:#ff453a">RHR</div>
    </div>
    <div class="orb-card">
        <div class="orb-container"><svg class="heart-svg" viewBox="0 0 24 24"><path class="heart-bg" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path><path class="heart-fg" id="z2Heart" pathLength="100" stroke-dasharray="100" stroke-dashoffset="100" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" style="fill:none;stroke:#00f0ff;stroke-width:2.5"></path></svg><div class="orb-val-box"><div class="orb-val" id="z2Val">0</div></div></div>
        <div class="orb-label" style="color:#00f0ff">ZONE 2</div>
    </div>
    <div class="orb-card">
        <div class="orb-container"><svg class="heart-svg" viewBox="0 0 24 24"><path class="heart-bg" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path><path class="heart-fg" id="z5Heart" pathLength="100" stroke-dasharray="100" stroke-dashoffset="100" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" style="fill:none;stroke:#ff453a;stroke-width:2.5"></path></svg><div class="orb-val-box"><div class="orb-val" id="z5Val">0</div></div></div>
        <div class="orb-label" style="color:#ff453a">ZONE 5</div>
    </div>
    <div class="orb-card">
        <div class="orb-container"><svg class="heart-svg" viewBox="0 0 24 24"><path class="heart-bg" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"></path><path class="heart-fg" id="calHeart" pathLength="100" stroke-dasharray="100" stroke-dashoffset="100" d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" style="fill:none;stroke:#FFD60A;stroke-width:2.5"></path></svg><div class="orb-val-box"><div class="orb-val" id="calVal">0</div></div></div>
        <div class="orb-label" style="color:#FFD60A">BURN</div>
    </div>
</div>

<div class="section-header">PHYTONUTRIENT DIVERSITY ğŸŒˆ</div>
<div class="rainbow-container">
    <div class="rainbow-header"><div class="rainbow-title">RAINBOW SCORE</div><div class="rainbow-score" id="rainbowScore">0%</div></div>
    <div class="rainbow-track" id="rainbowTrack"></div>
</div>

<div class="section-header">SYNERGY PROTOCOL ğŸ”„ AUTO-DETECT</div>
<div class="timeline" id="timeline"></div>

<div class="modal-overlay" id="mainModal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title" id="modalTitle">TITLE</div>
            <button class="modal-close" onclick="app.closeModal()">Ã—</button>
        </div>
        <div class="modal-body" id="modalBody"></div>
    </div>
</div>

<div class="footer">
    <span class="sync-status" id="syncStatus">INIT</span>
    <button class="sync-btn" onclick="if(window.app)app.sync()">ğŸ”„ SYNC</button>
</div>

<button class="debug-btn" onclick="toggleDebug()">ğŸ› DEBUG</button>

<div class="debug-console" id="debugConsole"></div>

<script>
const debugLogs=[];
function log(msg,type='LOG'){
const t=new Date().toLocaleTimeString();
debugLogs.push({t:t,type:type,msg:msg});
if(debugLogs.length>50)debugLogs.shift();
console.log(msg);
renderDebug();
}
function logerr(msg){log(msg,'ERROR')}
function renderDebug(){
const el=document.getElementById('debugConsole');
if(!el)return;
let html='';
debugLogs.forEach(l=>{
const color=l.type==='ERROR'?'#ff453a':'#0f0';
html+=`<div class="debug-log"><span class="debug-time">[${l.t}]</span><span class="debug-type" style="color:${color}">${l.type}</span><span style="color:#ccc">${l.msg}</span></div>`;
});
el.innerHTML=html;
el.scrollTop=el.scrollHeight;
}
function toggleDebug(){
const el=document.getElementById('debugConsole');
if(el.classList.contains('show')){el.classList.remove('show')}else{el.classList.add('show')}
}

const USERS={
jermaine:{name:"Jermaine",dob:"1983-01-13",goals:{protein:175,omega3:4000,fiber:50,water:140,weightTarget:210,heightInches:76.5,z2:45,z5:20,calBurn:500},defaultBios:{bmr:'2028',apob:'114',lpa:'178',weight:'215.7',hscrp:'0.4',hba1c:'5.4',bodyfat:'21.6',muscle:'97.0'}},
sophia:{name:"Sophia",dob:"1987-01-25",goals:{protein:130,omega3:4000,fiber:35,water:100,weightTarget:140,heightInches:64,z2:30,z5:15,calBurn:350},defaultBios:{bmr:'1450',apob:'70',lpa:'20',weight:'148',hscrp:'0.5',hba1c:'5.2',bodyfat:'18.2',muscle:'68.0'}}
};

// ============================================================================
// MEAL DATABASE - Start
// ============================================================================
const MEALS={
breakfast:[
{title:â€œGreek Yogurt & Berriesâ€,time:â€œ5minâ€,servings:1,macros:{p:20,o:0,f:4,cal:250},ingredients:[â€œ1 cup Greek Yogurtâ€,â€œ1/2 cup Mixed Berriesâ€,â€œ1 tbsp Honeyâ€,â€œ1 tbsp Walnutsâ€],steps:[â€œScoop yogurt into bowlâ€,â€œTop with berries and walnutsâ€,â€œDrizzle with honeyâ€],why:â€œProbiotics + Antioxidants. Quick high protein start.â€,colors:[â€˜whiteâ€™,â€˜purpleâ€™,â€˜brownâ€™]},
{title:â€œOmega Breakfastâ€,time:â€œ15minâ€,servings:1,macros:{p:58,o:3500,f:12,cal:680},ingredients:[â€œ8oz Wild Salmonâ€,â€œ2 Eggsâ€,â€œ2 cups Kaleâ€,â€œ1 cup Blueberriesâ€,â€œ1 tsp EVOOâ€],steps:[â€œHeat EVOO in panâ€,â€œSeason salmon with salt/pepperâ€,â€œSear salmon 4min per sideâ€,â€œScramble eggs separatelyâ€,â€œMassage kale for 2minâ€,â€œPlate kale as baseâ€,â€œTop with salmon, eggs, and berriesâ€],why:â€œSalmon + Eggs = Choline/Omega-3 synergy for brain health.â€,colors:[â€˜orangeâ€™,â€˜purpleâ€™,â€˜greenâ€™]},
{title:â€œSophiaâ€™s Sea Moss Oatmealâ€,time:â€œ10minâ€,servings:1,macros:{p:48,o:8200,f:18,cal:580},ingredients:[â€œ1 cup Oatsâ€,â€œ1 tbsp Sea Mossâ€,â€œ3 tbsp Flaxseedâ€,â€œPea Proteinâ€,â€œBerriesâ€],steps:[â€œCook oats in water or oat milkâ€,â€œStir in Sea Moss gel and proteinâ€,â€œTop with ground flax and berriesâ€],why:â€œSea Moss minerals support thyroid. Flax lowers Lp(a).â€,colors:[â€˜purpleâ€™,â€˜whiteâ€™]},
{title:â€œPB Sea Moss Power Shakeâ€,time:â€œ5minâ€,servings:1,macros:{p:54,o:7200,f:16,cal:680},ingredients:[â€œPea Proteinâ€,â€œSea Mossâ€,â€œFlaxseedâ€,â€œPBâ€,â€œSpinachâ€],steps:[â€œBlend all ingredients with Oat Milkâ€],why:â€œSea Moss supports mucus membranes. Pea protein = 54g complete.â€,colors:[â€˜greenâ€™,â€˜whiteâ€™]},
{title:â€œSmoked Trout Hashâ€,time:â€œ18minâ€,servings:1,macros:{p:54,o:3200,f:16,cal:640},ingredients:[â€œ6oz Troutâ€,â€œ2 Eggsâ€,â€œ1 Sweet Potatoâ€,â€œBrussels Sproutsâ€,â€œGarlicâ€],steps:[â€œDice sweet potato and sauteâ€,â€œAdd sprouts and garlicâ€,â€œCrack eggs into wellsâ€,â€œCover until eggs setâ€,â€œTop with flaked troutâ€],why:â€œTrout is lower mercury than tuna. Sprouts = Sulforaphane.â€,colors:[â€˜orangeâ€™,â€˜greenâ€™]},
{title:â€œSavory Turmeric Oatsâ€,time:â€œ12minâ€,servings:1,macros:{p:20,o:1200,f:12,cal:450},ingredients:[â€œ1 cup Oatsâ€,â€œTurmericâ€,â€œBlack Pepperâ€,â€œSpinachâ€,â€œPoached Eggâ€],steps:[â€œCook oats with turmeric/pepperâ€,â€œStir in spinachâ€,â€œTop with eggâ€],why:â€œTurmeric + Pepper = 2000% absorption boost.â€,colors:[â€˜yellowâ€™,â€˜greenâ€™]},
{title:â€œMackerel Scrambleâ€,time:â€œ12minâ€,servings:1,macros:{p:56,o:4800,f:10,cal:660},ingredients:[â€œmackerelâ€,â€œeggsâ€,â€œarugulaâ€,â€œturmericâ€],steps:[â€œWhisk eggs with turmericâ€,â€œScramble with mackerelâ€,â€œServe over wilted arugulaâ€],why:â€œMackerel is highest Omega-3 fish. Turmeric reduces inflammation.â€,colors:[â€˜yellowâ€™,â€˜greenâ€™]},
{title:â€œSmoked Salmon Avocado Toastâ€,time:â€œ12minâ€,servings:1,macros:{p:54,o:3400,f:14,cal:680},ingredients:[â€œsmoked salmonâ€,â€œsprouted grain breadâ€,â€œavocadoâ€,â€œeggsâ€],steps:[â€œToast breadâ€,â€œMash avocadoâ€,â€œTop with salmon and poached eggâ€],why:â€œSprouted grains easier to digest. Salmon + Avocado = healthy fats.â€,colors:[â€˜orangeâ€™,â€˜greenâ€™]},
{title:â€œFlax Protein Parfaitâ€,time:â€œ5minâ€,servings:1,macros:{p:48,o:8600,f:18,cal:580},ingredients:[â€œpea proteinâ€,â€œflaxseedâ€,â€œgreek yogurtâ€,â€œberriesâ€],steps:[â€œMix yogurt and proteinâ€,â€œLayer with flax and berriesâ€],why:â€œFlax is highest plant source of ALA. Yogurt = probiotics.â€,colors:[â€˜whiteâ€™,â€˜purpleâ€™]},
{title:â€œTofu Scramble Supremeâ€,time:â€œ12minâ€,servings:1,macros:{p:44,o:2800,f:10,cal:580},ingredients:[â€œtofuâ€,â€œspinachâ€,â€œmushroomsâ€,â€œturmericâ€],steps:[â€œCrumble tofuâ€,â€œSautÃ© with veggies and spicesâ€],why:â€œSoy protein lowers cholesterol. Turmeric/Pepper combo.â€,colors:[â€˜yellowâ€™,â€˜greenâ€™,â€˜whiteâ€™]},
{title:â€œProtein Pancakesâ€,time:â€œ15minâ€,servings:1,macros:{p:52,o:6400,f:14,cal:620},ingredients:[â€œpea proteinâ€,â€œflaxseedâ€,â€œoatsâ€,â€œberriesâ€],steps:[â€œBlend batter ingredientsâ€,â€œCook on griddleâ€,â€œTop with berriesâ€],why:â€œHigh protein start to day. Oats = soluble fiber.â€,colors:[â€˜purpleâ€™,â€˜whiteâ€™]},
{title:â€œEggs & Oatmeal Comboâ€,time:â€œ12minâ€,servings:1,macros:{p:52,o:7800,f:16,cal:640},ingredients:[â€œÂ½ cup steel-cut oatsâ€,â€œ2 tbsp ground flaxseedâ€,â€œ1 tbsp Sea Moss Gelâ€,â€œ3 eggsâ€,â€œ1 cup spinachâ€,â€œÂ½ avocadoâ€,â€œBerriesâ€],steps:[â€œCook oats with Sea Mossâ€,â€œScramble eggs with spinachâ€,â€œPlate oatmeal with flax, berriesâ€,â€œServe eggs on side with avocadoâ€],why:â€œBest of both worlds. Flax omega-3 + egg choline. Sea Moss minerals.â€,colors:[â€˜greenâ€™,â€˜whiteâ€™]}
],
lunch:[
{title:â€œClassic Bison Burgerâ€,time:â€œ20minâ€,servings:1,macros:{p:42,o:400,f:8,cal:550},ingredients:[â€œ6oz Ground Bisonâ€,â€œ1 Whole Wheat Bunâ€,â€œLettuce/Tomato/Onionâ€,â€œ1 tsp Mustardâ€,â€œSide Green Saladâ€],steps:[â€œForm bison patty (donâ€™t overwork)â€,â€œGrill or pan sear 3-4 mins/side (Medium Rare)â€,â€œToast bun lightlyâ€,â€œAssemble with fresh veggiesâ€,â€œServe with side saladâ€],why:â€œBison = Lower TMAO & inflammation than beef. High Heme Iron.â€,colors:[â€˜brownâ€™,â€˜greenâ€™,â€˜redâ€™]},
{title:â€œAhi Poke Bowlâ€,time:â€œ15minâ€,servings:1,macros:{p:45,o:1200,f:8,cal:520},ingredients:[â€œ6oz Ahi Tunaâ€,â€œBrown Riceâ€,â€œCucumberâ€,â€œMangoâ€,â€œSeaweedâ€,â€œSesame Oilâ€],steps:[â€œCube raw tunaâ€,â€œToss in sesame oil and soyâ€,â€œPlate over brown riceâ€,â€œTop with sliced veg and mangoâ€],why:â€œRaw fish preserves delicate Omega-3s. Seaweed = Iodine.â€,colors:[â€˜redâ€™,â€˜greenâ€™,â€˜yellowâ€™]},
{title:â€œTurkey Club Wrapâ€,time:â€œ10minâ€,servings:1,macros:{p:38,o:400,f:6,cal:540},ingredients:[â€œ1 large tortillaâ€,â€œ4oz turkey breastâ€,â€œ2 slices turkey baconâ€,â€œLettuceâ€,â€œTomatoâ€,â€œMayo (light)â€],steps:[â€œCook bacon until crispâ€,â€œSpread mayo on wrapâ€,â€œLayer turkey, bacon, vegâ€,â€œRoll tightly and sliceâ€],why:â€œHigh protein lunch standard.â€,colors:[â€˜whiteâ€™,â€˜greenâ€™,â€˜redâ€™]},
{title:â€œBean & Cheese Burritoâ€,time:â€œ10minâ€,servings:1,macros:{p:22,o:200,f:14,cal:580},ingredients:[â€œ1 large whole wheat tortillaâ€,â€œ1/2 cup refried beans (vegetarian)â€,â€œ1/4 cup cheddarâ€,â€œSalsaâ€,â€œSpinachâ€,â€œGreek yogurtâ€],steps:[â€œSpread beans on tortillaâ€,â€œAdd cheese and salsaâ€,â€œAdd spinachâ€,â€œRoll and heat in panâ€,â€œDip in yogurtâ€],why:â€œBeans = fiber/protein combo. Whole wheat = sustained energy.â€,colors:[â€˜brownâ€™,â€˜greenâ€™,â€˜whiteâ€™]},
{title:â€œZoodles & Shrimpâ€,time:â€œ15minâ€,servings:1,macros:{p:35,o:600,f:5,cal:400},ingredients:[â€œZucchiniâ€,â€œShrimpâ€,â€œGarlicâ€,â€œLemonâ€,â€œOlive Oilâ€],steps:[â€œSpiralize zucchiniâ€,â€œSaute shrimp with garlicâ€,â€œToss zoodles in pan for 1 minâ€],why:â€œLow carb, high nutrient density.â€,colors:[â€˜greenâ€™,â€˜pinkâ€™]},
{title:â€œCottage Cheese Bowlâ€,time:â€œ5minâ€,servings:1,macros:{p:30,o:200,f:4,cal:350},ingredients:[â€œCottage Cheeseâ€,â€œPineappleâ€,â€œWalnutsâ€,â€œChia Seedsâ€],steps:[â€œScoop cheese into bowlâ€,â€œTop with fruit and nutsâ€],why:â€œCasein protein creates slow release amino acids.â€,colors:[â€˜whiteâ€™,â€˜yellowâ€™]},
{title:â€œSalmon Pesto Pastaâ€,time:â€œ20minâ€,servings:1,macros:{p:56,o:4200,f:12,cal:740},ingredients:[â€œ6oz Salmonâ€,â€œChickpea Pastaâ€,â€œPestoâ€,â€œTomatoesâ€,â€œArugulaâ€],steps:[â€œBoil chickpea pastaâ€,â€œSear salmon separatelyâ€,â€œToss pasta with pestoâ€,â€œCombine salmon and pastaâ€,â€œTop with tomatoesâ€],why:â€œChickpea pasta = high fiber/protein. Pesto = polyphenols.â€,colors:[â€˜pinkâ€™,â€˜greenâ€™,â€˜redâ€™]},
{title:â€œChipotle Bowl (Bison)â€,time:â€œ18minâ€,servings:1,macros:{p:58,o:2800,f:20,cal:740},ingredients:[â€œ6oz Bisonâ€,â€œBrown Riceâ€,â€œBlack Beansâ€,â€œPeppersâ€,â€œGuacamoleâ€],steps:[â€œBrown bison in panâ€,â€œWarm black beansâ€,â€œBuild bowl with rice baseâ€,â€œTop with meat, beans, peppersâ€,â€œAdd guacamoleâ€],why:â€œBison = nutrient dense red meat. Beans = soluble fiber.â€,colors:[â€˜brownâ€™,â€˜blackâ€™,â€˜greenâ€™,â€˜redâ€™]},
{title:â€œChipotle Bowl (Tofu)â€,time:â€œ20minâ€,servings:1,macros:{p:46,o:3200,f:22,cal:680},ingredients:[â€œtofuâ€,â€œbrown riceâ€,â€œblack beansâ€,â€œpeppersâ€],steps:[â€œSeason and bake tofuâ€,â€œAssemble bowl with beans and riceâ€],why:â€œPlant-based complete protein. High fiber.â€,colors:[â€˜whiteâ€™,â€˜blackâ€™,â€˜greenâ€™]},
{title:â€œMediterranean Quinoa Saladâ€,time:â€œ15minâ€,servings:1,macros:{p:22,o:1200,f:14,cal:580},ingredients:[â€œquinoaâ€,â€œcucumberâ€,â€œtomatoesâ€,â€œolivesâ€,â€œfetaâ€],steps:[â€œMix cooked quinoa with chopped vegâ€,â€œAdd olives and fetaâ€,â€œDrizzle with olive oilâ€],why:â€œMediterranean diet gold standard. Olives = healthy fats.â€,colors:[â€˜whiteâ€™,â€˜greenâ€™,â€˜redâ€™,â€˜blackâ€™]},
{title:â€œLentil Soup with Kaleâ€,time:â€œ30minâ€,servings:2,macros:{p:24,o:800,f:18,cal:450},ingredients:[â€œlentilsâ€,â€œkaleâ€,â€œcarrotsâ€,â€œceleryâ€],steps:[â€œSimmer lentils with vegâ€,â€œAdd kale at end to wiltâ€],why:â€œHigh fiber lowers cholesterol. Kale = nutrient density.â€,colors:[â€˜brownâ€™,â€˜greenâ€™,â€˜orangeâ€™]},
{title:â€œTurkey Burger & Sweet Potatoâ€,time:â€œ20minâ€,servings:1,macros:{p:38,o:300,f:8,cal:580},ingredients:[â€œturkeyâ€,â€œsweet potatoâ€,â€œlettuceâ€,â€œtomatoâ€],steps:[â€œGrill turkey burgerâ€,â€œRoast sweet potato wedgesâ€,â€œServe with saladâ€],why:â€œLean protein. Sweet potato = Vitamin A.â€,colors:[â€˜whiteâ€™,â€˜orangeâ€™,â€˜greenâ€™]},
{title:â€œChickpea Curry (Quick)â€,time:â€œ20minâ€,servings:2,macros:{p:18,o:400,f:14,cal:480},ingredients:[â€œ1 can chickpeasâ€,â€œ1 cup coconut milk (light)â€,â€œ1 tbsp red curry pasteâ€,â€œ1 cup spinachâ€,â€œ1/2 cup bell pepperâ€,â€œ1/2 onionâ€,â€œBasmati riceâ€],steps:[â€œSautÃ© onion and peppersâ€,â€œAdd curry paste, cook 1 minâ€,â€œAdd coconut milk and chickpeasâ€,â€œSimmer 10 minsâ€,â€œStir in spinachâ€,â€œServe over riceâ€],why:â€œChickpeas = fiber/protein. Turmeric in paste = anti-inflammatory.â€,colors:[â€˜yellowâ€™,â€˜greenâ€™,â€˜whiteâ€™]},
{title:â€œBison Taco Saladâ€,time:â€œ15minâ€,servings:1,macros:{p:45,o:800,f:12,cal:620},ingredients:[â€œ5oz ground bisonâ€,â€œ2 cups romaineâ€,â€œ1/2 cup black beansâ€,â€œ1/4 cup salsaâ€,â€œ1/4 avocadoâ€,â€œ1 tbsp greek yogurtâ€,â€œCumin, chili powderâ€],steps:[â€œBrown bison with spicesâ€,â€œDrain fatâ€,â€œAssemble lettuce baseâ€,â€œTop with meat, beans, salsaâ€,â€œAdd avocado and yogurt dollopâ€],why:â€œBison = nutrient dense red meat. Beans = soluble fiber.â€,colors:[â€˜brownâ€™,â€˜blackâ€™,â€˜greenâ€™,â€˜redâ€™]},
{title:â€œEdamame & Quinoa Bowlâ€,time:â€œ15minâ€,servings:1,macros:{p:24,o:1800,f:12,cal:540},ingredients:[â€œ1 cup cooked quinoaâ€,â€œ1 cup shelled edamameâ€,â€œ1/2 cup shredded purple cabbageâ€,â€œ1 carrot (shredded)â€,â€œGinger soy dressingâ€,â€œSesame seedsâ€],steps:[â€œWarm quinoa and edamameâ€,â€œToss with cabbage and carrotâ€,â€œDrizzle dressingâ€,â€œTop with sesame seedsâ€],why:â€œEdamame = soy protein. Purple cabbage = antioxidants.â€,colors:[â€˜greenâ€™,â€˜purpleâ€™,â€˜orangeâ€™]},
{title:â€œSmoked Salmon Bagel (Open)â€,time:â€œ5minâ€,servings:1,macros:{p:32,o:2800,f:6,cal:480},ingredients:[â€œ1 whole grain bagelâ€,â€œ4oz smoked salmonâ€,â€œ2 tbsp cream cheeseâ€,â€œCapersâ€,â€œRed onionâ€,â€œDillâ€,â€œCucumber slicesâ€],steps:[â€œToast bagelâ€,â€œSpread cream cheeseâ€,â€œLayer salmonâ€,â€œTop with capers, onion, dillâ€,â€œServe cucumber on sideâ€],why:â€œSalmon = omega-3. Whole grain = fiber.â€,colors:[â€˜orangeâ€™,â€˜whiteâ€™,â€˜greenâ€™]},
{title:â€œLeftover Roast Chicken Saladâ€,time:â€œ10minâ€,servings:1,macros:{p:40,o:600,f:8,cal:520},ingredients:[â€œ5oz roast chicken (cold)â€,â€œ2 cups arugulaâ€,â€œ1/2 apple (diced)â€,â€œ1/4 cup walnutsâ€,â€œCeleryâ€,â€œYogurt dressingâ€],steps:[â€œChop chicken and celeryâ€,â€œToss with arugula and appleâ€,â€œAdd walnutsâ€,â€œMix with yogurt dressingâ€],why:â€œChicken = protein. Walnuts = ALA omega-3. Apple = quercetin.â€,colors:[â€˜whiteâ€™,â€˜greenâ€™,â€˜brownâ€™]},
{title:â€œTempeh Reuben Bowlâ€,time:â€œ15minâ€,servings:1,macros:{p:28,o:1200,f:16,cal:560},ingredients:[â€œ6oz tempeh stripsâ€,â€œ1/2 cup sauerkrautâ€,â€œ1 slice swiss cheeseâ€,â€œRye croutonsâ€,â€œThousand island dressing (light)â€,â€œMixed greensâ€],steps:[â€œPan fry tempeh stripsâ€,â€œMelt cheese on tempehâ€,â€œPlace over greensâ€,â€œAdd kraut and croutonsâ€,â€œDrizzle dressingâ€],why:â€œTempeh/Kraut = gut health powerhouse.â€,colors:[â€˜brownâ€™,â€˜greenâ€™]},
{title:â€œShrimp & Asparagus Stir Fryâ€,time:â€œ15minâ€,servings:1,macros:{p:35,o:800,f:8,cal:450},ingredients:[â€œ6oz shrimpâ€,â€œ1 bunch asparagusâ€,â€œGarlicâ€,â€œGingerâ€,â€œSoy sauceâ€,â€œSesame oilâ€,â€œCauliflower riceâ€],steps:[â€œSautÃ© garlic/ginger in oilâ€,â€œAdd asparagus, stir fry 3minâ€,â€œAdd shrimp, cook until pinkâ€,â€œAdd soy sauceâ€,â€œServe over cauli riceâ€],why:â€œShrimp = astaxanthin. Asparagus = prebiotic. Low carb option.â€,colors:[â€˜pinkâ€™,â€˜greenâ€™,â€˜whiteâ€™]},
{title:â€œTurkey Club (Sourdough)â€,time:â€œ10minâ€,servings:1,macros:{p:40,o:500,f:6,cal:550},ingredients:[â€œSliced Turkeyâ€,â€œSourdough Breadâ€,â€œAvocadoâ€,â€œTomatoâ€,â€œLettuceâ€],steps:[â€œToast sourdoughâ€,â€œLayer turkey and vegâ€,â€œAdd mashed avocadoâ€],why:â€œSourdough is fermented/low glycemic. Turkey = lean protein.â€,colors:[â€˜whiteâ€™,â€˜redâ€™,â€˜greenâ€™]}
],
dinner:[
{title:â€œWhole Branzino w/ Seafood Medleyâ€,time:â€œ40minâ€,servings:2,macros:{p:52,o:2800,f:12,cal:580},ingredients:[â€œ2 Whole Branzino (cleaned)â€,â€œ1/2lb Shrimpâ€,â€œ1/2lb Musselsâ€,â€œCherry Tomatoesâ€,â€œ1/2 cup White Wineâ€,â€œGarlic & Parsleyâ€,â€œLemon Slicesâ€],steps:[â€œScore fish, stuff with lemon/herbsâ€,â€œPlace in roasting panâ€,â€œSurround with shrimp, mussels, tomatoesâ€,â€œPour wine and garlic over everythingâ€,â€œBake at 400Â°F for 25 minsâ€],why:â€œWhole Fish = Collagen/Glycine from skin/bones. Shellfish = Zinc stack.â€,colors:[â€˜whiteâ€™,â€˜pinkâ€™,â€˜redâ€™]},
{title:â€œTurkey Chiliâ€,time:â€œ35minâ€,servings:2,macros:{p:35,o:400,f:15,cal:500},ingredients:[â€œ1lb ground turkeyâ€,â€œ1 can kidney beansâ€,â€œ1 can diced tomatoesâ€,â€œ1 onionâ€,â€œ1 bell pepperâ€,â€œChili powderâ€,â€œCuminâ€,â€œGarlicâ€],steps:[â€œBrown turkey with onion/garlicâ€,â€œAdd peppers and spicesâ€,â€œAdd tomatoes and beansâ€,â€œSimmer 30 minsâ€],why:â€œTurkey = lean protein. Beans = fiber. Tomatoes = lycopene.â€,colors:[â€˜brownâ€™,â€˜redâ€™]},
{title:â€œBeef Bolognese (Zoodles)â€,time:â€œ40minâ€,servings:2,macros:{p:40,o:500,f:10,cal:550},ingredients:[â€œ1lb ground beefâ€,â€œ1 jar marinara (no sugar)â€,â€œ1 onionâ€,â€œ2 carrotsâ€,â€œCeleryâ€,â€œZucchini noodlesâ€],steps:[â€œBrown beefâ€,â€œAdd chopped veg, cook 5 minâ€,â€œAdd sauce, simmer 20 minâ€,â€œServe over raw or lightly sautÃ©ed zoodlesâ€],why:â€œBeef = iron. Tomato sauce = lycopene.â€,colors:[â€˜redâ€™,â€˜greenâ€™]},
{title:â€œStuffed Peppersâ€,time:â€œ50minâ€,servings:4,macros:{p:30,o:400,f:10,cal:450},ingredients:[â€œBell Peppersâ€,â€œGround Bisonâ€,â€œBrown Riceâ€,â€œSpinachâ€,â€œTomato Sauceâ€],steps:[â€œHollow peppersâ€,â€œMix meat/rice/vegâ€,â€œStuff peppersâ€,â€œBake at 375F for 40mâ€],why:â€œVitamin C from peppers boosts iron absorption from bison.â€,colors:[â€˜redâ€™,â€˜greenâ€™,â€˜brownâ€™]},
{title:â€œSesame Seared Tunaâ€,time:â€œ15minâ€,servings:2,macros:{p:50,o:1500,f:2,cal:400},ingredients:[â€œAhi Tuna Steaksâ€,â€œSesame Seedsâ€,â€œSoy Sauceâ€,â€œGingerâ€,â€œAsparagusâ€],steps:[â€œCoat tuna in seedsâ€,â€œSear 1 min/sideâ€,â€œServe with steamed asparagusâ€],why:â€œHigh selenium content in tuna. Ginger aids digestion.â€,colors:[â€˜redâ€™,â€˜whiteâ€™,â€˜greenâ€™]},
{title:â€œSeafood Cioppinoâ€,time:â€œ40minâ€,servings:2,macros:{p:42,o:1800,f:8,cal:480},ingredients:[â€œWhite Fishâ€,â€œMussels/Shrimpâ€,â€œTomato Brothâ€,â€œFennelâ€,â€œGarlicâ€],steps:[â€œSaute fennel and garlicâ€,â€œAdd broth and simmerâ€,â€œPoach fish gently in brothâ€],why:â€œTomato (cooked) = high Lycopene. Low calorie, high mineral.â€,colors:[â€˜whiteâ€™,â€˜redâ€™,â€˜greenâ€™]},
{title:â€œHerb Crusted Codâ€,time:â€œ20minâ€,servings:1,macros:{p:52,o:2800,f:10,cal:580},ingredients:[â€œ8oz wild codâ€,â€œÂ½ cup almond flourâ€,â€œ1 eggâ€,â€œParsleyâ€,â€œDillâ€,â€œLemon zestâ€,â€œAsparagusâ€,â€œ1 tbsp EVOOâ€],steps:[â€œMix almond flour, herbs, zestâ€,â€œDip cod in egg, then flourâ€,â€œPan fry 4min per side in EVOOâ€,â€œSteam asparagusâ€,â€œPlate with lemon wedgesâ€],why:â€œCod = lean protein. Almonds = Vitamin E. Asparagus = prebiotic fiber.â€,colors:[â€˜whiteâ€™,â€˜greenâ€™]},
{title:â€œGrass-Fed Steak & Sproutsâ€,time:â€œ25minâ€,servings:1,macros:{p:60,o:1200,f:14,cal:720},ingredients:[â€œ8oz grass-fed sirloinâ€,â€œ2 cups Brussels sproutsâ€,â€œÂ½ sweet potatoâ€,â€œGarlicâ€,â€œRosemaryâ€,â€œBalsamic vinegarâ€,â€œ1 tbsp EVOOâ€],steps:[â€œHalve sprouts, toss in balsamicâ€,â€œRoast sprouts and potato 20min at 400Â°Fâ€,â€œSear steak 3min per sideâ€,â€œRest steak 5minâ€,â€œSlice against grainâ€],why:â€œGrass-fed beef = CLA and Omega-3. Brussels = sulforaphane. Sweet potato = potassium.â€,colors:[â€˜redâ€™,â€˜greenâ€™,â€˜orangeâ€™]},
{title:â€œMediterranean Chickenâ€,time:â€œ25minâ€,servings:1,macros:{p:55,o:800,f:12,cal:640},ingredients:[â€œ8oz chicken breastâ€,â€œ1 cup quinoaâ€,â€œCucumberâ€,â€œCherry tomatoesâ€,â€œKalamata olivesâ€,â€œFeta cheeseâ€,â€œOreganoâ€,â€œOlive oilâ€],steps:[â€œCook quinoaâ€,â€œGrill chicken with oreganoâ€,â€œChop vegâ€,â€œMix quinoa, veg, olivesâ€,â€œTop with sliced chicken and fetaâ€,â€œDrizzle olive oilâ€],why:â€œChicken = lean complete protein. Olives = hydroxytyrosol (potent antioxidant). Quinoa = complete plant protein.â€,colors:[â€˜whiteâ€™,â€˜blackâ€™,â€˜redâ€™]},
{title:â€œTempeh Stir Fry (Plant)â€,time:â€œ15minâ€,servings:1,macros:{p:42,o:2200,f:18,cal:580},ingredients:[â€œ8oz tempehâ€,â€œBroccoliâ€,â€œBell peppersâ€,â€œSnap peasâ€,â€œGingerâ€,â€œGarlicâ€,â€œTamariâ€,â€œSesame oilâ€,â€œBrown riceâ€],steps:[â€œSteam tempeh 5min (removes bitterness)â€,â€œCube and sautÃ© in sesame oilâ€,â€œAdd veggies, ginger, garlicâ€,â€œAdd splash of water to steam vegâ€,â€œFinish with tamariâ€,â€œServe over riceâ€],why:â€œTempeh = fermented soy (gut health). Ginger = anti-inflammatory. Broccoli = sulforaphane.â€,colors:[â€˜brownâ€™,â€˜greenâ€™,â€˜redâ€™]},
{title:â€œSheet Pan Salmon & Veggiesâ€,time:â€œ20minâ€,servings:1,macros:{p:45,o:3200,f:10,cal:620},ingredients:[â€œ6oz salmon filletâ€,â€œ1 cup broccoli floretsâ€,â€œ1 cup bell peppersâ€,â€œ1 tbsp olive oilâ€,â€œLemon slicesâ€,â€œDillâ€,â€œGarlic powderâ€],steps:[â€œPreheat oven to 400Â°Fâ€,â€œToss veggies in oil and spicesâ€,â€œPlace salmon and veggies on panâ€,â€œTop salmon with lemon/dillâ€,â€œRoast 15-18 minsâ€],why:â€œSalmon = omega-3. One pan meal. Broccoli = detox support.â€,colors:[â€˜orangeâ€™,â€˜greenâ€™,â€˜redâ€™]},
{title:â€œShrimp Scampi with Zoodlesâ€,time:â€œ15minâ€,servings:1,macros:{p:30,o:600,f:6,cal:420},ingredients:[â€œ6oz shrimpâ€,â€œ2 zucchini (spiralized)â€,â€œ2 tbsp butter/gheeâ€,â€œ3 cloves garlicâ€,â€œLemon juiceâ€,â€œParsleyâ€,â€œRed pepper flakesâ€],steps:[â€œSautÃ© garlic in butterâ€,â€œAdd shrimp, cook pinkâ€,â€œAdd lemon and flakesâ€,â€œToss in zoodles for 1 minâ€,â€œGarnish parsleyâ€],why:â€œShrimp = iodine/selenium. Zucchini = low cal volume.â€,colors:[â€˜pinkâ€™,â€˜greenâ€™,â€˜whiteâ€™]},
{title:â€œLamb Kofta Bowlâ€,time:â€œ25minâ€,servings:1,macros:{p:40,o:900,f:10,cal:680},ingredients:[â€œ6oz ground lambâ€,â€œ1 tsp cumin/corianderâ€,â€œCucumber yogurt sauceâ€,â€œTomatoesâ€,â€œOnionâ€,â€œMixed greensâ€,â€œPitaâ€],steps:[â€œMix lamb with spicesâ€,â€œForm small oblong pattiesâ€,â€œGrill or pan fry 8 minsâ€,â€œAssemble bowl with greensâ€,â€œTop with kofta and sauceâ€],why:â€œLamb = zinc/iron. Fermented yogurt = gut health.â€,colors:[â€˜brownâ€™,â€˜greenâ€™,â€˜whiteâ€™,â€˜redâ€™]},
{title:â€œPesto Chicken Zoodlesâ€,time:â€œ15minâ€,servings:1,macros:{p:45,o:500,f:8,cal:550},ingredients:[â€œ6oz chicken breastâ€,â€œ2 zucchiniâ€,â€œ1/4 cup basil pestoâ€,â€œCherry tomatoesâ€,â€œParmesanâ€],steps:[â€œCook chicken piecesâ€,â€œSpiralize zucchiniâ€,â€œToss chicken and zoodles with pestoâ€,â€œAdd halved tomatoesâ€,â€œWarm throughâ€],why:â€œBasil = anti-bacterial. Chicken = protein base.â€,colors:[â€˜greenâ€™,â€˜whiteâ€™,â€˜redâ€™]},
{title:â€œSeared Scallops & Risottoâ€,time:â€œ30minâ€,servings:1,macros:{p:35,o:700,f:4,cal:580},ingredients:[â€œ6oz sea scallopsâ€,â€œ1/2 cup arborio riceâ€,â€œ2 cups brothâ€,â€œWhite wine (splash)â€,â€œParmesanâ€,â€œPeasâ€,â€œButterâ€],steps:[â€œCook risotto (ladle broth slowly)â€,â€œStir in peas/parmâ€,â€œSear scallops in hot butter (2 min/side)â€,â€œServe scallops atop risottoâ€],why:â€œScallops = B12/magnesium. Peas = plant protein.â€,colors:[â€˜whiteâ€™,â€˜greenâ€™]},
{title:â€œChicken Stir Fryâ€,time:â€œ15minâ€,servings:1,macros:{p:40,o:300,f:8,cal:520},ingredients:[â€œ6oz chicken breastâ€,â€œBroccoliâ€,â€œSnap peasâ€,â€œCarrotsâ€,â€œSoy sauceâ€,â€œGinger/Garlicâ€,â€œSesame oilâ€],steps:[â€œSlice chicken thinâ€,â€œStir fry chickenâ€,â€œRemove, stir fry vegâ€,â€œCombine with sauceâ€,â€œSimmer 1 minâ€],why:â€œLean protein + fiber rich veg.â€,colors:[â€˜whiteâ€™,â€˜greenâ€™,â€˜orangeâ€™]},
{title:â€œBaked Cod with Salsaâ€,time:â€œ20minâ€,servings:1,macros:{p:45,o:2000,f:8,cal:480},ingredients:[â€œ8oz cod filletâ€,â€œ1/2 cup salsaâ€,â€œ1/4 avocadoâ€,â€œCilantroâ€,â€œLimeâ€,â€œAsparagus sideâ€],steps:[â€œPlace cod in baking dishâ€,â€œTop with salsaâ€,â€œBake 400Â°F for 15 minâ€,â€œTop with avocado/cilantroâ€,â€œServe with steamed asparagusâ€],why:â€œCod = low calorie protein source.â€,colors:[â€˜whiteâ€™,â€˜redâ€™,â€˜greenâ€™]},
{title:â€œEgg Roll in a Bowlâ€,time:â€œ15minâ€,servings:1,macros:{p:35,o:600,f:10,cal:480},ingredients:[â€œ1/2lb ground pork/turkeyâ€,â€œ1 bag coleslaw mixâ€,â€œGingerâ€,â€œGarlicâ€,â€œSoy sauceâ€,â€œSrirachaâ€,â€œGreen onionsâ€],steps:[â€œBrown meatâ€,â€œAdd slaw mix, ginger, garlicâ€,â€œSautÃ© until wiltedâ€,â€œStir in soy/srirachaâ€,â€œTop with green onionsâ€],why:â€œCabbage = cruciferous benefits. High volume meal.â€,colors:[â€˜whiteâ€™,â€˜greenâ€™]},
{title:â€œLemon Garlic Shrimpâ€,time:â€œ15minâ€,servings:1,macros:{p:30,o:500,f:4,cal:380},ingredients:[â€œ8oz shrimpâ€,â€œ2 tbsp butterâ€,â€œ3 cloves garlicâ€,â€œLemon juiceâ€,â€œParsleyâ€,â€œGreen beansâ€],steps:[â€œSteam green beansâ€,â€œSautÃ© garlic in butterâ€,â€œCook shrimpâ€,â€œFinish with lemon/parsleyâ€,â€œPlate togetherâ€],why:â€œShrimp = high protein low fat.â€,colors:[â€˜pinkâ€™,â€˜greenâ€™,â€˜whiteâ€™]},
{title:â€œMeatballs & Marinaraâ€,time:â€œ30minâ€,servings:2,macros:{p:32,o:400,f:8,cal:550},ingredients:[â€œ1lb ground beefâ€,â€œ1 eggâ€,â€œ1/4 cup almond flourâ€,â€œItalian herbsâ€,â€œMarinara sauceâ€,â€œSpinach sideâ€],steps:[â€œMix meat, egg, flour, herbsâ€,â€œRoll ballsâ€,â€œBake 400Â°F 20 minâ€,â€œSimmer in sauce 5 minâ€,â€œServe with wilted spinachâ€],why:â€œBeef = B12/Zinc. Spinach = folate.â€,colors:[â€˜redâ€™,â€˜greenâ€™]},
{title:â€œCurry Chicken Saladâ€,time:â€œ10minâ€,servings:1,macros:{p:40,o:800,f:8,cal:560},ingredients:[â€œ5oz cooked chickenâ€,â€œGreek yogurtâ€,â€œCurry powderâ€,â€œGrapes/Raisinsâ€,â€œCashewsâ€,â€œCeleryâ€],steps:[â€œChop chickenâ€,â€œMix yogurt and curry powderâ€,â€œCombine allâ€,â€œServe in lettuce cupsâ€],why:â€œCurry = turmeric anti-inflammatory. Yogurt = probiotics.â€,colors:[â€˜yellowâ€™,â€˜greenâ€™]}
],
juices:[
{title:â€œThe Red Pipe Clearerâ€,macros:{p:2,o:0,f:1,cal:110},ingredients:[â€œBeetsâ€,â€œCarrotsâ€,â€œGingerâ€,â€œLemonâ€],steps:[â€œWash produceâ€,â€œJuice beets firstâ€,â€œDrink immediatelyâ€],why:â€œBeets increase Nitric Oxide, dilating blood vessels.â€,colors:[â€˜redâ€™,â€˜orangeâ€™]},
{title:â€œThe ANA Green Sootherâ€,macros:{p:2,o:0,f:1,cal:90},ingredients:[â€œCeleryâ€,â€œCucumberâ€,â€œTurmericâ€,â€œGingerâ€],steps:[â€œJuice turmeric/gingerâ€,â€œFollow with watery vegâ€,â€œAdd black pepperâ€],why:â€œTurmeric/Ginger is the ultimate anti-inflammatory stack.â€,colors:[â€˜greenâ€™,â€˜yellowâ€™]},
{title:â€œLongevity Gold Elixirâ€,macros:{p:1,o:0,f:0,cal:60},ingredients:[â€œorangesâ€,â€œsea mossâ€,â€œturmericâ€],steps:[â€œJuice orangesâ€,â€œStir in sea moss gel and turmericâ€],why:â€œVitamin C + Minerals. Immune booster.â€,colors:[â€˜orangeâ€™,â€˜yellowâ€™]},
{title:â€œHomemade Kombucha Flightâ€,macros:{p:0,o:0,f:0,cal:35},ingredients:[â€œ16oz Homemade Kombuchaâ€,â€œIceâ€,â€œLemon sliceâ€,â€œMint sprigâ€],steps:[â€œPour chilled kombucha over iceâ€,â€œGarnish with fresh mint and lemonâ€],why:â€œPotent probiotics for gut microbiome diversity.â€,colors:[â€˜yellowâ€™]}
],
snack:[
{title:â€œBeef Jerky (Grass-Fed)â€,macros:{p:12,o:0,f:0,cal:80},ingredients:[â€œ1oz Beef Jerky (Grass-fed)â€],steps:[â€œOpen and enjoyâ€],why:â€œPure bioavailable protein. Zero prep. convenient.â€,colors:[â€˜brownâ€™]},
{title:â€œSavory Pulp Crackersâ€,macros:{p:6,o:1200,f:12,cal:140},ingredients:[â€œVeggie Pulpâ€,â€œFlaxseedâ€,â€œChia Seedsâ€,â€œWaterâ€],steps:[â€œMix pulp and seedsâ€,â€œSpread thin on sheetâ€,â€œDehydrate 8hrsâ€],why:â€œZero waste. Massive fiber hit binds to cholesterol.â€,colors:[â€˜brownâ€™]},
{title:â€œCitrus Ginger Pulp Chewsâ€,macros:{p:3,o:200,f:8,cal:110},ingredients:[â€œfruit pulpâ€,â€œalmond flourâ€,â€œcoconutâ€],steps:[â€œMix ingredientsâ€,â€œDehydrate until chewyâ€],why:â€œUses leftover pulp. High fiber treat.â€,colors:[â€˜orangeâ€™,â€˜whiteâ€™]},
{title:â€œDark Chocolate Oatmeal Ballsâ€,macros:{p:10,o:300,f:5,cal:210},ingredients:[â€œ1.5 cups rolled oatsâ€,â€œ1/2 cup dark chocolate chipsâ€,â€œ1/2 cup almond butterâ€],steps:[â€œMix oats, protein, and saltâ€,â€œFold in chocolate chipsâ€,â€œRoll into ballsâ€],why:â€œOats = beta-glucan (lowers LDL). Dark chocolate = flavonols.â€,colors:[â€˜brownâ€™]},
{title:â€œCenturion Protein Balls (PB)â€,macros:{p:12,o:800,f:4,cal:220},ingredients:[â€œ1 cup oatsâ€,â€œ1/2 cup peanut butterâ€,â€œ1/3 cup honeyâ€,â€œProtein powderâ€],steps:[â€œMix all ingredients in a bowlâ€,â€œRoll into ballsâ€,â€œRefrigerateâ€],why:â€œQuick protein hit + omega-3 from flax/chia.â€,colors:[â€˜brownâ€™]},
{title:â€œHummus & Carrotsâ€,macros:{p:4,o:0,f:6,cal:150},ingredients:[â€œ1/2 cup Hummusâ€,â€œ2 Carrots (sliced)â€],steps:[â€œSlice carrotsâ€,â€œScoop hummusâ€,â€œEnjoyâ€],why:â€œFiber rich carb with healthy fats.â€,colors:[â€˜orangeâ€™,â€˜whiteâ€™]},
{title:â€œRoasted Seaweed Snacksâ€,macros:{p:1,o:100,f:1,cal:30},ingredients:[â€œ1 pack Seaweed sheetsâ€],steps:[â€œEat straight from packâ€],why:â€œIodine powerhouse for thyroid health.â€,colors:[â€˜greenâ€™]},
{title:â€œOmega Nut Mixâ€,macros:{p:6,o:2500,f:4,cal:180},ingredients:[â€œWalnutsâ€,â€œBrazil Nutsâ€,â€œAlmondsâ€],steps:[â€œCombine nutsâ€],why:â€œWalnuts essential for lowering Lp(a).â€,colors:[â€˜brownâ€™]},
{title:â€œHard Boiled Eggsâ€,macros:{p:12,o:100,f:0,cal:140},ingredients:[â€œ2 Eggsâ€,â€œSaltâ€,â€œPepperâ€],steps:[â€œBoil eggs for 10 minsâ€,â€œCool in ice waterâ€,â€œPeel and seasonâ€],why:â€œCholine source for brain health. Pure bioavailable protein.â€,colors:[â€˜whiteâ€™,â€˜yellowâ€™]}
]
};
// ============================================================================
// MEAL DATABASE - END
// ============================================================================
const BASE=[
{id:'morningJuice',time:'07:00',title:'Morning Juice',desc:'Tap to select',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,mealSlot:'juices'},
{id:'breakfast',time:'07:30',title:'Breakfast',desc:'Tap to select',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,mealSlot:'breakfast'},
{id:'breakfastSnack',time:'10:00',title:'Morning Snack',desc:'Tap to select',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,mealSlot:'snack'},
{id:'lunch',time:'13:00',title:'Lunch',desc:'Tap to select',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,mealSlot:'lunch'},
{id:'lunchSnack',time:'15:00',title:'Afternoon Snack',desc:'Tap to select',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,mealSlot:'snack'},
{id:'optionalKombucha',time:'15:30',title:'Kombucha',desc:'Tap to select',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,mealSlot:'juices',cssClass:'optional'},
{id:'dinner',time:'18:30',title:'Dinner',desc:'Tap to select',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,mealSlot:'dinner'}
];
const TOKENS={jermaine:'WLIGFPFJQY73G43BY7CK7H6UJXPQ7N5Y',sophia:'4QSDWYJJUZFHRWRH727NCK7WH4COQJF4'};
const COLORS={red:{hex:'#ff453a'},orange:{hex:'#ff9f0a'},yellow:{hex:'#ffd60a'},green:{hex:'#30d158'},purple:{hex:'#bf5af2'},white:{hex:'#fff'},brown:{hex:'#A0522D'}};
const PROTOCOLS={
microcurrent:{title:"âš¡ MICROCURRENT",steps:["1. CLEANSE: Oil-free","2. GEL: Thick layer","3. FOREHEAD: Upward 3min","4. CHEEKS: Nose to ear 4min each","5. JAWLINE: Jaw to ear 3min","6. NECK: Upward only 2min","7. SLOW movements"]},
microneedling:{title:"ğŸ“ MICRONEEDLING",steps:["1. SANITIZE device","2. CLEANSE 2x","3. SERUM: Apply HA","4. NEEDLE: Cross-hatch","5. WAIT 10min","6. NO actives 24hrs","7. SPF mandatory next day"]},
massage:{title:"ğŸ’† MASSAGE",steps:["1. OIL: Apply facial oil","2. JAW: Chin to ear","3. CHEEKS: Lift to temples","4. EYES: Gentle circles","5. FOREHEAD: Horizontal","6. DRAIN: Down to collarbone"]},
cupping:{title:"ğŸ”µ CUPPING",steps:["1. OIL back","2. STATIC 3-5min on knots","3. SLIDING along spine","4. AVOID direct spine","5. MARKS = stagnation","6. HEAT: Hyperice 15min after"]},
normatec:{title:"ğŸ¦µ NORMATEC",steps:["1. SETUP Legs/Hips","2. LEVEL 7 flush","3. TIME 30-45min","4. ZONE boost if sore","5. HYDRATE 16oz after","6. Can do 2x daily"]},
inshape:{title:"ğŸŠ INSHAPE",steps:["1. STEAM 15min","2. SAUNA 20min","3. POOL 20min light","4. AQUA BED 30min","5. SHOWER cold finish","6. NORMATEC 45min home"]},
clubstudio:{title:"ğŸ¢ CLUB STUDIO",steps:["OPTION A: Full Recovery (45min)","1. CRYO Chamber 3min (full body cold)","2. WAIT 5min (let body warm)","3. SAUNA 20min (contrast therapy)","4. LOCAL CRYO areas as needed","5. MASSAGE BED 20min","6. HYPERICE suite if available","","OPTION B: Quick Session (20min)","1. CRYO 3min OR Sauna 20min","2. MASSAGE BED 15min","","OPTION C: Home Instead","Use Theragun + Normatec + Hyperice"]}
};

class CenturionApp{
constructor(){
console.log('ğŸš€ v17.88 COMPLETE');
const V='17.88.0';
if(localStorage.getItem('centurion_version')!==V){localStorage.clear();localStorage.setItem('centurion_version',V)}
this.user=localStorage.getItem('centurion_user')||'jermaine';
this.history=[];this.currentIndex=0;this.currentDateStr=new Date().toLocaleDateString('en-CA');
this.checked={};this.meals={};this.bios={};this.protocol=[];
// Initialize UI button states
document.querySelectorAll('.user-switch button').forEach(b=>b.classList.remove('active'));
document.getElementById(`btn-${this.user}`)?.classList.add('active');
this.loadUserData();this.setPlaceholderData();this.render();this.fetchOuraData();}

loadUserData(){
try{
const c=localStorage.getItem(`c_checked_${this.user}`);this.checked=c?JSON.parse(c):{};
const m=localStorage.getItem(`c_meals_${this.user}`);this.meals=m?JSON.parse(m):{};
const b=localStorage.getItem(`c_bios_${this.user}`);this.bios=b?JSON.parse(b):USERS[this.user].defaultBios;
}catch(e){this.checked={};this.meals={}}}

saveUserData(){
localStorage.setItem(`c_checked_${this.user}`,JSON.stringify(this.checked));
localStorage.setItem(`c_meals_${this.user}`,JSON.stringify(this.meals));
localStorage.setItem(`c_bios_${this.user}`,JSON.stringify(this.bios))}

setPlaceholderData(){this.history=[{date:this.currentDateStr,score:0,totalSec:0,deepSec:0,remSec:0,rhr:'-',cal:0,high:0,med:0,workouts:[]}];this.currentIndex=0}

getLunchRecovery(d){
if(this.user==='jermaine'&&(d===1||d===3||d===5))return{title:'ğŸ§˜ Hip Flexor',desc:'5min stretch'};
if(this.user==='jermaine'&&(d===2||d===4))return{title:'ğŸ¦¾ Shoulder',desc:'5min mobility'};
return null}

getEveningRecovery(d,w,t){
if(this.user==='jermaine'){
if(d===0)return{time:'14:00',title:'ğŸŠ InShape',desc:'Full ritual',type:'inshape'};
if((d===2||d===4)&&w)return{time:'19:30',title:'ğŸ¥Š Post-Boxing',desc:'Club Studio: Cryo 3min + Sauna 20min OR Home: Theragun + Normatec',type:'clubstudio'};
if(d===2||d===4)return{time:'18:30',title:'ğŸ”µ Cupping',desc:'Both 15min each + Hyperice after',type:'cupping'};
if(d===1&&w)return{time:'19:00',title:'ğŸ’ª Post-Lift',desc:'Club Studio: Cryo + Sauna OR Home: Full stack',type:'clubstudio'};
if(d===3)return{time:'18:30',title:'ğŸ§˜ Mid-Week Recovery',desc:'Club Studio: Sauna 20min + Local Cryo + Massage Bed OR Home: Normatec + Hyperice',type:'clubstudio'};
return{time:'18:30',title:'âœ¨ Light Recovery',desc:'Club Studio: Massage bed 20min OR Home: Normatec 30min',type:'clubstudio'}}
if(this.user==='sophia'){
if(d===0)return{time:'14:00',title:'ğŸŠ InShape',desc:'Together',type:'inshape'};
if((d===3||d===5)&&w)return{time:'19:00',title:'ğŸƒ Post-Rebound',desc:'Club Studio: Cryo + Sauna OR Home: Theragun + Normatec',type:'clubstudio'};
if(d===2||d===4)return{time:'18:30',title:'ğŸ”µ Cupping',desc:'Both 15min + Hyperice',type:'cupping'};
if(d===1)return{time:'18:30',title:'ğŸ’ª Recovery Day',desc:'Club Studio: Massage bed + Sauna OR Home: Normatec',type:'clubstudio'};
return{time:'18:30',title:'âœ¨ Light Recovery',desc:'Club Studio or Home - Optional',type:'clubstudio'}}
return null}

getEndOfDayFacial(d,f){
if(this.user==='jermaine'){
if(d===0&&f)return{title:'ğŸ“ Sophia Needle',desc:'45min - SPF 24hrs',type:'microneedling'};
if(d===1||d===3||d===5||d===0)return{title:'âš¡ Sophia Micro',desc:'Lift + Tone',type:'microcurrent'};
if(d===2||d===4)return{title:'ğŸ’† Sophia Massage',desc:'Hand + Wands',type:'massage'};
return{title:'âœ¨ Sophia Maint',desc:'Optional',type:'massage'}}
if(this.user==='sophia'){
if(d===1||d===3||d===5||d===0)return{title:'âš¡ Jermaine Micro',desc:'Jawline focus',type:'microcurrent'};
if(d===2||d===4)return{title:'ğŸ’ª Jermaine Recovery',desc:'Cold + Jaw massage',type:'massage'};
return{title:'âœ¨ Jermaine Maint',desc:'Optional',type:'massage'}}
return null}

showProtocolDetails(t){
const d=PROTOCOLS[t]||{title:"ROUTINE",steps:["Follow standard."]};
let h=`<div style="text-align:center;margin:30px 0"><div style="font-size:1.8rem;font-weight:900;color:#fff;text-shadow:0 0 10px var(--cyan)">${d.title}</div></div><div style="background:#111;border-radius:12px;border:1px solid #333;overflow:hidden">${d.steps.map(s=>`<div style="padding:18px 20px;border-bottom:1px solid #222;font-size:0.95rem;color:#ddd;line-height:1.6">${s}</div>`).join('')}</div>`;
this.setText('modalTitle','PROTOCOL');
document.getElementById('modalBody').innerHTML=h;
document.getElementById('mainModal').classList.add('show')}

async fetchOuraData(){
this.setText('syncStatus','SYNCING...');
try{
const end=new Date();end.setDate(end.getDate()+1);
const start=new Date();start.setDate(start.getDate()-10);
const startStr=start.toISOString().split('T')[0];
const endStr=end.toISOString().split('T')[0];
const token=TOKENS[this.user];
const sleepUrl=`https://corsproxy.io/?${encodeURIComponent(`https://api.ouraring.com/v2/usercollection/sleep?start_date=${startStr}&end_date=${endStr}`)}`;
const workoutUrl=`https://corsproxy.io/?${encodeURIComponent(`https://api.ouraring.com/v2/usercollection/workout?start_date=${startStr}&end_date=${endStr}`)}`;
const activityUrl=`https://corsproxy.io/?${encodeURIComponent(`https://api.ouraring.com/v2/usercollection/daily_activity?start_date=${startStr}&end_date=${endStr}`)}`;
const readinessUrl=`https://corsproxy.io/?${encodeURIComponent(`https://api.ouraring.com/v2/usercollection/daily_readiness?start_date=${startStr}&end_date=${endStr}`)}`;
const[sleepRes,workoutRes,activityRes,readinessRes]=await Promise.all([
fetch(sleepUrl,{headers:{'Authorization':`Bearer ${token}`}}),
fetch(workoutUrl,{headers:{'Authorization':`Bearer ${token}`}}),
fetch(activityUrl,{headers:{'Authorization':`Bearer ${token}`}}),
fetch(readinessUrl,{headers:{'Authorization':`Bearer ${token}`}})]);
if(!sleepRes.ok||!workoutRes.ok)throw new Error('API failed');
const sleepData=await sleepRes.json();
const workoutData=await workoutRes.json();
const activityData=await activityRes.json();
const readinessData=await readinessRes.json();
log('ğŸ” OURA DATA RECEIVED:');
log('Sleep records: '+(sleepData.data?.length || 0));
log('Workout records: '+(workoutData.data?.length || 0));
log('Activity records: '+(activityData.data?.length || 0));
log('Readiness records: '+(readinessData.data?.length || 0));
if(sleepData.data?.length > 0) log('Sample sleep: '+JSON.stringify(sleepData.data[0]));
this.processData(sleepData.data||[],workoutData.data||[],activityData.data||[],readinessData.data||[]);
this.setText('syncStatus','SYNCED âœ“');
this.render()}
catch(error){
logerr('âŒ Sync failed: '+error);
this.setText('syncStatus','OFFLINE');
this.render()}}

processData(sleepData,workoutData,activityData,readinessData){
log('ğŸ“Š PROCESSING DATA:');
log('Sleep entries to process: '+sleepData.length);
log('Workout entries to process: '+workoutData.length);
const m=new Map();
const g=(d)=>{if(!m.has(d))m.set(d,{date:d,score:0,totalSec:0,deepSec:0,remSec:0,rhr:'-',cal:0,high:0,med:0,workouts:[]});return m.get(d)};
sleepData.forEach(s=>{
const d=g(s.day);
d.totalSec+=s.total_sleep_duration||0;
d.deepSec+=s.deep_sleep_duration||0;
d.remSec+=s.rem_sleep_duration||0;
// Calculate sleep score from efficiency if not provided
const sleepScore = s.score || (s.efficiency ? Math.round(s.efficiency) : 0);
if(sleepScore && sleepScore>d.score)d.score=sleepScore;
log(`Sleep ${s.day}: ${(s.total_sleep_duration/3600).toFixed(1)}h - Score: ${sleepScore} (from ${s.score ? 'API' : 'efficiency '+s.efficiency})`);
});
readinessData.forEach(r=>{const d=g(r.day);if(r.contributors?.resting_heart_rate)d.rhr=r.contributors.resting_heart_rate});
workoutData.forEach(w=>{const d=g(w.day);const dt=new Date(w.start_datetime);const t=dt.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:false});d.workouts.push({type:w.activity||'other',intensity:w.intensity||'moderate',calories:w.calories||300,time:t,start:w.start_datetime})});
activityData.forEach(a=>{const d=g(a.day);d.cal=a.active_calories||0;d.high=(a.high_activity_time||0)/60;d.med=(a.medium_activity_time||0)/60});
this.history=Array.from(m.values()).sort((a,b)=>b.date.localeCompare(a.date));
log('âœ… Processed history: '+this.history.length+' days');
this.currentIndex=this.history.findIndex(h=>h.date===this.currentDateStr);
if(this.currentIndex===-1){this.history.unshift({date:this.currentDateStr,score:0,totalSec:0,deepSec:0,remSec:0,rhr:'-',cal:0,high:0,med:0,workouts:[]});this.currentIndex=0}}

changeDate(dir){
const n=this.currentIndex-dir;
if(n>=0&&n<this.history.length){this.currentIndex=n;this.currentDateStr=this.history[n].date;this.render()}}

switchUser(u){
try{
log(`ğŸ”„ Switch user called: ${u} (current: ${this.user})`);
if(u===this.user){log('âš ï¸ Already on this user, skipping');return;}
this.setText('statusMsg','SWITCHING...');
document.querySelectorAll('.user-switch button').forEach(b=>b.classList.remove('active'));
document.getElementById(`btn-${u}`).classList.add('active');
this.user=u;localStorage.setItem('centurion_user',u);
log(`âœ… User switched to: ${u}`);
this.history=[];
this.loadUserData();
this.setPlaceholderData();
this.render();
this.fetchOuraData();
}catch(e){logerr(`âŒ Switch user error: ${e.message}`)}}

toggleTask(id){
const dk=this.history[this.currentIndex].date;
if(!this.checked[dk])this.checked[dk]=[];
const i=this.checked[dk].indexOf(id);
if(i===-1)this.checked[dk].push(id);else this.checked[dk].splice(i,1);
this.saveUserData();this.render()}

openBio(){
const mb=document.getElementById('modalBody');
this.setText('modalTitle','BIOMETRICS');
const w=this.bios.weight||'--';const bmr=this.bios.bmr||'--';
const h=USERS[this.user].goals.heightInches||70;
const bmi=w&&h&&w!=='--'?((w/(h*h))*703).toFixed(1):'--';
mb.innerHTML=`<div style="padding:20px"><div style="background:#111;padding:15px;border-radius:10px;margin-bottom:20px;border:1px solid #333"><div style="color:#888;font-size:0.7rem;margin-bottom:5px">CURRENT STATUS</div><div style="font-size:2rem;font-weight:900">${w} lbs</div><div style="color:var(--acid);font-size:0.8rem">BMI: ${bmi} | BMR: ${bmr}</div></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:15px"><div style="background:#111;padding:15px;border-radius:10px;border:1px solid #333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">WEIGHT (LBS)</div><input id="bio-weight" type="number" value="${this.bios.weight||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div><div style="background:#111;padding:15px;border-radius:10px;border:1px solid #333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">BMR</div><input id="bio-bmr" type="number" value="${this.bios.bmr||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div><div style="background:#111;padding:15px;border-radius:10px;border:1px solid#333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">APOB (mg/dL)</div><input id="bio-apob" type="number" value="${this.bios.apob||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div><div style="background:#111;padding:15px;border-radius:10px;border:1px solid #333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">LP(A) (mg/dL)</div><input id="bio-lpa" type="number" value="${this.bios.lpa||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div><div style="background:#111;padding:15px;border-radius:10px;border:1px solid #333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">hsCRP (mg/L)</div><input id="bio-hscrp" type="number" step="0.1" value="${this.bios.hscrp||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div><div style="background:#111;padding:15px;border-radius:10px;border:1px solid #333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">HbA1c (%)</div><input id="bio-hba1c" type="number" step="0.1" value="${this.bios.hba1c||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div><div style="background:#111;padding:15px;border-radius:10px;border:1px solid #333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">BODY FAT (%)</div><input id="bio-bodyfat" type="number" step="0.1" value="${this.bios.bodyfat||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div><div style="background:#111;padding:15px;border-radius:10px;border:1px solid #333"><div style="font-size:0.6rem;color:#666;margin-bottom:8px;font-weight:900">MUSCLE (LBS)</div><input id="bio-muscle" type="number" step="0.1" value="${this.bios.muscle||''}" style="width:100%;padding:10px;background:#0a0a0a;border:1px solid #444;color:#fff;border-radius:6px;font-size:1rem;font-family:monospace"></div></div><button onclick="app.saveBio()" style="width:100%;background:var(--acid);color:#000;padding:15px;margin-top:20px;border:none;border-radius:10px;font-weight:900">SAVE BIOMETRICS</button></div>`;
document.getElementById('mainModal').classList.add('show')}

saveBio(){
['weight','bmr','apob','lpa','hscrp','hba1c','bodyfat','muscle'].forEach(f=>{const el=document.getElementById(`bio-${f}`);if(el&&el.value)this.bios[f]=el.value});
this.saveUserData();this.closeModal();this.render()}

openMealPicker(slot){
const mb=document.getElementById('modalBody');
this.setText('modalTitle',slot.toUpperCase());
const all=MEALS[slot]||[];
const currentSel=this.meals[this.history[this.currentIndex].date]?.[slot];
let h='';
all.forEach((m,i)=>{
const isSelected=currentSel===i;
const selectedClass=isSelected?'style="background:#1a1a1a;border-color:var(--acid)"':'';
const checkmark=isSelected?'<span style="color:var(--acid);margin-right:8px;font-weight:900">âœ“</span>':'';
h+=`<div class="menu-item" ${selectedClass} onclick="app.showRecipe('${slot}',${i})"><div class="menu-left"><div class="menu-name">${checkmark}${m.title}</div><div class="menu-meta">P:${m.macros.p}g â€¢ Î©3:${m.macros.o}mg â€¢ F:${m.macros.f}g â€¢ Cal:${m.macros.cal}</div></div><div class="menu-arrow">â€º</div></div>`;
});
mb.innerHTML=h;
document.getElementById('mainModal').classList.add('show')}

showRecipe(slot,idx){
const meal=MEALS[slot][idx];
const mb=document.getElementById('modalBody');
this.setText('modalTitle',meal.title.toUpperCase());
let html=`<div class="recipe-hero"><div class="recipe-title">${meal.title}</div><div class="recipe-stats">${meal.time||'Quick'} â€¢ ${meal.servings||1} serving</div></div>`;
html+=`<div class="macro-grid"><div class="macro-stat"><div class="m-val">${meal.macros.p}g</div><div class="m-lbl">PROTEIN</div></div><div class="macro-stat"><div class="m-val">${meal.macros.o}mg</div><div class="m-lbl">OMEGA-3</div></div><div class="macro-stat"><div class="m-val">${meal.macros.f}g</div><div class="m-lbl">FIBER</div></div><div class="macro-stat"><div class="m-val">${meal.macros.cal}</div><div class="m-lbl">CALORIES</div></div></div>`;
html+=`<div class="synergy-box"><div class="syn-title">ğŸ§¬ BIO HACK</div><div class="syn-text">${meal.why}</div></div>`;
html+=`<div style="margin-bottom:20px"><div style="font-size:0.8rem;font-weight:900;color:var(--acid);margin-bottom:10px;text-transform:uppercase">INGREDIENTS</div>`;
meal.ingredients.forEach(ing=>{html+=`<div class="ing-item">${ing}</div>`});
html+=`</div><div><div style="font-size:0.8rem;font-weight:900;color:var(--acid);margin-bottom:10px;text-transform:uppercase">PREPARATION</div>`;
meal.steps.forEach((step,i)=>{html+=`<div class="step-item"><div style="font-weight:900;color:var(--cyan);font-size:1.2rem;min-width:30px">${i+1}</div><div>${step}</div></div>`});
html+=`</div><button onclick="app.selectMeal('${slot}',${idx});app.closeModal()" style="width:100%;background:var(--acid);color:#000;padding:18px;margin-top:25px;border:none;border-radius:12px;font-weight:900;font-size:1.1rem;cursor:pointer;text-transform:uppercase;box-shadow:0 0 20px rgba(204,255,0,0.3);letter-spacing:1px">ADD TO PROTOCOL</button>`;
mb.innerHTML=html}

closeModal(){document.getElementById('mainModal').classList.remove('show')}

selectMeal(slot,idx){
const d=this.history[this.currentIndex].date;
if(!this.meals[d])this.meals[d]={};
this.meals[d][slot]=idx;
this.saveUserData();this.closeModal();this.render()}

calculateMacros(){
const d=this.history[this.currentIndex].date;
const c=this.checked[d]||[];
let t={protein:0,omega3:0,fiber:0,calories:0};
this.protocol.forEach(tk=>{if(c.includes(tk.id)){t.protein+=tk.macros.p||0;t.omega3+=tk.macros.o||0;t.fiber+=tk.macros.f||0;t.calories+=tk.macros.cal||0}});
return t}

calculateRainbow(){
const d=this.history[this.currentIndex].date;
const c=this.checked[d]||[];
let s=new Set();
this.protocol.forEach(t=>{if(c.includes(t.id)&&t.colors)t.colors.forEach(col=>s.add(col))});
return s}

render(){
if(!this.history.length)return;
this.protocol=JSON.parse(JSON.stringify(BASE));
const day=this.history[this.currentIndex];
const date=day.date;
let sel=this.meals[date]||{};
const dow=new Date(date).getDay();
const isFS=new Date(date).getDate()<=7;
const hadW=day.workouts&&day.workouts.length>0;
const wType=hadW?day.workouts[0].type:null;

// AUTO-RECOMMEND meals if not yet selected
const goals=USERS[this.user].goals;
['breakfast','lunch','dinner'].forEach(slot=>{
if(sel[slot]===undefined){
const mealList=MEALS[slot]||[];
if(mealList.length>0){
// Calculate current macro totals before this meal
const currentMacros=this.calculateMacros();
const proteinNeeded=goals.protein-currentMacros.protein;
const omega3Needed=goals.omega3-currentMacros.omega3;
// Score each meal
let bestIdx=0;
let bestScore=0;
mealList.forEach((meal,idx)=>{
let score=0;
if(proteinNeeded>40&&meal.macros.p>50)score+=3;
if(omega3Needed>2000&&meal.macros.o>2000)score+=2;
if(score>bestScore){bestScore=score;bestIdx=idx}
});
sel[slot]=bestIdx;
log(`ğŸ¯ Auto-recommended ${slot}: ${mealList[bestIdx].title} (P:${mealList[bestIdx].macros.p}g)`);
}
}
});
this.meals[date]=sel;
this.saveUserData();

const lr=this.getLunchRecovery(dow);
if(lr)this.protocol.push({id:'lunch_recovery',time:'11:30',title:lr.title,desc:lr.desc,macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:false});

day.workouts.forEach((w,i)=>{this.protocol.push({id:`workout_${i}`,time:w.time,title:`${w.type.toUpperCase()} Detected`,desc:`${w.calories} cal | ${w.intensity}`,macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:false,autoDetected:true})});

const er=this.getEveningRecovery(dow,hadW,wType);
if(er)this.protocol.push({id:'evening_recovery',time:er.time,title:er.title,desc:er.desc+' - Tap for protocol',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,type:er.type,cssClass:'recovery'});

const fac=this.getEndOfDayFacial(dow,isFS);
if(fac)this.protocol.push({id:'facial',time:'21:00',title:fac.title,desc:fac.desc+' - Tap for protocol',macros:{p:0,o:0,f:0,cal:0},colors:[],clickable:true,type:fac.type,cssClass:'facial'});

this.protocol.forEach(t=>{if(t.mealSlot&&sel[t.mealSlot]!==undefined){const all=MEALS[t.mealSlot]||[];if(all[sel[t.mealSlot]]){const m=all[sel[t.mealSlot]];t.title=m.title;t.desc=`P:${m.macros.p} C:${m.macros.cal}`;t.macros=m.macros;t.colors=m.colors}}});

this.protocol.sort((a,b)=>a.time.localeCompare(b.time));

this.setText('dateLabel',date);
const mac=this.calculateMacros();
const sc=Math.min(100,Math.round(((day.totalSec||0)/3600/8)*100));
this.setText('dayGrade',sc>=85?'A':sc>=70?'B':'C');

// Calculate 7-day longevity score
const last7=this.history.slice(0,7);
const avgScore=last7.length>0?Math.round(last7.reduce((sum,d)=>sum+(d.score||0),0)/last7.length):0;
this.setText('longevityScore',avgScore);
log(`ğŸ’¯ Longevity Score: ${avgScore} (7-day avg)`);

const upd=(id,val,max,col)=>{const el=document.getElementById(id);if(el){el.style.strokeDashoffset=145-(Math.min(val/max,1)*145);el.style.stroke=col}const txt=document.getElementById(id.replace('Orb','Val'));if(txt)txt.innerText=Math.round(val)};
const updOrb=(id,val,max,col)=>{const el=document.getElementById(id);if(el){el.style.strokeDashoffset=145-(Math.min(val/max,1)*145);el.style.stroke=col}};
const sleepHours=(day.totalSec||0)/3600;
const deepMins=Math.round((day.deepSec||0)/60);
const remMins=Math.round((day.remSec||0)/60);
log(`ğŸ“Š Rendering ${day.date}: Sleep=${sleepHours.toFixed(1)}h, Deep=${deepMins}m, REM=${remMins}m`);
this.setText('sleepVal',`${sleepHours.toFixed(1)}h`);
this.setText('deepVal',`${deepMins}m`);
this.setText('remVal',`${remMins}m`);
updOrb('sleepOrb',sleepHours,8,'#bf5af2');
updOrb('deepOrb',deepMins,90,'#007aff');
updOrb('remOrb',remMins,90,'#bf5af2');

// RHR and Zones Display
this.setText('rhrVal',day.rhr!=='-'?day.rhr:'--');
this.setText('z2Val',Math.round(day.med||0));
this.setText('z5Val',Math.round(day.high||0));
this.setText('calVal',Math.round(day.cal||0));
const updHeart=(id,val,max)=>{const el=document.getElementById(id);if(el)el.style.strokeDashoffset=100-(Math.min(val/max,1)*100)};
updHeart('z2Heart',day.med||0,45);
updHeart('z5Heart',day.high||0,20);
updHeart('calHeart',day.cal||0,500);

upd('proteinOrb',mac.protein,USERS[this.user].goals.protein,'#fff');
upd('omega3Orb',mac.omega3,4000,'#00d4ff');
upd('fiberOrb',mac.fiber,50,'#30d158');
upd('calorieOrb',mac.calories,2500,'#FFD60A');

const cols=this.calculateRainbow();
this.setText('rainbowScore',Math.round((cols.size/6)*100)+'%');
let rh='';
['red','orange','yellow','green','purple','white'].forEach(c=>{rh+=`<div class="rainbow-seg" style="background:${cols.has(c)?COLORS[c].hex:'#333'};width:${cols.has(c)?16.6:0}%"></div>`});
document.getElementById('rainbowTrack').innerHTML=rh;

const chk=this.checked[date]||[];
let th='';
this.protocol.forEach(t=>{
const isC=chk.includes(t.id);
let ca='';let cc=`task-card ${isC?'checked':''} ${t.autoDetected?'auto-detected':''} ${t.cssClass||''}`;
if(t.clickable){if(t.type&&(t.type in PROTOCOLS))ca=`onclick="app.showProtocolDetails('${t.type}')"`;else if(t.mealSlot)ca=`onclick="app.openMealPicker('${t.mealSlot}')"`}
th+=`<div class="task"><div class="task-time">${t.time}</div><div class="${cc}" ${ca}><div class="task-info"><div class="task-title">${t.title}</div><div class="task-desc">${t.desc}</div></div>${t.clickable?'<div class="chevron">â€º</div>':''}${!t.autoDetected&&!t.type?`<div class="check-btn" onclick="event.stopPropagation();app.toggleTask('${t.id}')"><div class="check-circle">${isC?'âœ“':''}</div></div>`:''}</div></div>`});
document.getElementById('timeline').innerHTML=th}

setText(id,txt){const el=document.getElementById(id);if(el)el.innerText=txt}
sync(){this.fetchOuraData()}}

let app;
window.onload=()=>{app=new CenturionApp();window.app=app};
</script>

</body>
</html>